/*! For license information please see main.8e59fb7e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var n=r(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function v(){}function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,f(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,j={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,a)&&!N.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+E(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),P(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+E(o=e[c],c);l+=P(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,a,d=s+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var n=[],a=0;return P(e,n,"","",function(e){return t.call(r,e,a++)}),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},I={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:j};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!N.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(829)),s=n(r(736));class i{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:n=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const d=new Headers(this.headers);return a&&d.set("Prefer","count=".concat(a)),new s.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(g=!1,b(e),!f)if(null!==n(c))f=!0,R(_);else{var t=n(d);null!==t&&I(w,t.startTime-e)}}function _(e,r){f=!1,g&&(g=!1,v(S),S=-1),p=!0;var s=m;try{for(b(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),b(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&I(w,u.startTime-r),l=!1}return l}finally{h=null,m=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,k=null,S=-1,C=5,E=-1;function P(){return!(t.unstable_now()-E<C)}function T(){if(null!==k){var e=t.unstable_now();E=e;var r=!0;try{r=k(!0,e)}finally{r?j():(N=!1,k=null)}}else N=!1}if("function"===typeof x)j=function(){x(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=T,j=function(){O.postMessage(null)}}else j=function(){y(T,0)};function R(e){k=e,N||(N=!0,j())}function I(e,r){S=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(g?(v(S),S=-1):g=!0,I(w,s-i))):(e.sortIndex=o,r(c,e),f||p||(f=!0,R(_))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},286:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(630)),s=n(r(611));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n,a;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const a=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),s=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");a&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null===i||void 0===i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(286));class s extends a.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof n?"offset":"".concat(n,".offset"),s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=s},391:(e,t,r)=>{var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},630:(e,t,r)=>{r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>s,fetch:()=>a});var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const a=n.fetch,s=n.fetch.bind(n),i=n.Headers,o=n.Request,l=n.Response},730:(e,t,r)=>{var n=r(43),a=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case _:return"Portal";case k:return"Profiler";case N:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function se(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,je=null,Ne=null;function ke(e){if(e=xa(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),_e(e.stateNode,e.type,t))}}function Se(e){je?Ne?Ne.push(e):Ne=[e]:je=e}function Ce(){if(je){var e=je,t=Ne;if(Ne=je=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Ae(e,t,r){if(Te)return e(t,r);Te=!0;try{return Ee(e,t,r)}finally{Te=!1,(null!==je||null!==Ne)&&(Pe(),Ce())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var n=wa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Re=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Re=!1}function De(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Le=!1,Me=null,Fe=!1,Ue=null,ze={onError:function(e){Le=!0,Me=e}};function We(e,t,r,n,a,s,i,o,l){Le=!1,Me=null,De.apply(ze,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return He(a),e;if(i===n)return He(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,Je=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=ut(o):0!==(s&=i)&&(n=ut(s))}else 0!==(i=r&~a)?n=ut(i):0!==s&&(n=ut(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,jt,Nt,kt,St=!1,Ct=[],Et=null,Pt=null,Tt=null,At=new Map,Ot=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&_t(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=va(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Be(r)))return e.blockedOn=t,void kt(e.priority,function(){jt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=xa(r))&&_t(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Ut(e,t,r){Ft(e)&&r.delete(t)}function zt(){St=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Tt&&Ft(Tt)&&(Tt=null),At.forEach(Ut),Ot.forEach(Ut)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function qt(e){function t(t){return Wt(t,e)}if(0<Ct.length){Wt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Wt(Et,e),null!==Pt&&Wt(Pt,e),null!==Tt&&Wt(Tt,e),At.forEach(t),Ot.forEach(t),r=0;r<Rt.length;r++)(n=Rt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Mt(r),null===r.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,r,n){var a=xt,s=Bt.transition;Bt.transition=null;try{xt=1,Kt(e,t,r,n)}finally{xt=a,Bt.transition=s}}function Gt(e,t,r,n){var a=xt,s=Bt.transition;Bt.transition=null;try{xt=4,Kt(e,t,r,n)}finally{xt=a,Bt.transition=s}}function Kt(e,t,r,n){if(Ht){var a=Jt(e,t,r,n);if(null===a)Hn(e,t,n,$t,r),Dt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Et=Lt(Et,e,t,r,n,a),!0;case"dragenter":return Pt=Lt(Pt,e,t,r,n,a),!0;case"mouseover":return Tt=Lt(Tt,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Ot.set(s,Lt(Ot.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Dt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==a;){var s=xa(a);if(null!==s&&wt(s),null===(s=Jt(e,t,r,n))&&Hn(e,t,n,$t,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Hn(e,t,n,null,r)}}var $t=null;function Jt(e,t,r,n){if($t=null,null!==(e=va(e=we(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=M({},lr,{view:0,detail:0}),ur=ar(dr),hr=M({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),mr=ar(hr),pr=ar(M({},hr,{dataTransfer:0})),fr=ar(M({},dr,{relatedTarget:0})),gr=ar(M({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=M({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=ar(yr),xr=ar(M({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function Nr(){return jr}var kr=M({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=ar(kr),Cr=ar(M({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=ar(M({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Pr=ar(M({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=M({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=ar(Tr),Or=[9,13,27,32],Rr=d&&"CompositionEvent"in window,Ir=null;d&&"documentMode"in document&&(Ir=document.documentMode);var Dr=d&&"TextEvent"in window&&!Ir,Lr=d&&(!Rr||Ir&&8<Ir&&11>=Ir),Mr=String.fromCharCode(32),Fr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wr=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Hr(e,t,r,n){Se(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Vr=null,Gr=null;function Kr(e){Fn(e,0)}function $r(e){if(K(ba(e)))return e}function Jr(e,t){if("change"===e)return t}var Qr=!1;if(d){var Yr;if(d){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Yr=Xr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function en(){Vr&&(Vr.detachEvent("onpropertychange",tn),Gr=Vr=null)}function tn(e){if("value"===e.propertyName&&$r(Gr)){var t=[];Hr(t,Gr,e,we(e)),Ae(Kr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Vr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $r(Gr)}function an(e,t){if("click"===e)return $r(t)}function sn(e,t){if("input"===e||"change"===e)return $r(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=dn(r,s);var i=dn(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,vn=null,xn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xn||null==gn||gn!==$(n)||("selectionStart"in(n=gn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Gn(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _n={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},jn={},Nn={};function kn(e){if(jn[e])return jn[e];if(!_n[e])return e;var t,r=_n[e];for(t in r)if(r.hasOwnProperty(t)&&t in Nn)return jn[e]=r[t];return e}d&&(Nn=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var Sn=kn("animationend"),Cn=kn("animationiteration"),En=kn("animationstart"),Pn=kn("transitionend"),Tn=new Map,An="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){Tn.set(e,t),l(t,[e])}for(var Rn=0;Rn<An.length;Rn++){var In=An[Rn];On(In.toLowerCase(),"on"+(In[0].toUpperCase()+In.slice(1)))}On(Sn,"onAnimationEnd"),On(Cn,"onAnimationIteration"),On(En,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(Pn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ln=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function Mn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(We.apply(this,arguments),Le){if(!Le)throw Error(s(198));var d=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=d)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Mn(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Mn(a,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Un(e,t){var r=t[fa];void 0===r&&(r=t[fa]=new Set);var n=e+"__bubble";r.has(n)||(Bn(t,e,2,!1),r.add(n))}function zn(e,t,r){var n=0;t&&(n|=4),Bn(r,e,n,t)}var Wn="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Wn]){e[Wn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ln.has(t)||zn(t,!1,e),zn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wn]||(t[Wn]=!0,zn("selectionchange",!1,t))}}function Bn(e,t,r,n){switch(Qt(t)){case 1:var a=Vt;break;case 4:a=Gt;break;default:a=Kt}r=a.bind(null,t,r,e),a=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Hn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=va(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Ae(function(){var n=s,a=we(r),i=[];e:{var o=Tn.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Sn:case Cn:case En:l=gr;break;case Pn:l=Pr;break;case"scroll":l=ur;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Oe(p,h))&&d.push(Vn(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!va(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?va(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mr,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cr,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:ba(l),m=null==c?o:ba(c),(o=new d(f,p+"leave",l,r,a)).target=u,o.relatedTarget=m,f=null,va(a)===n&&((d=new d(h,p+"enter",c,r,a)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Kn(m))p++;for(m=0,f=h;f;f=Kn(f))m++;for(;0<p-m;)d=Kn(d),p--;for(;0<m-p;)h=Kn(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kn(d),h=Kn(h)}d=null}else d=null;null!==l&&$n(i,o,l,d,!1),null!==c&&null!==u&&$n(i,u,c,d,!0)}if("select"===(l=(o=n?ba(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jr;else if(Br(o))if(Qr)g=sn;else{g=nn;var y=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Hr(i,g,r,a):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=n?ba(n):window,e){case"focusin":(Br(y)||"true"===y.contentEditable)&&(gn=y,yn=n,vn=null);break;case"focusout":vn=yn=gn=null;break;case"mousedown":xn=!0;break;case"contextmenu":case"mouseup":case"dragend":xn=!1,bn(i,r,a);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":bn(i,r,a)}var v;if(Rr)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wr?Ur(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(Lr&&"ko"!==r.locale&&(Wr||"onCompositionStart"!==x?"onCompositionEnd"===x&&Wr&&(v=er()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Wr=!0)),0<(y=Gn(n,x)).length&&(x=new xr(x,e,null,r,a),i.push({event:x,listeners:y}),v?x.data=v:null!==(v=zr(r))&&(x.data=v))),(v=Dr?function(e,t){switch(e){case"compositionend":return zr(t);case"keypress":return 32!==t.which?null:(Fr=!0,Mr);case"textInput":return(e=t.data)===Mr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Wr)return"compositionend"===e||!Rr&&Ur(e,t)?(e=er(),Zt=Xt=Yt=null,Wr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(a=new xr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=v))}Fn(i,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Oe(e,r))&&n.unshift(Vn(e,s,a)),null!=(s=Oe(e,t))&&n.push(Vn(e,s,a))),e=e.return}return n}function Kn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $n(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Oe(r,s))&&i.unshift(Vn(r,l,o)):a||null!=(l=Oe(r,s))&&i.push(Vn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Jn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Jn,"\n").replace(Qn,"")}function Xn(e,t,r){if(t=Yn(t),Yn(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,ma="__reactProps$"+ua,pa="__reactContainer$"+ua,fa="__reactEvents$"+ua,ga="__reactListeners$"+ua,ya="__reactHandles$"+ua;function va(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ha])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function xa(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[ma]||null}var _a=[],ja=-1;function Na(e){return{current:e}}function ka(e){0>ja||(e.current=_a[ja],_a[ja]=null,ja--)}function Sa(e,t){ja++,_a[ja]=e.current,e.current=t}var Ca={},Ea=Na(Ca),Pa=Na(!1),Ta=Ca;function Aa(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ra(){ka(Pa),ka(Ea)}function Ia(e,t,r){if(Ea.current!==Ca)throw Error(s(168));Sa(Ea,t),Sa(Pa,r)}function Da(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,B(e)||"Unknown",a));return M({},r,n)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Ta=Ea.current,Sa(Ea,e),Sa(Pa,Pa.current),!0}function Ma(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Da(e,t,Ta),n.__reactInternalMemoizedMergedChildContext=e,ka(Pa),ka(Ea),Sa(Ea,e)):ka(Pa),Sa(Pa,r)}var Fa=null,Ua=!1,za=!1;function Wa(e){null===Fa?Fa=[e]:Fa.push(e)}function qa(){if(!za&&null!==Fa){za=!0;var e=0,t=xt;try{var r=Fa;for(xt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fa=null,Ua=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ke(Ze,qa),a}finally{xt=t,za=!1}}return null}var Ba=[],Ha=0,Va=null,Ga=0,Ka=[],$a=0,Ja=null,Qa=1,Ya="";function Xa(e,t){Ba[Ha++]=Ga,Ba[Ha++]=Va,Va=e,Ga=t}function Za(e,t,r){Ka[$a++]=Qa,Ka[$a++]=Ya,Ka[$a++]=Ja,Ja=e;var n=Qa;e=Ya;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Qa=1<<32-it(t)+a|r<<a|n,Ya=s+e}else Qa=1<<s|r<<a|n,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Va;)Va=Ba[--Ha],Ba[Ha]=null,Ga=Ba[--Ha],Ba[Ha]=null;for(;e===Ja;)Ja=Ka[--$a],Ka[$a]=null,Ya=Ka[--$a],Ka[$a]=null,Qa=Ka[--$a],Ka[$a]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ja?{id:Qa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function ms(){ns=rs=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Mc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===j?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&vs(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Ic(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Dc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case _:return(t=Fc(t,e.mode,r)).return=e,t;case O:return h(e,(0,t._init)(t._payload),r)}if(te(t)||D(t))return(t=Dc(t,e.mode,r,null)).return=e,t;ys(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?c(e,t,r,n):null;case _:return r.key===a?d(e,t,r,n):null;case O:return m(e,t,(a=r._init)(r._payload),n)}if(te(r)||D(r))return null!==a?null:u(e,t,r,n,null);ys(e,r)}return null}function p(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case _:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case O:return p(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||D(n))return u(t,e=e.get(r)||null,n,a,null);ys(t,n)}return null}function f(a,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var y=m(a,u,o[f],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(a,u),s=i(y,s,f),null===d?c=y:d.sibling=y,d=y,u=g}if(f===o.length)return r(a,u),as&&Xa(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(a,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return as&&Xa(a,f),c}for(u=n(a,u);f<o.length;f++)null!==(g=p(u,a,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),as&&Xa(a,f),c}function g(a,o,l,c){var d=D(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,y=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var x=m(a,f,v.value,c);if(null===x){null===f&&(f=y);break}e&&f&&null===x.alternate&&t(a,f),o=i(x,o,g),null===u?d=x:u.sibling=x,u=x,f=y}if(v.done)return r(a,f),as&&Xa(a,g),d;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,g),null===u?d=v:u.sibling=v,u=v);return as&&Xa(a,g),d}for(f=n(a,f);!v.done;g++,v=l.next())null!==(v=p(f,a,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(a,e)}),as&&Xa(a,g),d}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===j){if(7===d.tag){r(n,d.sibling),(s=a(d,i.props.children)).return=n,n=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&vs(c)===d.type){r(n,d.sibling),(s=a(d,i.props)).ref=gs(n,d,i),s.return=n,n=s;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===j?((s=Dc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Ic(i.type,i.key,i.props,null,n.mode,l)).ref=gs(n,s,i),l.return=n,n=l)}return o(n);case _:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Fc(i,n.mode,l)).return=n,n=s}return o(n);case O:return e(n,s,(d=i._init)(i._payload),l)}if(te(i))return f(n,s,i,l);if(D(i))return g(n,s,i,l);ys(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Mc(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var bs=xs(!0),ws=xs(!1),_s=Na(null),js=null,Ns=null,ks=null;function Ss(){ks=Ns=js=null}function Cs(e){var t=_s.current;ka(_s),e._currentValue=t}function Es(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ps(e,t){js=e,ks=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===js)throw Error(s(308));Ns=e,js.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var As=null;function Os(e){null===As?As=[e]:As.push(e)}function Rs(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Os(t)):(r.next=a.next,a.next=r),t.interleaved=r,Is(e,n)}function Is(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ds=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&El)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Is(e,r)}return null===(a=n.interleaved)?(t.next=t,Os(n)):(t.next=a.next,a.next=t),n.interleaved=t,Is(e,r)}function zs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Ws(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qs(e,t,r,n){var a=e.updateQueue;Ds=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=r,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=M({},u,h);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=u}}function Bs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Hs={},Vs=Na(Hs),Gs=Na(Hs),Ks=Na(Hs);function $s(e){if(e===Hs)throw Error(s(174));return e}function Js(e,t){switch(Sa(Ks,t),Sa(Gs,e),Sa(Vs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Vs),Sa(Vs,t)}function Qs(){ka(Vs),ka(Gs),ka(Ks)}function Ys(e){$s(Ks.current);var t=$s(Vs.current),r=le(t,e.type);t!==r&&(Sa(Gs,e),Sa(Vs,r))}function Xs(e){Gs.current===e&&(ka(Vs),ka(Gs))}var Zs=Na(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function fi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Xi:Zi,e=r(n,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(di)}if(ni.current=Yi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function xi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=vi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(xo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=vi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(xo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function _i(){}function ji(e,t){var r=ii,n=vi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,xo=!0),n=n.queue,Di(Si.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ti(9,ki.bind(null,r,n,a,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&si)||Ni(r,t,a)}return a}function Ni(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ki(e,t,r,n){t.value=r,t.getSnapshot=n,Ci(t)&&Ei(e)}function Si(e,t,r){return r(function(){Ci(t)&&Ei(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ei(e){var t=Is(e,1);null!==t&&rc(t,e,1,-1)}function Pi(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ai(){return vi().memoizedState}function Oi(e,t,r,n){var a=yi();ii.flags|=e,a.memoizedState=Ti(1|t,r,void 0,void 0===n?null:n)}function Ri(e,t,r,n){var a=vi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&pi(n,i.deps))return void(a.memoizedState=Ti(t,r,s,n))}ii.flags|=e,a.memoizedState=Ti(1|t,r,s,n)}function Ii(e,t){return Oi(8390656,8,e,t)}function Di(e,t){return Ri(2048,8,e,t)}function Li(e,t){return Ri(4,2,e,t)}function Mi(e,t){return Ri(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ri(4,4,Fi.bind(null,t,e),r)}function zi(){}function Wi(e,t){var r=vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Bi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=r):(on(r,t)||(r=ft(),ii.lanes|=r,Ll|=r,e.baseState=!0),t)}function Hi(e,t){var r=xt;xt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{xt=r,ai.transition=n}}function Vi(){return vi().memoizedState}function Gi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},$i(e))Ji(t,r);else if(null!==(r=Rs(e,t,r,n))){rc(r,e,n,ec()),Qi(r,t,n)}}function Ki(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if($i(e))Ji(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,Os(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Rs(e,t,a,n))&&(rc(r,e,n,a=ec()),Qi(r,t,n))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ji(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Yi={readContext:Ts,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Xi={readContext:Ts,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Ii,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Oi(4194308,4,Fi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var r=yi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Pi,useDebugValue:zi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Hi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=yi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Pl)throw Error(s(349));0!==(30&si)||Ni(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ii(Si.bind(null,n,i,e),[e]),n.flags|=2048,Ti(9,ki.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=yi(),t=Pl.identifierPrefix;if(as){var r=Ya;t=":"+t+"R"+(r=(Qa&~(1<<32-it(Qa)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ts,useCallback:Wi,useContext:Ts,useEffect:Di,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:qi,useReducer:bi,useRef:Ai,useState:function(){return bi(xi)},useDebugValue:zi,useDeferredValue:function(e){return Bi(vi(),oi.memoizedState,e)},useTransition:function(){return[bi(xi)[0],vi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ts,useCallback:Wi,useContext:Ts,useEffect:Di,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Mi,useMemo:qi,useReducer:wi,useRef:Ai,useState:function(){return wi(xi)},useDebugValue:zi,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Bi(t,oi.memoizedState,e)},useTransition:function(){return[wi(xi)[0],vi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=M({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:M({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Us(e,s,a))&&(rc(t,e,a,n),zs(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Us(e,s,a))&&(rc(t,e,a,n),zs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Fs(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Us(e,a,n))&&(rc(t,e,n,r),zs(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Ca,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(a=Oa(t)?Ta:Ea.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Aa(e,a):Ca),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ts(s):(s=Oa(t)?Ta:Ea.current,a.context=Aa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),qs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=W(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Fs(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,Vl=n),uo(0,t)},r}function po(e,t,r){(r=Fs(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fs(-1,1)).tag=2,Us(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vo=b.ReactCurrentOwner,xo=!1;function bo(e,t,r,n){t.child=null===e?ws(t,null,r,n):bs(t,e.child,r,n)}function wo(e,t,r,n,a){r=r.render;var s=t.ref;return Ps(t,a),n=fi(e,t,r,n,s,a),r=gi(),null===e||xo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function _o(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Ho(e,t,a)}return t.flags|=1,(e=Rc(s,n)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(xo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Ho(e,t,a);0!==(131072&e.flags)&&(xo=!0)}}return So(e,t,r,n,a)}function No(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Rl,Ol),Ol|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Sa(Rl,Ol),Ol|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Sa(Rl,Ol),Ol|=n;return bo(e,t,a,r),t.child}function ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,a){var s=Oa(r)?Ta:Ea.current;return s=Aa(t,s),Ps(t,a),r=fi(e,t,r,n,s,a),n=gi(),null===e||xo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function Co(e,t,r,n,a){if(Oa(r)){var s=!0;La(t)}else s=!1;if(Ps(t,a),null===t.stateNode)Bo(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Aa(t,c=Oa(r)?Ta:Ea.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Ds=!1;var h=t.memoizedState;i.state=h,qs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Pa.current||Ds?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Ds||ao(t,r,o,n,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ts(l):l=Aa(t,l=Oa(r)?Ta:Ea.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,n,l),Ds=!1,h=t.memoizedState,i.state=h,qs(t,n,i,a);var p=t.memoizedState;o!==u||h!==p||Pa.current||Ds?("function"===typeof m&&(ro(t,r,m,n),p=t.memoizedState),(c=Ds||ao(t,r,c,n,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Eo(e,t,r,n,s,a)}function Eo(e,t,r,n,a,s){ko(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Ma(t,r,!1),Ho(e,t,s);n=t.stateNode,vo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=n.state,a&&Ma(t,r,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Js(e,t.containerInfo)}function To(e,t,r,n,a){return ms(),ps(a),t.flags|=256,bo(e,t,r,n),t.child}var Ao,Oo,Ro,Io,Do={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,r){var n,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),e=Dc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(r),t.memoizedState=Do,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Lc({mode:"visible",children:n.children},a,0,null),(i=Dc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Do,i);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,Uo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(n=Pl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Is(e,a),rc(n,e,a,-1))}return fc(),Uo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ka[$a++]=Qa,Ka[$a++]=Ya,Ka[$a++]=Ja,Qa=e.id,Ya=e.overflow,Ja=t),t=Fo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Rc(n,o):(o=Dc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Do,a}return e=(o=e.child).sibling,a=Rc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,r,n){return null!==n&&ps(n),bs(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Es(e.return,t,r)}function Wo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function qo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(bo(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,r,t);else if(19===e.tag)zo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Sa(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Wo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Wo(t,!0,r,null,s);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Rc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Vo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ko(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Oa(t.type)&&Ra(),Go(t),null;case 3:return n=t.stateNode,Qs(),ka(Pa),ka(Ea),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Oo(e,t),Go(t),null;case 5:Xs(t);var a=$s(Ks.current);if(r=t.type,null!==e&&null!=t.stateNode)Ro(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=$s(Vs.current),us(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ha]=t,n[ma]=i,e=0!==(1&t.mode),r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(a=0;a<Dn.length;a++)Un(Dn[a],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":Q(n,i),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Un("invalid",n);break;case"textarea":ae(n,i),Un("invalid",n)}for(var l in ve(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Un("scroll",n)}switch(r){case"input":G(n),Z(n,i,!0);break;case"textarea":G(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[ma]=n,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(r,n),r){case"dialog":Un("cancel",e),Un("close",e),a=n;break;case"iframe":case"object":case"embed":Un("load",e),a=n;break;case"video":case"audio":for(a=0;a<Dn.length;a++)Un(Dn[a],e);a=n;break;case"source":Un("error",e),a=n;break;case"img":case"image":case"link":Un("error",e),Un("load",e),a=n;break;case"details":Un("toggle",e),a=n;break;case"input":Q(e,n),a=J(e,n),Un("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=M({},n,{value:void 0}),Un("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Un("invalid",e)}for(i in ve(r,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Un("scroll",e):null!=d&&x(e,i,d,l))}switch(r){case"input":G(e),Z(e,n,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=$s(Ks.current),$s(Vs.current),us(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Go(t),null;case 13:if(ka(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,i=!1;else if(i=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Il&&(Il=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Qs(),Oo(e,t),null===e&&qn(t.stateNode.containerInfo),Go(t),null;case 10:return Cs(t.type._context),Go(t),null;case 19:if(ka(Zs),null===(i=t.memoizedState))return Go(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Vo(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sa(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>ql&&(t.flags|=128,n=!0,Vo(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Go(t),null}else 2*Ye()-i.renderingStartTime>ql&&1073741824!==r&&(t.flags|=128,n=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,r=Zs.current,Sa(Zs,n?1&r|2:1&r),t):(Go(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $o(e,t){switch(ts(t),t.tag){case 1:return Oa(t.type)&&Ra(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),ka(Pa),ka(Ea),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ka(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zs),null;case 4:return Qs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Oo=function(){},Ro=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,$s(Vs.current);var s,i=null;switch(r){case"input":a=J(e,a),n=J(e,n),i=[];break;case"select":a=M({},a,{value:void 0}),n=M({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in ve(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Un("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Io=function(e,t,r,n){r!==n&&(t.flags|=4)};var Jo=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Nc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Nc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[ma],delete t[fa],delete t[ga],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Qo||Zo(r,t);case 6:var n=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),qt(e)):la(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Qo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Nc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Qo=(n=Qo)||null!==r.memoizedState,hl(e,t,r),Qo=n):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Yo),t.forEach(function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){Nc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){Nc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(fl(t,e),yl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Nc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),xe(l,o);var d=xe(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):x(a,u,h,d)}switch(l){case"input":X(a,i);break;case"textarea":se(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(a,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Wl=Ye())),4&n&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),yl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(p=(m=Xo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nc(n,r,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Xo=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&n&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){Xo=e,xl(e,t,r)}function xl(e,t,r){for(var n=0!==(1&e.mode);null!==Xo;){var a=Xo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Jo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Jo;var c=Qo;if(Jo=i,(Qo=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?_l(a):null!==l?(l.return=i,Xo=l):_l(a);for(;null!==s;)Xo=s,xl(s,t,r),s=s.sibling;Xo=a,Jo=o,Qo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Xo=s):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Bs(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Bs(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&al(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Nc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){Nc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Nc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var jl,Nl=Math.ceil,kl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,El=0,Pl=null,Tl=null,Al=0,Ol=0,Rl=Na(0),Il=0,Dl=null,Ll=0,Ml=0,Fl=0,Ul=null,zl=null,Wl=0,ql=1/0,Bl=null,Hl=!1,Vl=null,Gl=null,Kl=!1,$l=null,Jl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Al?Al&-Al:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,n){if(50<Ql)throw Ql=0,Yl=null,Error(s(185));yt(e,r,n),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Ml|=r),4===Il&&oc(e,Al)),nc(e,n),1===r&&0===El&&0===(1&t.mode)&&(ql=Ye()+500,Ua&&qa()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===Pl?Al:0);if(0===n)null!==r&&$e(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&$e(r),1===t)0===e.tag?function(e){Ua=!0,Wa(e)}(lc.bind(null,e)):Wa(lc.bind(null,e)),ia(function(){0===(6&El)&&qa()}),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Pc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(s(327));var r=e.callbackNode;if(_c()&&e.callbackNode!==r)return null;var n=ht(e,e===Pl?Al:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=El;El|=2;var i=pc();for(Pl===e&&Al===t||(Bl=null,ql=Ye()+500,hc(e,t));;)try{vc();break}catch(l){mc(e,l)}Ss(),kl.current=i,El=a,null!==Tl?t=0:(Pl=null,Al=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(n=a,t=sc(e,a))),1===t)throw r=Dl,hc(e,0),oc(e,n),nc(e,Ye()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(i=pt(e))&&(n=i,t=sc(e,i))),1===t))throw r=Dl,hc(e,0),oc(e,n),nc(e,Ye()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,zl,Bl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Wl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(wc.bind(null,e,zl,Bl),t);break}wc(e,zl,Bl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nl(n/1960))-n)){e.timeoutHandle=na(wc.bind(null,e,zl,Bl),n);break}wc(e,zl,Bl);break;default:throw Error(s(329))}}}return nc(e,Ye()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=r,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&El))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return nc(e,Ye()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Dl,hc(e,0),oc(e,t),nc(e,Ye()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Bl),nc(e,Ye()),null}function cc(e,t){var r=El;El|=1;try{return e(t)}finally{0===(El=r)&&(ql=Ye()+500,Ua&&qa())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&El)&&_c();var t=El;El|=1;var r=Cl.transition,n=xt;try{if(Cl.transition=null,xt=1,e)return e()}finally{xt=n,Cl.transition=r,0===(6&(El=t))&&qa()}}function uc(){Ol=Rl.current,ka(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Tl)for(r=Tl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ra();break;case 3:Qs(),ka(Pa),ka(Ea),ri();break;case 5:Xs(n);break;case 4:Qs();break;case 13:case 19:ka(Zs);break;case 10:Cs(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Pl=e,Tl=e=Rc(e.current,null),Al=Ol=t,Il=0,Dl=null,Fl=Ml=Ll=0,zl=Ul=null,null!==As){for(t=0;t<As.length;t++)if(null!==(n=(r=As[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}As=null}return e}function mc(e,t){for(;;){var r=Tl;try{if(Ss(),ni.current=Yi,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===r||null===r.return){Il=1,Dl=t,Tl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ps(lo(c,l));break e}}i=c=lo(c,l),4!==Il&&(Il=2),null===Ul?Ul=[i]:Ul.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ws(i,mo(0,c,t));break e;case 1:l=c;var v=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Gl||!Gl.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,Ws(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function pc(){var e=kl.current;return kl.current=Yi,null===e?Yi:e}function fc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Pl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Pl,Al)}function gc(e,t){var r=El;El|=2;var n=pc();for(Pl===e&&Al===t||(Bl=null,hc(e,t));;)try{yc();break}catch(a){mc(e,a)}if(Ss(),El=r,kl.current=n,null!==Tl)throw Error(s(261));return Pl=null,Al=0,Il}function yc(){for(;null!==Tl;)xc(Tl)}function vc(){for(;null!==Tl&&!Je();)xc(Tl)}function xc(e){var t=jl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Sl.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ko(r,t,Ol)))return void(Tl=r)}else{if(null!==(r=$o(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Il=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,r){var n=xt,a=Cl.transition;try{Cl.transition=null,xt=1,function(e,t,r,n){do{_c()}while(null!==$l);if(0!==(6&El))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===Pl&&(Tl=Pl=null,Al=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Pc(tt,function(){return _c(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=xt;xt=1;var l=El;El|=4,Sl.current=null,function(e,t){if(ea=Ht,mn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}f=tl,tl=!1}(e,r),gl(r,e),pn(ta),Ht=!!ea,ta=ea=null,e.current=r,vl(r,e,a),Qe(),El=l,xt=o,Cl.transition=i}else e.current=r;if(Kl&&(Kl=!1,$l=e,Jl=a),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ye()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Jl)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,qa()}(e,t,r,n)}finally{Cl.transition=a,xt=n}return null}function _c(){if(null!==$l){var e=bt(Jl),t=Cl.transition,r=xt;try{if(Cl.transition=null,xt=16>e?16:e,null===$l)var n=!1;else{if(e=$l,$l=null,Jl=0,0!==(6&El))throw Error(s(331));var a=El;for(El|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var m=(u=Xo).sibling,p=u.return;if(sl(u),u===d){Xo=null;break}if(null!==m){m.return=p,Xo=m;break}Xo=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Xo=v;break e}Xo=i.return}}var x=e.current;for(Xo=x;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=x;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(_){Nc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(El=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(_){}n=!0}return n}finally{xt=r,Cl.transition=t}}return!1}function jc(e,t,r){e=Us(e,t=mo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function Nc(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=Us(t,e=po(t,e=lo(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Al&r)===r&&(4===Il||3===Il&&(130023424&Al)===Al&&500>Ye()-Wl?hc(e,0):Fl|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Is(e,t))&&(yt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Sc(e,r)}function Pc(e,t){return Ke(e,t)}function Tc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,n){return new Tc(e,t,r,n)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Dc(r.children,a,i,t);case N:o=8,a|=8;break;case k:return(e=Ac(12,r,t,2|a)).elementType=k,e.lanes=i,e;case P:return(e=Ac(13,r,t,a)).elementType=P,e.lanes=i,e;case T:return(e=Ac(19,r,t,a)).elementType=T,e.lanes=i,e;case R:return Lc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case E:o=11;break e;case A:o=14;break e;case O:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Dc(e,t,r,n){return(e=Ac(7,e,n,t)).lanes=r,e}function Lc(e,t,r,n){return(e=Ac(22,e,n,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Mc(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,n,a,s,i,o,l){return e=new Uc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Wc(e){if(!e)return Ca;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Oa(r))return Da(e,r,t)}return t}function qc(e,t,r,n,a,s,i,o,l){return(e=zc(r,n,!0,e,0,s,0,o,l)).context=Wc(null),r=e.current,(s=Fs(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Us(r,s,a),e.current.lanes=a,yt(e,a,n),nc(e,n),e}function Bc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=Wc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fs(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Us(a,t,i))&&(rc(e,a,i,s),zs(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)xo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return xo=!1,function(e,t,r){switch(t.tag){case 3:Po(t),ms();break;case 5:Ys(t);break;case 1:Oa(t.type)&&La(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Sa(_s,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Sa(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Mo(e,t,r):(Sa(Zs,1&Zs.current),null!==(e=Ho(e,t,r))?e.sibling:null);Sa(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,No(e,t,r)}return Ho(e,t,r)}(e,t,r);xo=0!==(131072&e.flags)}else xo=!1,as&&0!==(1048576&t.flags)&&Za(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bo(e,t),e=t.pendingProps;var a=Aa(t,Ea.current);Ps(t,r),a=fi(null,t,n,e,a,r);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(n)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ls(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Eo(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),bo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(n),e=to(n,e),a){case 0:t=So(null,t,n,e,r);break e;case 1:t=Co(null,t,n,e,r);break e;case 11:t=wo(null,t,n,e,r);break e;case 14:t=_o(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,So(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Co(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Po(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Ms(e,t),qs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=To(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=ws(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ms(),n===a){t=Ho(e,t,r);break e}bo(e,t,n,r)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),ko(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,r);case 4:return Js(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bs(t,null,n,r):bo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,wo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Sa(_s,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Pa.current){t=Ho(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Fs(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Es(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Es(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ps(t,r),n=n(a=Ts(a)),t.flags|=1,bo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),_o(e,t,n,a=to(n.type,a),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Bo(e,t),t.tag=1,Oa(n)?(e=!0,La(t)):e=!1,Ps(t,r),so(t,n,a),oo(t,n,a,r),Eo(null,t,n,!0,e,r);case 19:return qo(e,t,r);case 22:return No(e,t,r)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Hc(i);o.call(e)}}Bc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Hc(i);s.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[pa]=i.current,qn(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pa]=l.current,qn(8===e.nodeType?e.parentNode:e),dc(function(){Bc(t,l,r,n)}),l}(r,t,e,a,n);return Hc(i)}Jc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Bc(null,e,null,null)}),t[pa]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(vt(t,1|r),nc(t,Ye()),0===(6&El)&&(ql=Ye()+500,qa()))}break;case 13:dc(function(){var t=Is(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=Is(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},Nt=function(){return xt},kt=function(e,t){var r=xt;try{return xt=e,t()}finally{xt=r}},_e=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=wa(n);if(!a)throw Error(s(90));K(n),X(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[xa,ba,wa,Se,Ce,cc]},td={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),st=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var r=!1,n="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,r,0,n,a),e[pa]=t.current,qn(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,i,o),e[pa]=t.current,qn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Jc(t)},t.render=function(e,t,r){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(374));class s extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const s=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=s},829:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t?"HEAD":"GET";let s=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer","count=".concat(r)),new a.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer","count=".concat(n)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},980:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=n(r(210));t.PostgrestClient=a.default;const s=n(r(829));t.PostgrestQueryBuilder=s.default;const i=n(r(736));t.PostgrestFilterBuilder=i.default;const o=n(r(374));t.PostgrestTransformBuilder=o.default;const l=n(r(286));t.PostgrestBuilder=l.default;const c=n(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=r(43),a=r(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class d extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class u extends d{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class h extends d{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class m extends d{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var p;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(p||(p={}));var f=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class g{constructor(e){let{headers:t={},customFetch:n,region:a=p.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return f(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:s}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL("".concat(this.url,"/").concat(e));let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=s):"string"===typeof s?(i["Content-Type"]="text/plain",c=s):"undefined"!==typeof FormData&&s instanceof FormData?c=s:(i["Content-Type"]="application/json",c=JSON.stringify(s)));const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:c}).catch(e=>{throw new u(e)}),p=d.headers.get("x-relay-error");if(p&&"true"===p)throw new h(d);if(!d.ok)throw new m(d);let f,g=(null!==(r=d.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return f="application/json"===g?yield d.json():"application/octet-stream"===g?yield d.blob():"text/event-stream"===g?d:"multipart/form-data"===g?yield d.formData():yield d.text(),{data:f,error:null,response:d}}catch(n){return{data:null,error:n,response:n instanceof m||n instanceof h?n.context:void 0}}})}}var y=r(980);const{PostgrestClient:v,PostgrestQueryBuilder:x,PostgrestFilterBuilder:b,PostgrestTransformBuilder:w,PostgrestBuilder:_,PostgrestError:j}=y;const N=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(e," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(e," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},k="realtime-js/".concat("2.15.4"),S=1e4;var C,E,P,T,A,O;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(C||(C={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(E||(E={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(P||(P={})),function(e){e.websocket="websocket"}(T||(T={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(A||(A={}));class R{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=r.decode(e.slice(s,s+n));s+=n;const o=r.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class I{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(O||(O={}));const D=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,a)=>(r[a]=L(a,e,t,n),r),{})},L=(e,t,r,n)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,i=r[e];return s&&!n.includes(s)?M(s,i):F(i)},M=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return q(t,r)}switch(e){case O.bool:return U(t);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return z(t);case O.json:case O.jsonb:return W(t);case O.timestamp:return B(t);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:default:return F(t)}},F=e=>e,U=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},z=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},W=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},q=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(a){n=s?s.split(","):[]}return n.map(e=>M(t,e))}return e},B=e=>"string"===typeof e?e.replace(" ","T"):e,H=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class V{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var G,K,$,J;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(G||(G={}));class Q{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Q.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=Q.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Q.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(K||(K={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}($||($={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(J||(J={}));class Y{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=E.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new V(this,P.join,this.params,this.timeout),this.rejoinTimer=new I(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=E.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=E.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this._on(P.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Q(this),this.broadcastEndpointURL=H(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==E.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[$.PRESENCE]&&this.bindings[$.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},u={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(J.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(J.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=t[n],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=r&&r[n];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=E.errored,void(null===e||void 0===e||e(J.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(J.SUBSCRIBED))}null===e||void 0===e||e(J.SUBSCRIBED)}).receive("error",t=>{this.state=E.errored,null===e||void 0===e||e(J.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(J.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===E.joined&&e===$.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=E.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(P.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new V(this,P.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=E.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new V(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=P;if(r&&[i,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(d,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,n,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:s}=e,i={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:s};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===E.closed}_isJoined(){return this.state===E.joined}_isJoining(){return this.state===E.joining}_isLeaving(){return this.state===E.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&Y.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(P.close,{},e)}_onError(e){this._on(P.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=E.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=D(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=D(e.columns,e.old_record)),t}}const X=()=>{},Z=25e3,ee=10,te=100,re=[1e3,2e3,5e3,1e4];class ne{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=S,this.transport=null,this.heartbeatIntervalMs=Z,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=X,this.ref=0,this.reconnectTimer=null,this.logger=X,this.conn=null,this.sendBuffer=[],this.serializer=new R,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(T.websocket),this.httpEndpoint=H(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=N.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case C.connecting:return A.Connecting;case C.open:return A.Open;case C.closing:return A.Closing;default:return A.Closed}}isConnected(){return this.connectionState()===A.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new Y("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(a,")"),n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},te)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,s=a?"(".concat(a,")"):"",i=n.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(r," ").concat(s).trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(P.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:k};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(P.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error","error in ".concat(e," callback"),n)}})}catch(r){this.log("error","error triggering ".concat(e," callbacks"),r)}}_setupReconnectionTimer(){this.reconnectTimer=new I(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ee)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,s,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:S,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:Z,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:X,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>re[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class ae extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function se(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ie extends ae{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oe extends ae{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var le=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const ce=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},de=e=>{if(Array.isArray(e))return e.map(e=>de(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=de(n)}),t};var ue=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const he=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),me=(e,t,n)=>ue(void 0,void 0,void 0,function*(){const a=yield le(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof a&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||n+"";t(new ie(he(r),n,a))}).catch(e=>{t(new oe(he(e),e))}):t(new oe(he(e),e))}),pe=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function fe(e,t,r,n,a,s){return ue(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,pe(t,n,a,s)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>me(e,o,n))})})}function ge(e,t,r,n){return ue(this,void 0,void 0,function*(){return fe(e,"GET",t,r,n)})}function ye(e,t,r,n,a){return ue(this,void 0,void 0,function*(){return fe(e,"POST",t,n,a,r)})}function ve(e,t,r,n,a){return ue(this,void 0,void 0,function*(){return fe(e,"PUT",t,n,a,r)})}function xe(e,t,r,n,a){return ue(this,void 0,void 0,function*(){return fe(e,"DELETE",t,n,a,r)})}var be=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const we={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_e={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=ce(n)}uploadOrUpdate(e,t,r,n){return be(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},_e),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=r,i["cache-control"]="max-age=".concat(s.cacheControl),i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===n||void 0===n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?ve:ye)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:i},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(se(a))return{data:null,error:a};throw a}})}upload(e,t,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return be(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+"/object/upload/sign/".concat(s));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:_e.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield ve(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(se(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield ye(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:n}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new ae("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}update(e,t,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return be(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}copy(e,t,r){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield ye(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield ye(this.fetch,"".concat(this.url,"/object/sign/").concat(n),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(s))},{data:a,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return be(this,void 0,void 0,function*(){try{const n=yield ye(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}download(e,t){return be(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=n?"?".concat(n):"";try{const t=this._getFinalPath(e),n=yield ge(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(t).concat(a),{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}info(e){return be(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield ge(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:de(e),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}exists(e){return be(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return ue(this,void 0,void 0,function*(){return fe(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if(se(r)&&r instanceof oe){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&n.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(r).concat(o))}}}remove(e){return be(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}list(e,t,r){return be(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},we),t),{prefix:e||""});return{data:yield ye(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),n,{headers:this.headers},r),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}listV2(e,t){return be(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ye(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),r,{headers:this.headers},t),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const Ne={"X-Client-Info":"storage-js/".concat("2.11.0")};var ke=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Se{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const a=new URL(e);if(null===n||void 0===n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},Ne),t),this.fetch=ce(r)}listBuckets(){return ke(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(se(e))return{data:null,error:e};throw e}})}getBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ke(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ke(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}}class Ce extends Se{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new je(this.url,this.headers,e,this.fetch)}}let Ee="";Ee="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Pe={headers:{"X-Client-Info":"supabase-js-".concat(Ee,"/").concat("2.56.1")}},Te={schema:"public"},Ae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Oe={};var Re=r(630),Ie=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const De=e=>{let t;return t=e||("undefined"===typeof fetch?Re.default:fetch),function(){return t(...arguments)}},Le=(e,t,r)=>{const n=De(r),a="undefined"===typeof Headers?Re.Headers:Headers;return(r,s)=>Ie(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),n(r,Object.assign(Object.assign({},s),{headers:l}))})};var Me=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Fe="2.71.1",Ue=3e4,ze=9e4,We={"X-Client-Info":"gotrue-js/".concat(Fe)},qe="X-Supabase-Api-Version",Be={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},He=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ve extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ge(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ke extends Ve{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class $e extends Ve{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Je extends Ve{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class Qe extends Je{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ye extends Je{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xe extends Je{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ze extends Je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class et extends Je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tt extends Je{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function rt(e){return Ge(e)&&"AuthRetryableFetchError"===e.name}class nt extends Je{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class at extends Je{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),it=" \t\n\r=".split(""),ot=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<it.length;t+=1)e[it[t].charCodeAt(0)]=-2;for(let t=0;t<st.length;t+=1)e[st[t].charCodeAt(0)]=t;return e})();function lt(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(st[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(st[e]),t.queuedBits-=6}}function ct(e,t,r){const n=ot[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function dt(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)ct(e.charCodeAt(i),a,s);return t.join("")}function ut(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function ht(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}ut(n,t)}}function mt(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)ct(e.charCodeAt(a),r,n);return new Uint8Array(t)}function pt(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>lt(e,r,n)),lt(null,r,n),t.join("")}const ft=()=>"undefined"!==typeof window&&"undefined"!==typeof document,gt={tested:!1,writable:!1},yt=()=>{if(!ft())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(gt.tested)return gt.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gt.tested=!0,gt.writable=!0}catch(t){gt.tested=!0,gt.writable=!1}return gt.writable};const vt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},xt=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},bt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},wt=async(e,t)=>{await e.removeItem(t)};class _t{constructor(){this.promise=new _t.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function jt(e){const t=e.split(".");if(3!==t.length)throw new at("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!He.test(t[r]))throw new at("JWT not in base64url format");return{header:JSON.parse(dt(t[0])),payload:JSON.parse(dt(t[1])),signature:mt(t[2]),raw:{header:t[0],payload:t[1]}}}function Nt(e){return("0"+e.toString(16)).substr(-2)}async function kt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function St(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,Nt).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await xt(e,"".concat(t,"-code-verifier"),a);const s=await kt(n);return[s,n===s?"plain":"s256"]}_t.promiseConstructor=Promise;const Ct=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Et=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pt(e){if(!Et.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function At(e){return JSON.parse(JSON.stringify(e))}var Ot=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};const Rt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),It=[502,503,504];async function Dt(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new tt(Rt(e),0);if(It.includes(e.status))throw new tt(Rt(e),e.status);let n,a;try{n=await e.json()}catch(i){throw new $e(Rt(i),i)}const s=function(e){const t=e.headers.get(qe);if(!t)return null;if(!t.match(Ct))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(s&&s.getTime()>=Be.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?a=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new nt(Rt(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Qe}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new nt(Rt(n),e.status,n.weak_password.reasons);throw new Ke(Rt(n),e.status||500,a)}async function Lt(e,t,r,n){var a;const s=Object.assign({},null===n||void 0===n?void 0:n.headers);s[qe]||(s[qe]=Be.name),(null===n||void 0===n?void 0:n.jwt)&&(s.Authorization="Bearer ".concat(n.jwt));const i=null!==(a=null===n||void 0===n?void 0:n.query)&&void 0!==a?a:{};(null===n||void 0===n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,a,s){const i=((e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,s);let o;try{o=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new tt(Rt(l),0)}o.ok||await Dt(o);if(null===n||void 0===n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(l){await Dt(l)}}(e,t,r+o,{headers:s,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Mt(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ft(e){const t=Mt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ut(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function zt(e){return{data:e,error:null}}function Wt(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,i=Ot(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function qt(e){return e}const Bt=["global","local","others"];var Ht=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};class Vt{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=vt(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt[0];if(Bt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Bt.join(", ")));try{return await Lt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Lt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ut})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ht(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await Lt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:Wt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Ge(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Lt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Ut})}catch(t){if(Ge(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Lt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:qt});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Ge(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Pt(e);try{return await Lt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Ut})}catch(t){if(Ge(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Pt(e);try{return await Lt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Ut})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Pt(e);try{return await Lt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Ut})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Pt(e.userId);try{const{data:t,error:r}=await Lt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Ge(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Pt(e.userId),Pt(e.id);try{return{data:await Lt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Ge(t))return{data:null,error:t};throw t}}}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Kt=!!(globalThis&&yt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class $t extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Jt extends $t{}async function Qt(e,t,r){Kt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw Kt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Jt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Kt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Kt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Kt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Yt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:We,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xt(e,t,r){return await r()}const Zt={};class er{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=er.nextInstanceID,er.nextInstanceID+=1,this.instanceID>0&&ft()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Yt),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Vt({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=vt(n.fetch),this.lock=n.lock||Xt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ft()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Qt:this.lock=Xt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:yt()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gt(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Gt(this.memoryStorage)),ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Zt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Zt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Fe,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(n){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ft()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Ge(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ge(t)?{error:t}:{error:new $e("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await Lt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Mt}),{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Ge(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await St(this.storage,this.storageKey)),a=await Lt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Mt})}else{if(!("phone"in e))throw new Xe("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await Lt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null===i||void 0===i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Mt})}}const{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Ge(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await Lt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Ft})}else{if(!("phone"in e))throw new Xe("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await Lt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Ft})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Ye}}catch(t){if(Ge(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,r,n,a,s,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let y;if(ft())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=["".concat(v.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(n=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Lt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:pt(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Mt});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Ye}}catch(f){if(Ge(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await bt(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await Lt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Mt});if(await wt(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Ye}}catch(a){if(Ge(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:s}=e,i=await Lt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Mt}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ye}}catch(t){if(Ge(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,a,s;try{if("email"in e){const{email:n,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await St(this.storage,this.storageKey));const{error:o}=await Lt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await Lt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Xe("You must provide either an email or phone number.")}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:i}=await Lt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Mt});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await St(this.storage,this.storageKey)),await Lt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:zt})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Qe;const{error:n}=await Lt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Ge(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:n,options:a}=e,{error:s}=await Lt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:s,error:i}=await Lt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i}}throw new Xe("You must provide either an email or phone number and a type")}catch(t){if(Ge(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await bt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<ze;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await bt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=Tt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Lt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Ut}):await this._useSession(async e=>{var t,r,n;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Lt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Ut}):{data:{user:null},error:new Qe}})}catch(t){if(Ge(t))return function(e){return Ge(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await wt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new Qe;const s=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await St(this.storage,this.storageKey));const{data:l,error:c}=await Lt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:Ut});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qe;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:s}=jt(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Ge(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Qe;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ge(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ft())throw new Ze("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ze(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new et("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ze("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new et("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!s||!l)throw new Ze("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Ue&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(a);if(f)throw f;const g={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(Ge(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await bt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return{error:a};const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Ge(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await wt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await St(this.storage,this.storageKey,!0));try{return await Lt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Ge(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Lt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return ft()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(Ge(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)throw s;return await Lt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Ge(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Lt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Mt})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&rt(t)&&Date.now()+r-a<Ue},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!n(s,null,t))return void e(t)}catch(a){if(!n(s,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),Ge(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ft()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await bt(this.storage,this.storageKey);if(a&&this.userStorage){let t=await bt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await xt(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:Tt()}else if(a&&!a.user&&!a.user){const e=await bt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await wt(this.storage,this.storageKey+"-user"),await xt(this.storage,this.storageKey,a)):a.user=Tt()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<ze;if(this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(ze,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),rt(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new _t;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Qe;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),Ge(a)){const e={session:null,error:a};return rt(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(a){n.push(a)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await xt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=At(e);await xt(this.storage,this.storageKey,n)}else{const e=At(t);await xt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await wt(this.storage,this.storageKey),await wt(this.storage,this.storageKey+"-code-verifier"),await wt(this.storage,this.storageKey+"-user"),this.userStorage&&await wt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ft()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ue);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-t)/Ue);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(Ue,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof $t))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ft()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&n.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await St(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?{data:null,error:a}:await Lt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Ge(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Lt(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null===o||void 0===o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Ge(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:i}=await Lt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})})}catch(t){if(Ge(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?{data:null,error:a}:await Lt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Ge(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=jt(n.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:n,error:a}=await Lt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:a,signature:s,raw:{header:i,payload:o}}=jt(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,s,function(e){const t=[];return ht(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new at("Invalid JWT signature");return{data:{claims:a,header:n,signature:s},error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}}}er.nextInstanceID=0;const tr=er;class rr extends tr{constructor(e){super(e)}}var nr=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class ar{constructor(e,t,r){var n,a,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),d=function(e,t){var r,n;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(n=null===o||void 0===o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:()=>Me(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:Te,realtime:Oe,auth:Object.assign(Object.assign({},Ae),{storageKey:c}),global:Pe});this.storageKey=null!==(n=d.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(s=d.auth)&&void 0!==s?s:{},this.headers,d.global.fetch),this.fetch=Le(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new v(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Ce(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new g(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return nr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,storageKey:o,flowType:l,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new rr({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:i,flowType:l,lock:c,debug:d,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ne(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sr=((e,t,r)=>new ar(e,t,r))("https://hwpjrkmplydqaxiikupv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh3cGpya21wbHlkcWF4aWlrdXB2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1MTUwNjgsImV4cCI6MjA3MTA5MTA2OH0.6xnC3k_CRChyavAfdJT0I4NLN_Wv1ZgIlRO0Jnqckkk"),ir=()=>{const[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!0),[s,i]=(0,n.useState)("normal"),[o,l]=(0,n.useState)(null),c=(0,n.useCallback)(()=>{const e=new URLSearchParams(window.location.hash.substring(1));return"recovery"===e.get("type")&&e.get("access_token")},[]),d=(0,n.useCallback)(async e=>{const r=new Promise((e,t)=>{setTimeout(()=>t(new Error("Profile query timeout")),2e3)}),n=sr.from("profiles").select("*").eq("id",e).single();try{const e=await Promise.race([n,r]),{data:a,error:s}=e;return s?(console.error("\u274c Profile error:",s),s.code,null):(t(a),a)}catch(o){return"Profile query timeout"===o.message?(console.error("\ud83d\udca5 Profile query timed out - database connection issue"),{id:e,name:"Loading...",email:"loading@example.com",status:"approved",role:"player"}):(console.error("\ud83d\udca5 Error loading profile:",o),null)}},[]),u=(0,n.useCallback)(async(e,t)=>{a(!0),l(null);try{const{data:r,error:n}=await sr.auth.signInWithPassword({email:e,password:t});if(n)return console.error("\u274c Login error:",n),l(n),{success:!1,error:n};return{success:!0,user:await d(r.user.id)}}catch(o){return console.error("\ud83d\udca5 Unexpected error:",o),l(o),{success:!1,error:o}}finally{a(!1)}},[d]),h=(0,n.useCallback)(async(e,t,r)=>{a(!0),l(null);try{const{data:n,error:a}=await sr.auth.signUp({email:e,password:t,options:{data:{name:r}}});return a?(console.error("\u274c Registration error:",a),l(a),{success:!1,error:a}):{success:!0,needsApproval:!0}}catch(o){return console.error("\ud83d\udca5 Unexpected error:",o),l(o),{success:!1,error:o}}finally{a(!1)}},[]),m=(0,n.useCallback)(async()=>{a(!0);try{const{error:e}=await sr.auth.signOut();if(e)throw console.error("\u274c Supabase signout error:",e),e;return t(null),i("normal"),l(null),{success:!0}}catch(o){return console.error("\u274c Error signing out:",o),l(o),{success:!1,error:o}}finally{a(!1)}},[]),p=(0,n.useCallback)(async e=>{a(!0),l(null);try{const{data:t,error:r}=await sr.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});return r?(console.error("\u274c Password reset error:",r),l(r),{success:!1,error:r}):{success:!0}}catch(o){return console.error("\ud83d\udca5 Unexpected error:",o),l(o),{success:!1,error:o}}finally{a(!1)}},[]),f=(0,n.useCallback)(async e=>{a(!0),l(null);try{const{data:t,error:r}=await sr.auth.updateUser({password:e});return r?(console.error("\u274c Password update error:",r),l(r),{success:!1,error:r}):(await sr.auth.signOut(),i("normal"),window.location.hash&&window.history.replaceState({},document.title,window.location.pathname),{success:!0})}catch(o){return console.error("\ud83d\udca5 Unexpected error:",o),l(o),{success:!1,error:o}}finally{a(!1)}},[]);return(0,n.useEffect)(()=>{let e=!0;const r=setTimeout(()=>{e&&a(!1)},5e3);return(async()=>{try{if(c())return void(e&&(i("reset"),a(!1)));const{data:{session:s},error:o}=await sr.auth.getSession();if(!e)return;if(o)return console.error("\u274c Session error:",o),l(o),void a(!1);if(null!==s&&void 0!==s&&s.user){let a=await d(s.user.id);if(!e)return;var r,n;if(!a)a={id:s.user.id,name:(null===(r=s.user.user_metadata)||void 0===r?void 0:r.name)||(null===(n=s.user.email)||void 0===n?void 0:n.split("@")[0])||"User",email:s.user.email,status:"approved",role:"player"},t(a),setTimeout(async()=>{try{const{error:e}=await sr.from("profiles").upsert({id:s.user.id,name:a.name,email:a.email,status:"approved",role:"player"});e&&console.warn("\u26a0\ufe0f Background profile sync failed:",e)}catch(e){console.warn("\u26a0\ufe0f Background sync error:",e)}},1e3)}}catch(o){console.error("\ud83d\udca5 Auth initialization failed:",o),e&&l(o)}finally{e&&a(!1)}})().finally(()=>{clearTimeout(r)}),()=>{e=!1,clearTimeout(r)}},[c,d]),(0,n.useEffect)(()=>{const{data:{subscription:r}}=sr.auth.onAuthStateChange(async(r,n)=>{switch(r){case"SIGNED_IN":!n||c()||e||await d(n.user.id);break;case"SIGNED_OUT":t(null),i("normal");break;case"PASSWORD_RECOVERY":i("reset"),t(null)}});return()=>r.unsubscribe()},[c,d,e]),{user:e,loading:r,authMode:s,error:o,actions:{signIn:u,signUp:h,signOut:m,requestPasswordReset:p,updatePassword:f,setAuthMode:i}}},or=(e,t)=>{const[r,a]=(0,n.useState)({users:[],currentSeason:null,selectedSeason:null,seasonPlayers:[],availability:[],matchFixtures:[],matchResults:[],loading:{initial:!0,users:!1,seasons:!1,availability:!1,fixtures:!1,results:!1},error:null}),s=(0,n.useCallback)((e,t)=>{a(r=>c(c({},r),{},{loading:c(c({},r.loading),{},{[e]:t})}))},[]),i=(0,n.useCallback)((e,t)=>{a(r=>c(c({},r),{},{[e]:t}))},[]),o=(0,n.useCallback)(async()=>{try{await sr.from("seasons").update({status:"completed"}).eq("status","active");const{data:e,error:t}=await sr.from("seasons").insert({name:"Season ".concat((new Date).getFullYear()),start_date:(new Date).toISOString().split("T")[0],status:"active"}).select().single();if(t)throw t;return e}catch(e){return console.error("Error creating season:",e),null}},[]),l=(0,n.useCallback)(async()=>{s("users",!0);try{const{data:e,error:t}=await sr.from("profiles").select("*").order("name",{ascending:!0});if(t)throw t;return i("users",e||[]),e}catch(e){console.error("Error fetching users:",e),i("error",e)}finally{s("users",!1)}},[s,i]),d=(0,n.useCallback)(async e=>{if(!e)return[];s("users",!0);try{const{data:t,error:r}=await sr.from("season_players").select("\n          *,\n          profile:player_id (\n            id,\n            name,\n            email,\n            status,\n            role\n          )\n        ").eq("season_id",e).order("rank",{ascending:!0,nullsLast:!0});if(r)throw r;const n=(null===t||void 0===t?void 0:t.map(e=>c(c({},e.profile),{},{rank:e.rank,matches_played:e.matches_played,matches_won:e.matches_won,games_played:e.games_played,games_won:e.games_won,previous_rank:e.previous_rank,in_ladder:!0,season_player_id:e.id})))||[];return i("seasonPlayers",n),n}catch(t){return console.error("Error fetching season players:",t),i("error",t),[]}finally{s("users",!1)}},[s,i]),u=(0,n.useCallback)(async e=>{if(!e)return null;s("seasons",!0);try{const{data:t,error:r}=await sr.from("seasons").select("*").eq("id",e).single();if(r)throw r;const{data:n}=await sr.from("matches").select("*").eq("season_id",e).order("week_number",{ascending:!0}),a=c(c({},t),{},{matches:n||[]});return i("selectedSeason",a),a}catch(t){return console.error("Error fetching selected season data:",t),i("error",t),null}finally{s("seasons",!1)}},[s,i]),h=(0,n.useCallback)(async()=>{s("seasons",!0);try{const{data:e,error:t}=await sr.from("seasons").select("*").eq("status","active").limit(1);if(t)throw t;let r=null===e||void 0===e?void 0:e[0];if(!r&&(r=await o(),!r))return;return i("currentSeason",r),r}catch(e){console.error("Error fetching seasons:",e),i("error",e)}finally{s("seasons",!1)}},[s,i,o]),m=(0,n.useCallback)(async()=>{s("availability",!0);try{const{data:e,error:t}=await sr.from("availability").select("*");if(t)throw t;return i("availability",e||[]),e}catch(e){console.error("Error fetching availability:",e)}finally{s("availability",!1)}},[s,i]),p=(0,n.useCallback)(async()=>{s("fixtures",!0);try{const{data:e,error:t}=await sr.from("match_fixtures").select("\n          *,\n          player1:player1_id(name),\n          player2:player2_id(name),\n          player3:player3_id(name),\n          player4:player4_id(name),\n          sitting_player:sitting_player_id(name)\n        ");if(t)throw t;return i("matchFixtures",e||[]),e}catch(e){console.error("Error fetching fixtures:",e)}finally{s("fixtures",!1)}},[s,i]),f=(0,n.useCallback)(async()=>{s("results",!0);try{const{data:e,error:t}=await sr.from("match_results").select("*");if(t)throw t;return i("matchResults",e||[]),e}catch(e){console.error("Error fetching results:",e)}finally{s("results",!1)}},[s,i]),g=(0,n.useCallback)(async e=>{try{const{error:t}=await sr.from("profiles").update({status:"approved"}).eq("id",e);if(t)throw t;return await l(),{success:!0}}catch(t){return console.error("Error approving user:",t),{success:!1,error:t}}},[l]),y=(0,n.useCallback)(async(e,t)=>{try{const{error:r}=await sr.from("profiles").update({role:t}).eq("id",e);if(r)throw r;return await l(),{success:!0}}catch(r){return console.error("Error updating user role:",r),{success:!1,error:r}}},[l]),v=(0,n.useCallback)(async(e,r)=>{if(!t)return console.error("No selectedSeasonId provided"),alert("No season selected to add player to"),{success:!1};try{const{data:n}=await sr.from("season_players").select("id").eq("season_id",t).eq("player_id",e).maybeSingle();if(n)return alert("Player already in this season"),{success:!1};const{error:a}=await sr.from("season_players").insert({season_id:t,player_id:e,rank:parseInt(r)||null});if(a)throw a;return await d(t),await l(),{success:!0}}catch(n){return console.error("Error adding to season:",n),alert("Error: "+n.message),{success:!1,error:n}}},[t,d,l]),x=(0,n.useCallback)(async(e,t,n)=>{try{var a,s,i,o;const l=(null===(a=r.selectedSeason)||void 0===a||null===(s=a.matches)||void 0===s?void 0:s.find(t=>t.id===e))||(null===(i=r.currentSeason)||void 0===i||null===(o=i.matches)||void 0===o?void 0:o.find(t=>t.id===e));if(!l)throw new Error("Match not found");const c=l.match_date;if(void 0===t)await sr.from("availability").delete().eq("player_id",n).eq("match_date",c);else{const{data:e}=await sr.from("availability").select("*").eq("player_id",n).eq("match_date",c).maybeSingle();e?await sr.from("availability").update({is_available:t}).eq("player_id",n).eq("match_date",c):await sr.from("availability").insert({player_id:n,match_date:c,is_available:t})}return await m(),{success:!0}}catch(l){return console.error("Error setting availability:",l),alert("Error: "+l.message),{success:!1,error:l}}},[r.selectedSeason,r.currentSeason,m]),b=(0,n.useCallback)(async e=>{if(!e)return console.error("No match date provided"),alert("Please select a date for the match"),{success:!1};if(!t)return console.error("No selectedSeasonId provided"),alert("No season selected"),{success:!1};let r;try{const{data:e,error:n}=await sr.from("seasons").select("*").eq("id",t).single();if(n)throw n;r=e}catch(a){return console.error("Error fetching season:",a),alert("Error finding selected season"),{success:!1}}if(!r)return alert("Selected season not found"),{success:!1};try{var n;const{data:a}=await sr.from("matches").select("week_number").eq("season_id",r.id).order("week_number",{ascending:!1}).limit(1),s=((null===a||void 0===a||null===(n=a[0])||void 0===n?void 0:n.week_number)||0)+1,{error:i}=await sr.from("matches").insert({season_id:r.id,week_number:s,match_date:e});if(i)throw i;return await h(),await u(t),window.dispatchEvent(new CustomEvent("refreshSeasonData")),alert("Match created for Week ".concat(s)),{success:!0}}catch(a){return console.error("Error adding match:",a),alert("Error: "+a.message),{success:!1,error:a}}},[t,h,u]),w=(0,n.useCallback)(async e=>{var n,a,s,i,o;const l=(null===(n=r.selectedSeason)||void 0===n||null===(a=n.matches)||void 0===a?void 0:a.find(t=>t.id===e))||(null===(s=r.currentSeason)||void 0===s||null===(i=s.matches)||void 0===i?void 0:i.find(t=>t.id===e));if(!l)return alert("Match not found"),{success:!1};const c=(t===(null===(o=r.currentSeason)||void 0===o?void 0:o.id)?r.seasonPlayers:r.users).filter(e=>{if(!e.in_ladder||"approved"!==e.status)return!1;const t=r.availability.find(t=>t.player_id===e.id&&t.match_date===l.match_date);return!0===(null===t||void 0===t?void 0:t.is_available)}).sort((e,t)=>(e.rank||999)-(t.rank||999)),d=c.length;if(d<4)return alert("Need at least 4 players. Found ".concat(d,".")),{success:!1};if(!(d%4===0)&&!(0===d%5)&&!(9===d)&&!(5===d)){const e=4*Math.ceil(d/4),t=5*Math.ceil(d/5),r=5*Math.floor(d/5),n=[];return d>1&&n.push("\u2022 ".concat(d-1," players")),d>2&&n.push("\u2022 ".concat(d-2," players")),r>=5&&r!==d&&n.push("\u2022 ".concat(r," players")),n.push("\u2022 Wait for ".concat(Math.min(e,t)," players")),alert("Cannot schedule matches for ".concat(d," players.\n\n")+"This would leave ".concat(d%4," player(s) without a proper court rotation.\n")+"Please adjust your player selection.\n\n"+"Options:\n".concat(n.join("\n"),"\n\n")+"Supported formats:\n\u2022 4, 8, 12, 16... players: Full courts (4 each)\n\u2022 5, 10, 15, 20... players: Rotation courts (5 each)\n\u2022 9 players: Special case (4 + 5 courts)"),{success:!1}}const m=[];if(d%4===0)for(let t=0;t<d;t+=4)m.push(c.slice(t,t+4));else if(5===d)m.push(c);else if(9===d)m.push(c.slice(0,4)),m.push(c.slice(4,9));else if(10===d)m.push(c.slice(0,5)),m.push(c.slice(5,10));else{const e=Math.floor(d/4);for(let t=0;t<e;t++)m.push(c.slice(4*t,4*(t+1)));d%4>0&&m.push(c.slice(4*e))}try{const r=[];m.forEach((t,n)=>{const a=n+1;let s=1;if(5===t.length){[{pair1:[0,1],pair2:[2,3],sitting:4},{pair1:[0,2],pair2:[1,4],sitting:3},{pair1:[0,3],pair2:[2,4],sitting:1},{pair1:[0,4],pair2:[1,3],sitting:2},{pair1:[1,2],pair2:[3,4],sitting:0}].forEach(n=>{r.push({match_id:e,court_number:a,game_number:s++,player1_id:t[n.pair1[0]].id,player2_id:t[n.pair1[1]].id,player3_id:t[n.pair2[0]].id,player4_id:t[n.pair2[1]].id,pair1_player1_id:t[n.pair1[0]].id,pair1_player2_id:t[n.pair1[1]].id,pair2_player1_id:t[n.pair2[0]].id,pair2_player2_id:t[n.pair2[1]].id,sitting_player_id:t[n.sitting].id})})}else if(4===t.length){[{pair1:[0,3],pair2:[1,2]},{pair1:[0,2],pair2:[1,3]},{pair1:[0,1],pair2:[2,3]}].forEach(n=>{r.push({match_id:e,court_number:a,game_number:s++,player1_id:t[n.pair1[0]].id,player2_id:t[n.pair1[1]].id,player3_id:t[n.pair2[0]].id,player4_id:t[n.pair2[1]].id,pair1_player1_id:t[n.pair1[0]].id,pair1_player2_id:t[n.pair1[1]].id,pair2_player1_id:t[n.pair2[0]].id,pair2_player2_id:t[n.pair2[1]].id,sitting_player_id:null})})}});const{error:n}=await sr.from("match_fixtures").insert(r);if(n)throw n;return await Promise.all([p(),h(),u(t)]),alert("Matches generated! Created ".concat(m.length," court(s) with ").concat(d," players.")),{success:!0}}catch(f){return console.error("Error generating matches:",f),alert("Error: "+f.message),{success:!1,error:f}}},[r.selectedSeason,r.currentSeason,r.seasonPlayers,r.users,r.availability,t,p,h,u]),_=(0,n.useCallback)(async()=>{try{const{data:e,error:r}=await sr.from("league_match_rubbers").select("\n          *,\n          cawood_player1:cawood_player1_id(id, name),\n          cawood_player2:cawood_player2_id(id, name),\n          match_fixture:match_fixture_id!inner (\n            match:match_id!inner (\n              season_id\n            )\n          )\n        ").eq("match_fixture.match.season_id",t);if(r)throw r;if(!e||0===e.length)return await sr.from("season_players").update({matches_played:0,matches_won:0,games_played:0,games_won:0}).eq("season_id",t),await d(t),alert("Rankings updated successfully (no league matches yet)!"),{success:!0};const n=new Set;e.forEach(e=>{e.cawood_player1_id&&n.add(e.cawood_player1_id),e.cawood_player2_id&&n.add(e.cawood_player2_id)});const{data:a,error:s}=await sr.from("season_players").select("*").eq("season_id",t);if(s)throw s;const i=new Set(a.map(e=>e.player_id)),o=[];if(n.forEach(e=>{i.has(e)||o.push({season_id:t,player_id:e,rank:null,matches_played:0,matches_won:0,games_played:0,games_won:0})}),o.length>0){const{error:e}=await sr.from("season_players").insert(o);if(e)throw e}const{data:l,error:u}=await sr.from("season_players").select("*").eq("season_id",t);if(u)throw u;const h={};l.forEach(e=>{h[e.player_id]=c(c({},e),{},{matches_played:0,matches_won:0,games_played:0,games_won:0,rubbers_played:0})}),e.forEach(e=>{const t=e.cawood_games_won||0,r=e.opponent_games_won||0,n=t+r;if(e.cawood_player1_id&&h[e.cawood_player1_id]){const a=h[e.cawood_player1_id];a.rubbers_played+=1,a.games_played+=n,a.games_won+=t,t>r&&(a.matches_won+=1),a.matches_played+=1}if(e.cawood_player2_id&&h[e.cawood_player2_id]){const a=h[e.cawood_player2_id];a.rubbers_played+=1,a.games_played+=n,a.games_won+=t,t>r&&(a.matches_won+=1),a.matches_played+=1}});const m=Object.values(h).sort((e,t)=>{const r=e.games_played>0?e.games_won/e.games_played:0,n=t.games_played>0?t.games_won/t.games_played:0;return n!==r?n-r:t.games_won!==e.games_won?t.games_won-e.games_won:t.games_played!==e.games_played?t.games_played-e.games_played:0});for(let t=0;t<m.length;t++){const e=m[t],r=t+1;await sr.from("season_players").update({previous_rank:e.rank,rank:r,matches_played:e.matches_played,matches_won:e.matches_won,games_played:e.games_played,games_won:e.games_won}).eq("id",e.id)}return await d(t),alert("League rankings updated successfully!"),{success:!0}}catch(e){return console.error("Error updating league rankings:",e),alert("Error updating league rankings: "+e.message),{success:!1,error:e}}},[t,d]),j=(0,n.useCallback)(async()=>{try{const{data:e,error:r}=await sr.from("match_fixtures").select("\n          id,\n          match:match_id!inner (\n            id,\n            season_id\n          )\n        ").eq("match.season_id",t);if(r)throw r;if(!e||0===e.length)return await sr.from("season_players").update({matches_played:0,matches_won:0,games_played:0,games_won:0}).eq("season_id",t),await d(t),alert("Rankings updated successfully (no matches yet)!"),{success:!0};const n=e.map(e=>e.id),{data:a,error:s}=await sr.from("match_results").select("\n          *,\n          fixture:fixture_id (\n            *,\n            player1:player1_id(id, name),\n            player2:player2_id(id, name),\n            player3:player3_id(id, name),\n            player4:player4_id(id, name)\n          )\n        ").in("fixture_id",n).neq("verified",!1);if(s)throw s;const{data:i,error:o}=await sr.from("season_players").select("*").eq("season_id",t);if(o)throw o;const l={};i.forEach(e=>{l[e.player_id]=c(c({},e),{},{matches_played:0,matches_won:0,games_played:0,games_won:0})}),null===a||void 0===a||a.forEach(e=>{const t=e.fixture;[t.player1,t.player2,t.player3,t.player4].forEach(r=>{if(r&&l[r.id]){const n=l[r.id];n.matches_played+=1,n.games_played+=e.pair1_score+e.pair2_score;const a=t.pair1_player1_id===r.id||t.pair1_player2_id===r.id,s=a?e.pair1_score>e.pair2_score:e.pair2_score>e.pair1_score,i=a?e.pair1_score:e.pair2_score;s&&(n.matches_won+=1),n.games_won+=i}})});const u=Object.values(l).sort((e,t)=>{const r=e.games_played>0?e.games_won/e.games_played:0,n=t.games_played>0?t.games_won/t.games_played:0;return n!==r?n-r:t.matches_won!==e.matches_won?t.matches_won-e.matches_won:0});for(let t=0;t<u.length;t++){const e=u[t],r=t+1;await sr.from("season_players").update({previous_rank:e.rank,rank:r,matches_played:e.matches_played,matches_won:e.matches_won,games_played:e.games_played,games_won:e.games_won}).eq("id",e.id)}return await d(t),alert("Rankings updated successfully!"),{success:!0}}catch(e){return console.error("Error updating ladder rankings:",e),alert("Error updating ladder rankings: "+e.message),{success:!1,error:e}}},[t,d]),N=(0,n.useCallback)(async()=>{if(t)try{const{data:e,error:r}=await sr.from("seasons").select("season_type").eq("id",t).single();if(r)throw r;return"league"===(null===e||void 0===e?void 0:e.season_type)?await _():await j()}catch(e){return console.error("Error updating rankings:",e),alert("Error updating rankings: "+e.message),{success:!1,error:e}}else alert("No season selected for ranking update")},[t,_,j]),k=(0,n.useCallback)(async()=>{try{return await sr.from("score_challenges").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("score_conflicts").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("match_results").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("match_fixtures").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("matches").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("availability").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("season_players").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("seasons").delete().neq("id","00000000-0000-0000-0000-000000000000"),await sr.from("ladder_players").delete().neq("id",0),await sr.from("ladders").delete().neq("id",0),i("currentSeason",null),i("selectedSeason",null),i("seasonPlayers",[]),i("availability",[]),i("matchFixtures",[]),i("matchResults",[]),await Promise.all([l(),h(),m(),p(),f()]),window.dispatchEvent(new CustomEvent("refreshSeasonData")),window.dispatchEvent(new CustomEvent("refreshMatchData")),alert("All season and match data cleared! Users have been preserved."),{success:!0}}catch(e){return console.error("Error clearing data:",e),alert("Error clearing data: "+e.message),{success:!1,error:e}}},[l,h,m,p,f]),S=(0,n.useCallback)(async(e,t)=>{try{const{data:t}=await sr.from("matches").select("id, match_date").eq("season_id",e);if(t&&t.length>0){const e=t.map(e=>e.id),{data:r}=await sr.from("match_fixtures").select("id").in("match_id",e);if(r&&r.length>0){const e=r.map(e=>e.id),{error:t}=await sr.from("score_challenges").delete().in("fixture_id",e);if(t)throw t;const{error:n}=await sr.from("score_conflicts").delete().in("fixture_id",e);if(n)throw n;const{error:a}=await sr.from("match_results").delete().in("fixture_id",e);if(a)throw a}const{error:n}=await sr.from("match_fixtures").delete().in("match_id",e);if(n)throw n;const a=t.map(e=>e.match_date);if(a.length>0){const{error:e}=await sr.from("availability").delete().in("match_date",a);if(e)throw e}const{error:s}=await sr.from("matches").delete().in("id",e);if(s)throw s}const{error:r}=await sr.from("season_players").delete().eq("season_id",e);if(r)throw r;const{error:n}=await sr.from("seasons").delete().eq("id",e);if(n)throw n;return await Promise.all([l(),h(),m(),p(),f()]),window.dispatchEvent(new CustomEvent("refreshSeasonData")),window.dispatchEvent(new CustomEvent("refreshMatchData")),{success:!0}}catch(r){console.error("Error deleting season:",r);const e={message:r.message,details:r.details||r.hint||"No additional details",code:r.code,constraint:r.constraint||"Unknown constraint"};return console.error("Detailed error:",e),{success:!1,error:e}}},[l,h,m,p,f]),C=(0,n.useCallback)(async(e,t,r)=>{try{const{error:r}=await sr.from("season_players").delete().eq("player_id",e);if(r)throw r;const{error:n}=await sr.from("profiles").update({status:"suspended",name:"[Deleted User - ".concat(t.substring(0,3),"***]"),email:"deleted_user_".concat(e.substring(0,8),"@deleted.local")}).eq("id",e);if(n)throw n;const{error:a}=await sr.from("availability").delete().eq("player_id",e).gte("match_date",(new Date).toISOString());if(a)throw a;return await Promise.all([l(),h(),m()]),window.dispatchEvent(new CustomEvent("refreshUserData")),window.dispatchEvent(new CustomEvent("refreshSeasonData")),{success:!0}}catch(n){return console.error("Error deactivating user:",n),{success:!1,error:n}}},[l,h,m]),E=(0,n.useCallback)((e,t)=>{var n,a,s,i;const o=(null===(n=r.selectedSeason)||void 0===n||null===(a=n.matches)||void 0===a?void 0:a.find(e=>e.id===t))||(null===(s=r.currentSeason)||void 0===s||null===(i=s.matches)||void 0===i?void 0:i.find(e=>e.id===t));if(!o)return;const l=r.availability.find(t=>t.player_id===e&&t.match_date===o.match_date);return null===l||void 0===l?void 0:l.is_available},[r.selectedSeason,r.currentSeason,r.availability]),P=(0,n.useCallback)(e=>{var t,n,a,s;const i=(null===(t=r.selectedSeason)||void 0===t||null===(n=t.matches)||void 0===n?void 0:n.find(t=>t.id===e))||(null===(a=r.currentSeason)||void 0===a||null===(s=a.matches)||void 0===s?void 0:s.find(t=>t.id===e));if(!i)return{total:0,available:0,responded:0,pending:0};const o=r.seasonPlayers.length>0?r.seasonPlayers:r.users.filter(e=>e.in_ladder&&"approved"===e.status),l=r.availability.filter(e=>e.match_date===i.match_date&&!0===e.is_available).length,c=r.availability.filter(e=>e.match_date===i.match_date&&(!0===e.is_available||!1===e.is_available)).length;return{total:o.length,available:l,responded:c,pending:o.length-c}},[r.selectedSeason,r.currentSeason,r.seasonPlayers,r.users,r.availability]),T=(0,n.useCallback)(e=>{const t=r.matchResults.filter(t=>t.fixture_id===e);if(0===t.length)return null;if(1===t.length)return t[0];const n=t.find(e=>!0===e.verified);return n||t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))[0]},[r.matchResults]),A=(0,n.useCallback)(e=>r.matchResults.filter(t=>t.fixture_id===e).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),[r.matchResults]);(0,n.useEffect)(()=>{t&&(d(t),u(t))},[t,d,u]),(0,n.useEffect)(()=>{if(!e)return void s("initial",!1);(async()=>{s("initial",!0);const e=setTimeout(()=>{console.warn("App data initialization timeout - forcing loading to false"),s("initial",!1),i("error",new Error("App data loading timeout - please refresh the page"))},25e3);try{await Promise.all([l(),h()]),await Promise.all([m(),p(),f()]),clearTimeout(e)}catch(t){console.error("Error loading initial data:",t),i("error",t),clearTimeout(e)}finally{s("initial",!1)}})()},[e]),(0,n.useEffect)(()=>{const e=()=>{Promise.all([f(),p(),h()])};return window.addEventListener("refreshMatchData",e),()=>window.removeEventListener("refreshMatchData",e)},[f,p,h]);const O=(0,n.useMemo)(()=>({users:l,seasons:h,selectedSeasonData:()=>u(t),availability:m,fixtures:p,results:f,seasonPlayers:()=>d(t),all:()=>Promise.all([l(),h(),m(),p(),f(),t?u(t):Promise.resolve()])}),[l,h,u,t,m,p,f,d]);return c(c({},r),{},{ladderPlayers:r.seasonPlayers,allUsers:r.users,supabase:sr,actions:{approveUser:g,updateUserRole:y,addToLadder:v,setPlayerAvailability:x,addMatchToSeason:b,generateMatches:w,updateRankings:N,clearOldMatches:k,deleteSeason:S,deleteUser:C},helpers:{getPlayerAvailability:E,getAvailabilityStats:P,getMatchScore:T,getMatchScoreHistory:A},refetch:O})},lr=()=>{const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(null),[s,i]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),h=(0,n.useCallback)(async()=>{try{l(!0);const{data:e,error:r}=await sr.from("seasons").select("\n          *,\n          season_players(count),\n          matches(*)\n        ").order("created_at",{ascending:!1});if(r)throw r;const n=(null===e||void 0===e?void 0:e.map(e=>{var t,r,n;return c(c({},e),{},{player_count:(null===(t=e.season_players)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.count)||0,match_count:(null===(n=e.matches)||void 0===n?void 0:n.length)||0,matches:e.matches||[],season_type:e.season_type||"ladder",league_info:e.league_info||{},display_name:e.name+("league"===e.season_type?" (".concat(e.season_type,")"):""),is_league:"league"===e.season_type})}))||[];t(n);const o=n.filter(e=>"active"===e.status),d=o.length>0?o[0]:null;return a(d),!s&&d&&i(d),n}catch(d){return console.error("Error fetching seasons:",d),u(d),[]}finally{l(!1)}},[s]),m=(0,n.useCallback)(async e=>{try{l(!0),e.completeExistingSeason&&r&&"ladder"===e.season_type&&await sr.from("seasons").update({status:"completed",end_date:(new Date).toISOString().split("T")[0]}).eq("id",r.id);const{data:t,error:n}=await sr.from("seasons").insert({name:e.name,start_date:e.start_date,status:"active",season_type:e.season_type||"ladder",league_info:e.league_info||{}}).select().single();if(n)throw n;if(e.carryOverPlayers&&"ladder"===e.season_type&&r){const{data:e,error:n}=await sr.from("season_players").select("*").eq("season_id",r.id).order("rank",{ascending:!0});if(n)throw n;if(e.length>0){const r=e.map(e=>({season_id:t.id,player_id:e.player_id,rank:e.rank,matches_played:0,matches_won:0,games_played:0,games_won:0,previous_rank:null})),{error:n}=await sr.from("season_players").insert(r);if(n)throw n}}return await h(),i(t),{success:!0,season:t}}catch(d){return console.error("Error creating season:",d),u(d),{success:!1,error:d}}finally{l(!1)}},[r,h]),p=(0,n.useCallback)(async e=>{try{l(!0);const{error:t}=await sr.from("seasons").update({status:"completed",end_date:(new Date).toISOString().split("T")[0]}).eq("id",e);if(t)throw t;return await h(),{success:!0}}catch(d){return console.error("Error completing season:",d),u(d),{success:!1,error:d}}finally{l(!1)}},[h]);(0,n.useEffect)(()=>{(async()=>{const e=setTimeout(()=>{console.warn("\u23f0 Season initialization timeout - forcing loading to false"),l(!1),u(new Error("Season loading timeout - please refresh the page"))},8e3);try{await h(),clearTimeout(e)}catch(d){console.error("\ud83d\udca5 Season initialization failed:",d),u(d),clearTimeout(e),l(!1)}})()},[h]),(0,n.useEffect)(()=>{const e=()=>{h()};return window.addEventListener("refreshSeasonData",e),()=>window.removeEventListener("refreshSeasonData",e)},[h]);const f=(0,n.useCallback)(()=>e.filter(e=>"active"===e.status),[e]),g=(0,n.useCallback)(t=>e.filter(e=>e.season_type===t),[e]),y=(0,n.useCallback)(e=>"league"===(null===e||void 0===e?void 0:e.season_type),[]);return{seasons:e,activeSeason:r,selectedSeason:s,loading:o,error:d,activeSeasons:f(),ladderSeasons:g("ladder"),leagueSeasons:g("league"),actions:{createNewSeason:m,completeSeason:p,setSelectedSeason:i,fetchSeasons:h,getActiveSeasons:f,getSeasonsByType:g,isLeagueSeason:y}}},cr=async(e,t,r,n)=>{try{const{data:a,error:s}=await sr.from("match_results").select("*").eq("fixture_id",e).maybeSingle();if(s)throw console.error("\u274c Error checking existing result:",s),new Error("Error checking existing result: ".concat(s.message));if(a){const{error:s}=await sr.from("score_conflicts").insert({fixture_id:e,first_submission_id:a.id,conflicting_submission:{pair1_score:parseInt(t),pair2_score:parseInt(r),submitted_at:(new Date).toISOString()},conflicting_user_id:n});if(s)throw console.error("\u274c Error creating conflict record:",s),new Error("Error creating conflict record: ".concat(s.message));return{conflict:!0,winningScore:a,conflictingScore:{pair1_score:parseInt(t),pair2_score:parseInt(r)}}}const{data:i,error:o}=await sr.from("match_results").insert({fixture_id:e,pair1_score:parseInt(t),pair2_score:parseInt(r),submitted_by:n,verified:!0}).select().single();if(o){if(console.error("\u274c Error inserting result:",o),"23505"===o.code||o.message.includes("duplicate")){const{data:a}=await sr.from("match_results").select("*").eq("fixture_id",e).single();if(a)return await sr.from("score_conflicts").insert({fixture_id:e,first_submission_id:a.id,conflicting_submission:{pair1_score:parseInt(t),pair2_score:parseInt(r),submitted_at:(new Date).toISOString()},conflicting_user_id:n}),{conflict:!0,winningScore:a,conflictingScore:{pair1_score:parseInt(t),pair2_score:parseInt(r)}}}throw new Error("Error inserting result: ".concat(o.message))}return{success:!0,result:i}}catch(a){throw console.error("\ud83d\udca5 Error in submitScoreWithConflictHandling:",a),a}},dr=async e=>{try{const{error:t}=await sr.from("score_challenges").insert({fixture_id:e.fixtureId,original_result_id:e.originalResultId,challenger_id:e.challengerId,challenged_pair1_score:e.challengedPair1Score,challenged_pair2_score:e.challengedPair2Score,challenge_reason:e.reason});if(t)throw console.error("\u274c Error submitting challenge:",t),new Error("Error submitting challenge: ".concat(t.message));return{success:!0}}catch(t){throw console.error("\ud83d\udca5 Error in submitScoreChallenge:",t),t}},ur=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const{data:t,error:r}=await sr.from("score_challenges").select("*").order("created_at",{ascending:!1});if(r)throw new Error("Error fetching challenges: ".concat(r.message));if(!t||0===t.length)return[];const n=[...new Set(t.map(e=>e.fixture_id).filter(Boolean))],a=[...new Set(t.map(e=>e.original_result_id).filter(Boolean))],s=[...new Set([...t.map(e=>e.challenger_id).filter(Boolean),...t.map(e=>e.resolved_by).filter(Boolean)])],{data:i}=await sr.from("match_fixtures").select("\n        *,\n        match:match_id(week_number, match_date, season_id),\n        player1:player1_id(name),\n        player2:player2_id(name),\n        player3:player3_id(name),\n        player4:player4_id(name)\n      ").in("id",n),{data:o}=await sr.from("match_results").select("*").in("id",a),{data:l}=await sr.from("profiles").select("id, name").in("id",s),d=t.map(e=>c(c({},e),{},{fixture:(null===i||void 0===i?void 0:i.find(t=>t.id===e.fixture_id))||null,original_result:(null===o||void 0===o?void 0:o.find(t=>t.id===e.original_result_id))||null,challenger:(null===l||void 0===l?void 0:l.find(t=>t.id===e.challenger_id))||null,resolver:(null===l||void 0===l?void 0:l.find(t=>t.id===e.resolved_by))||null}));return e?d.filter(t=>{var r,n;return(null===(r=t.fixture)||void 0===r||null===(n=r.match)||void 0===n?void 0:n.season_id)===e}):d}catch(t){throw console.error("Error in fetchScoreChallenges:",t),t}},hr=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const{data:t,error:r}=await sr.from("score_conflicts").select("*").order("created_at",{ascending:!1});if(r)throw new Error("Error fetching conflicts: ".concat(r.message));if(!t||0===t.length)return[];const n=[...new Set(t.map(e=>e.fixture_id).filter(Boolean))],a=[...new Set(t.map(e=>e.first_submission_id).filter(Boolean))],s=[...new Set([...t.map(e=>e.conflicting_user_id).filter(Boolean),...t.map(e=>e.resolved_by).filter(Boolean)])],{data:i}=await sr.from("match_fixtures").select("\n        *,\n        match:match_id(week_number, match_date, season_id),\n        player1:player1_id(name),\n        player2:player2_id(name),\n        player3:player3_id(name),\n        player4:player4_id(name)\n      ").in("id",n),{data:o}=await sr.from("match_results").select("*").in("id",a),{data:l}=await sr.from("profiles").select("id, name").in("id",s),d=t.map(e=>c(c({},e),{},{fixture:(null===i||void 0===i?void 0:i.find(t=>t.id===e.fixture_id))||null,first_submission:(null===o||void 0===o?void 0:o.find(t=>t.id===e.first_submission_id))||null,conflicting_user:(null===l||void 0===l?void 0:l.find(t=>t.id===e.conflicting_user_id))||null,resolver:(null===l||void 0===l?void 0:l.find(t=>t.id===e.resolved_by))||null}));return e?d.filter(t=>{var r,n;return(null===(r=t.fixture)||void 0===r||null===(n=r.match)||void 0===n?void 0:n.season_id)===e}):d}catch(t){throw console.error("Error in fetchScoreConflicts:",t),t}};var mr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pr=["color","size","strokeWidth","absoluteStrokeWidth","children"];var fr=(e,t)=>{const r=(0,n.forwardRef)((r,a)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:d}=r,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,pr);return(0,n.createElement)("svg",c(c({ref:a},mr),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:"lucide lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...(Array.isArray(d)?d:[d])||[]]);var h});return r.displayName="".concat(e),r};const gr=fr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var yr=r(579);const vr=e=>{let{onBackToLogin:t}=e;const[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)("");return(0,yr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#5D1F1F] to-[#8B3A3A] flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,yr.jsxs)("div",{className:"text-center mb-6",children:[(0,yr.jsx)("img",{src:"/club-logo.png",alt:"Cawood Tennis Club Logo",className:"w-24 h-24 mx-auto mb-3 rounded-full shadow-md object-contain bg-white p-1",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,yr.jsx)("div",{className:"w-24 h-24 bg-[#5D1F1F] rounded-full mx-auto mb-3 flex items-center justify-center shadow-md",style:{display:"none"},children:(0,yr.jsx)("span",{className:"text-white font-bold text-3xl",children:"C"})}),(0,yr.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Reset Password"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Enter your email to receive a reset link"})]}),o&&(0,yr.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,yr.jsx)("p",{className:"text-green-800 text-sm",children:o})}),c&&(0,yr.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,yr.jsx)("p",{className:"text-red-800 text-sm",children:c})}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),l(""),d("");try{const{data:e,error:t}=await sr.auth.resetPasswordForEmail(r,{redirectTo:"".concat(window.location.origin,"/reset-password")});t?(console.error("Password reset error:",t),d("Password reset failed: ".concat(t.message))):(l("Password reset email sent! Check your inbox and spam folder."),a(""))}catch(t){console.error("Unexpected error during password reset:",t),d("An unexpected error occurred. Please try again.")}finally{i(!1)}},className:"space-y-4",children:[(0,yr.jsx)("input",{type:"email",placeholder:"Email address",value:r,onChange:e=>a(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",required:!0,disabled:s}),(0,yr.jsx)("button",{type:"submit",disabled:s||!r.trim(),className:"w-full bg-[#5D1F1F] text-white py-3 rounded-md hover:bg-[#4A1818] transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Sending Reset Email...":"Send Reset Email"})]}),(0,yr.jsx)("div",{className:"mt-6 text-center",children:(0,yr.jsxs)("button",{onClick:t,className:"flex items-center justify-center space-x-2 text-[#5D1F1F] hover:text-[#4A1818] transition-colors mx-auto",children:[(0,yr.jsx)(gr,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Back to Sign In"})]})})]})})},xr=fr("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),br=fr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wr=e=>{let{onPasswordUpdated:t}=e;const[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{const{data:{session:e},error:t}=await sr.auth.getSession();if(t)return console.error("\u274c Error checking session:",t),void d("Invalid or expired reset link. Please request a new password reset.");e?g(!0):d("Invalid or expired reset link. Please request a new password reset.")}catch(e){console.error("Unexpected error:",e),d("An error occurred. Please try again.")}})()},[]);return(0,yr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#5D1F1F] to-[#8B3A3A] flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,yr.jsxs)("div",{className:"text-center mb-6",children:[(0,yr.jsx)("img",{src:"/club-logo.png",alt:"Cawood Tennis Club Logo",className:"w-24 h-24 mx-auto mb-3 rounded-full shadow-md object-contain bg-white p-1",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,yr.jsx)("div",{className:"w-24 h-24 bg-[#5D1F1F] rounded-full mx-auto mb-3 flex items-center justify-center shadow-md",style:{display:"none"},children:(0,yr.jsx)("span",{className:"text-white font-bold text-3xl",children:"C"})}),(0,yr.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Set New Password"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Enter your new password below"})]}),c&&(0,yr.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,yr.jsx)("p",{className:"text-red-800 text-sm",children:c})}),f?(0,yr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f)if(r===s)if(r.length<6)d("Password must be at least 6 characters long");else{l(!0),d("");try{const{data:e,error:t}=await sr.auth.updateUser({password:r});t?(console.error("\u274c Password update error:",t),d("Failed to update password: ".concat(t.message)),l(!1)):(alert("Password updated successfully! You can now sign in with your new password."),await sr.auth.signOut(),setTimeout(()=>{window.location.href="/",window.location.reload(!0)},100))}catch(t){console.error("Unexpected error:",t),d("An unexpected error occurred. Please try again."),l(!1)}}else d("Passwords do not match");else d("Invalid session. Please request a new password reset.")},className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:u?"text":"password",placeholder:"New Password",value:r,onChange:e=>a(e.target.value),className:"w-full p-3 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",required:!0,disabled:o,minLength:6}),(0,yr.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",tabIndex:-1,children:u?(0,yr.jsx)(xr,{className:"w-5 h-5"}):(0,yr.jsx)(br,{className:"w-5 h-5"})})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:m?"text":"password",placeholder:"Confirm New Password",value:s,onChange:e=>i(e.target.value),className:"w-full p-3 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",required:!0,disabled:o,minLength:6}),(0,yr.jsx)("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",tabIndex:-1,children:m?(0,yr.jsx)(xr,{className:"w-5 h-5"}):(0,yr.jsx)(br,{className:"w-5 h-5"})})]}),(0,yr.jsx)("button",{type:"submit",disabled:o||!r.trim()||!s.trim(),className:"w-full bg-[#5D1F1F] text-white py-3 rounded-md hover:bg-[#4A1818] transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Updating Password...":"Update Password"})]}):(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)("p",{className:"text-gray-600 mb-4",children:"Please check your email for a valid reset link."}),(0,yr.jsx)("button",{onClick:()=>window.location.href="/",className:"text-[#5D1F1F] hover:text-[#4A1818] font-medium",children:"Return to Sign In"})]})]})})},_r=fr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),jr=fr("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Nr=fr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),kr=fr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Sr=fr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Cr=e=>{let{id:t,message:r,type:a,onClose:s}=e;const[i,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=setTimeout(()=>o(!0),10);return()=>clearTimeout(e)},[]);const d=()=>{c(!0),setTimeout(s,300)},u=()=>{switch(a){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";default:return"text-blue-800"}};return(0,yr.jsxs)("div",{className:(()=>{const e="\n      transform transition-all duration-300 ease-in-out\n      ".concat(i&&!l?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n      bg-white rounded-lg shadow-lg border-l-4 p-4 flex items-center space-x-3\n      hover:shadow-xl cursor-pointer\n    "),t={success:"border-green-500 bg-green-50",error:"border-red-500 bg-red-50",warning:"border-yellow-500 bg-yellow-50",info:"border-blue-500 bg-blue-50"};return"".concat(e," ").concat(t[a]||t.info)})(),onClick:d,children:[(()=>{const e="w-5 h-5 flex-shrink-0";switch(a){case"success":return(0,yr.jsx)(_r,{className:"".concat(e," text-green-600")});case"error":return(0,yr.jsx)(jr,{className:"".concat(e," text-red-600")});case"warning":return(0,yr.jsx)(Nr,{className:"".concat(e," text-yellow-600")});default:return(0,yr.jsx)(kr,{className:"".concat(e," text-blue-600")})}})(),(0,yr.jsx)("div",{className:"flex-1 text-sm font-medium ".concat(u()),children:r}),(0,yr.jsx)("button",{onClick:e=>{e.stopPropagation(),d()},className:"p-3 rounded-full hover:bg-gray-100 transition-colors ".concat(u().replace("800","600")," min-h-[44px] min-w-[44px] flex items-center justify-center"),style:{touchAction:"manipulation"},children:(0,yr.jsx)(Sr,{className:"w-5 h-5"})})]})},Er=e=>{let{toasts:t,removeToast:r}=e;return 0===t.length?null:(0,yr.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full",children:t.map(e=>(0,yr.jsx)(Cr,c(c({},e),{},{onClose:()=>r(e.id)}),e.id))})},Pr=(0,n.createContext)(),Tr=()=>{const e=(0,n.useContext)(Pr);if(!e)throw new Error("useAppToast must be used within a ToastProvider");return e},Ar=e=>{let{children:t}=e;const r=(()=>{const[e,t]=(0,n.useState)([]),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;const s=Date.now()+Math.random(),i={id:s,message:e,type:r,duration:n};return t(e=>[...e,i]),n>0&&setTimeout(()=>{a(s)},n),s},a=e=>{t(t=>t.filter(t=>t.id!==e))};return{toasts:e,showToast:r,removeToast:a,success:(e,t)=>r(e,"success",t),error:(e,t)=>r(e,"error",t),warning:(e,t)=>r(e,"warning",t),info:(e,t)=>r(e,"info",t)}})();return(0,yr.jsxs)(Pr.Provider,{value:r,children:[t,(0,yr.jsx)(Er,{toasts:r.toasts,removeToast:r.removeToast})]})},Or=e=>{let{onAuthChange:t,isPasswordReset:r=!1,onPasswordResetComplete:a}=e;const s=Tr(),[i,o]=(0,n.useState)("login"),[l,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)({email:"",password:"",name:""});(0,n.useEffect)(()=>{r&&o("update")},[r]);return"reset"===i?(0,yr.jsx)(vr,{onBackToLogin:()=>o("login")}):"update"===i?(0,yr.jsx)(wr,{onPasswordUpdated:()=>{a?a():o("login")}}):(0,yr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#5D1F1F] to-[#8B3A3A] flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,yr.jsxs)("div",{className:"text-center mb-6",children:[(0,yr.jsx)("img",{src:"/club-logo.png",alt:"Cawood Tennis Club Logo",className:"w-24 h-24 mx-auto mb-3 rounded-full shadow-md object-contain bg-white p-1",onError:e=>{console.error("Logo failed to load"),e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,yr.jsx)("div",{className:"w-24 h-24 bg-[#5D1F1F] rounded-full mx-auto mb-3 flex items-center justify-center shadow-md",style:{display:"none"},children:(0,yr.jsx)("span",{className:"text-white font-bold text-3xl",children:"C"})}),(0,yr.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Cawood Tennis Club"})]}),(0,yr.jsxs)("div",{className:"flex rounded-lg bg-gray-100 p-1 mb-6",children:[(0,yr.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("login"===i?"bg-white text-gray-900 shadow":"text-gray-600"),onClick:()=>o("login"),disabled:l,children:"Sign In"}),(0,yr.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("register"===i?"bg-white text-gray-900 shadow":"text-gray-600"),onClick:()=>o("register"),disabled:l,children:"Sign Up"})]}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{if("login"===i){const{data:e,error:r}=await sr.auth.signInWithPassword({email:u.email,password:u.password});if(r)console.error("\u274c Login error:",r),s.error("Login failed: ".concat(r.message));else{const{data:r}=await sr.from("profiles").select("*").eq("id",e.user.id).single();t(r)}}else if("register"===i){const{data:e,error:t}=await sr.auth.signUp({email:u.email,password:u.password,options:{data:{name:u.name}}});t?(console.error("\u274c Registration error:",t),s.error("Registration failed: ".concat(t.message))):(s.success("Registration successful! Please wait for admin approval."),o("login"),h({email:"",password:"",name:""}))}}catch(r){console.error("\ud83d\udca5 Unexpected error:",r),s.error("An unexpected error occurred. Please try again.")}finally{d(!1)}},className:"space-y-4",children:["register"===i&&(0,yr.jsx)("input",{type:"text",placeholder:"Full Name",value:u.name,onChange:e=>h(c(c({},u),{},{name:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",required:!0,disabled:l}),(0,yr.jsx)("input",{type:"email",placeholder:"Email",value:u.email,onChange:e=>h(c(c({},u),{},{email:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",required:!0,disabled:l}),(0,yr.jsx)("input",{type:"password",placeholder:"Password",value:u.password,onChange:e=>h(c(c({},u),{},{password:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",required:!0,disabled:l}),(0,yr.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-[#5D1F1F] text-white py-3 rounded-md hover:bg-[#4A1818] transition-colors font-medium disabled:opacity-50",children:l?"Loading...":"login"===i?"Sign In":"Sign Up"})]}),"login"===i&&(0,yr.jsx)("div",{className:"mt-4 text-center",children:(0,yr.jsx)("button",{type:"button",onClick:()=>o("reset"),className:"text-[#5D1F1F] hover:text-[#4A1818] text-sm transition-colors",disabled:l,children:"Forgot your password?"})}),(0,yr.jsx)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:"Create an account to get started!"})]})})},Rr=fr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Ir=fr("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Dr=fr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Lr=fr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Mr=fr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fr="light",Ur="medium",zr="heavy",Wr="success",qr="warning",Br="error",Hr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;try{if(!navigator.vibrate&&!window.navigator.vibrate)return!1;if(window.DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission){if(navigator.vibrate){switch(e){case Fr:navigator.vibrate(10);break;case Ur:navigator.vibrate(20);break;case zr:navigator.vibrate(40);break;case Wr:navigator.vibrate([10,50,10]);break;case qr:navigator.vibrate([20,100,20]);break;case Br:navigator.vibrate([50,50,50]);break;default:navigator.vibrate(15)}return!0}}else if(navigator.vibrate){switch(e){case Fr:navigator.vibrate(25);break;case Ur:navigator.vibrate(50);break;case zr:navigator.vibrate(75);break;case Wr:navigator.vibrate([25,25,25]);break;case qr:navigator.vibrate([50,50,50]);break;case Br:navigator.vibrate([100,50,100]);break;default:navigator.vibrate(30)}return!0}}catch(t){console.warn("Haptic feedback not supported or failed:",t)}return!1},Vr={tap:()=>Hr(Fr),click:()=>Hr(Ur),impact:()=>Hr(zr),success:()=>Hr(Wr),warning:()=>Hr(qr),error:()=>Hr(Br),pattern:e=>{try{if(navigator.vibrate&&Array.isArray(e))return navigator.vibrate(e),!0}catch(t){console.warn("Custom haptic pattern failed:",t)}return!1}},Gr=e=>{let{activeTab:t,setActiveTab:r,currentUser:n,ladderPlayers:a,selectedSeason:s}=e;const i="league"===(null===s||void 0===s?void 0:s.season_type),o=[{id:"ladder",icon:Rr,label:"League",show:!0},{id:"matches",icon:Ir,label:"Matches",show:!0},{id:"profile",icon:Dr,label:"Profile",show:null===a||void 0===a?void 0:a.find(e=>e.id===(null===n||void 0===n?void 0:n.id))},{id:"availability",icon:Lr,label:"Available",show:!i&&(null===a||void 0===a?void 0:a.find(e=>e.id===(null===n||void 0===n?void 0:n.id)))},{id:"admin",icon:Mr,label:"Admin",show:"admin"===(null===n||void 0===n?void 0:n.role)}].filter(e=>e.show);return(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("nav",{className:"hidden sm:block bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,yr.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,yr.jsx)("div",{className:"flex overflow-x-auto scrollbar-hide",children:o.map(e=>{let{id:n,icon:a,label:s}=e;return(0,yr.jsxs)("button",{onClick:()=>{Vr.tap(),r(n)},className:"flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 min-h-[60px] flex items-center ".concat(t===n?"border-[#5D1F1F] text-[#5D1F1F]":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,yr.jsx)(a,{className:"w-5 h-5 mr-2"}),s]},n)})})})}),(0,yr.jsx)("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:(0,yr.jsx)("div",{className:"flex",children:o.map(e=>{let{id:n,icon:a,label:s}=e;return(0,yr.jsxs)("button",{onClick:()=>{Vr.tap(),r(n)},className:"flex-1 flex flex-col items-center justify-center py-2 min-h-[64px] transition-colors ".concat(t===n?"text-[#5D1F1F] bg-red-50":"text-gray-500 hover:text-gray-700 active:bg-gray-100"),style:{touchAction:"manipulation"},children:[(0,yr.jsx)(a,{className:"w-6 h-6 mb-1 ".concat(t===n?"text-[#5D1F1F]":"")}),(0,yr.jsx)("span",{className:"text-xs font-medium ".concat(t===n?"text-[#5D1F1F]":""),children:s}),t===n&&(0,yr.jsx)("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-[#5D1F1F]"})]},n)})})})]})},Kr=fr("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),$r=fr("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Jr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"league"===(null===t||void 0===t?void 0:t.season_type)?function(e){return e.filter(e=>e.in_ladder&&"approved"===e.status).filter(e=>(e.games_played||0)>0).sort((e,t)=>{const r=(e.games_played||0)>0?(e.games_won||0)/(e.games_played||0):0,n=(t.games_played||0)>0?(t.games_won||0)/(t.games_played||0):0;return r!==n?n-r:(e.games_won||0)!==(t.games_won||0)?(t.games_won||0)-(e.games_won||0):(t.games_played||0)-(e.games_played||0)}).map((e,t)=>c(c({},e),{},{rank:t+1,win_percentage:(e.games_played||0)>0?((e.games_won||0)/(e.games_played||0)*100).toFixed(1):"0.0"}))}(e):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=e.filter(e=>e.in_ladder&&"approved"===e.status);return"completed"===(null===t||void 0===t?void 0:t.status)?r.sort((e,t)=>{const r=(e.games_played||0)>0?(e.games_won||0)/(e.games_played||0):0,n=(t.games_played||0)>0?(t.games_won||0)/(t.games_played||0):0;return r!==n?n-r:(e.games_played||0)!==(t.games_played||0)?(t.games_played||0)-(e.games_played||0):(t.games_won||0)-(e.games_won||0)}).map((e,t)=>c(c({},e),{},{rank:t+1})):r.sort((e,t)=>(e.rank||999)-(t.rank||999))}(e,t)},Qr=e=>{if(!e)return{title:"",subtitle:"",badge:""};const t="league"===e.season_type,r=e.league_info||{};return{title:e.name,subtitle:t?"".concat(r.division||"League"," - ").concat(r.external_league_name||"External League"):"Internal Ladder",badge:"league"===e.season_type?"League":"Ladder",badgeColor:"league"===e.season_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}},Yr=e=>{let{currentUser:t,users:r,updateRankings:a,selectedSeason:s,onPlayerSelect:i,supabase:o}=e;const[l,d]=(0,n.useState)("all"),u=Jr(r,s),h="completed"===(null===s||void 0===s?void 0:s.status),m="league"===(null===s||void 0===s?void 0:s.season_type),p=Qr(s),f=e=>{var t;return{rankIcon:1===(t=e.rank)?"\ud83c\udfc6":2===t?"\ud83e\udd48":3===t?"\ud83e\udd49":"#".concat(t),movement:((e,t)=>{if(!e||e===t)return(0,yr.jsx)("span",{className:"text-gray-400 text-xs",children:"-"});if(e>t){const r=e-t;return(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(Kr,{className:"w-4 h-4 text-green-500"}),(0,yr.jsxs)("span",{className:"text-green-600 text-xs font-medium",children:["+",r]})]})}{const r=t-e;return(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)($r,{className:"w-4 h-4 text-red-500"}),(0,yr.jsxs)("span",{className:"text-red-600 text-xs font-medium",children:["-",r]})]})}})(e.previous_rank,e.rank)}},g=e=>e.games_played>0?Math.round(e.games_won/e.games_played*100*10)/10:0,y=()=>{if(null===s||void 0===s||!s.match_fixtures)return[];const e=new Map;s.match_fixtures.forEach(t=>{var r;t.team===l&&(null===(r=t.league_match_rubbers)||void 0===r||r.forEach(t=>{[t.cawood_player1_id,t.cawood_player2_id].forEach(r=>{if(!r)return;if(!e.has(r)){const t=u.find(e=>e.id===r);if(!t)return;e.set(r,c(c({},t),{},{games_played:0,games_won:0,matches_played:0,matches_won:0,team:l}))}const n=e.get(r);null!==t.cawood_games_won&&null!==t.opponent_games_won&&(n.games_played+=t.cawood_games_won+t.opponent_games_won,n.games_won+=t.cawood_games_won,n.matches_played+=1,t.cawood_games_won>t.opponent_games_won&&(n.matches_won+=1))})}))});return Array.from(e.values()).filter(e=>e.games_played>0).sort((e,t)=>{const r=e.games_played>0?e.games_won/e.games_played:0,n=t.games_played>0?t.games_won/t.games_played:0;return r!==n?n-r:e.games_won!==t.games_won?t.games_won-e.games_won:t.games_played-e.games_played}).map((e,t)=>c(c({},e),{},{rank:t+1,win_percentage:e.games_played>0?(e.games_won/e.games_played*100).toFixed(1):"0.0"}))};return(0,yr.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-0",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,yr.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:[p.title," ",m?"League":"Ladder"]}),(0,yr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(p.badgeColor),children:p.badge})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:p.subtitle}),h&&(0,yr.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"\ud83c\udfc6 This season has been completed"})]}),(0,yr.jsxs)("div",{className:"flex items-center gap-4",children:[m&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Team:"}),(0,yr.jsxs)("select",{value:l,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,yr.jsx)("option",{value:"all",children:"All Cawood"}),(0,yr.jsx)("option",{value:"1sts",children:"Cawood 1sts"}),(0,yr.jsx)("option",{value:"2nds",children:"Cawood 2nds"})]})]}),"admin"===(null===t||void 0===t?void 0:t.role)&&!h&&(0,yr.jsx)("button",{onClick:a,className:"bg-[#5D1F1F] text-white px-4 py-2 rounded-md hover:bg-[#4A1818] transition-colors text-sm sm:text-base",children:"Update Rankings"}),"admin"===(null===t||void 0===t?void 0:t.role)&&h&&(0,yr.jsx)("div",{className:"bg-gray-100 text-gray-500 px-4 py-2 rounded-md text-sm sm:text-base",children:"Season Completed"})]})]}),(()=>{const e=m&&"all"!==l?y():u;return 0===e.length?(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center text-gray-500",children:"all"===l?"No players in ".concat(m?"league":"ladder"," yet"):"No players found for ".concat("1sts"===l?"Cawood 1sts":"Cawood 2nds")}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"block sm:hidden space-y-3",children:e.map((e,r)=>{const n=e.id===(null===t||void 0===t?void 0:t.id),a=g(e),{rankIcon:s,movement:o}=f(e);return(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border-2 p-4 ".concat(n?"border-[#5D1F1F] bg-gradient-to-r from-[#5D1F1F]/5 to-[#5D1F1F]/2":"border-gray-100"),children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,yr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yr.jsxs)("div",{className:"text-2xl font-bold ".concat(n?"text-[#5D1F1F]":"text-gray-600"," flex items-center gap-1"),children:[s,(0,yr.jsx)("span",{className:"text-sm",children:o})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("button",{onClick:()=>i&&i(e.id),className:"font-semibold text-left hover:underline transition-colors py-2 px-1 min-h-[44px] flex items-center ".concat(n?"text-[#5D1F1F] hover:text-red-800":"text-gray-900 hover:text-[#5D1F1F]"),style:{touchAction:"manipulation"},children:e.name}),n&&(0,yr.jsx)("div",{className:"text-xs text-[#5D1F1F] font-medium",children:"You"})]})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,yr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,yr.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium",children:m?"Rubbers":"Matches"}),(0,yr.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[e.matches_won||0,"/",e.matches_played||0]})]}),(0,yr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,yr.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium",children:"Games"}),(0,yr.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[e.games_won||0,"/",e.games_played||0]})]}),(0,yr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,yr.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium",children:"Win %"}),(0,yr.jsxs)("div",{className:"text-sm font-semibold ".concat(a>=60?"text-green-600":a>=40?"text-yellow-600":"text-gray-900"),children:[a,"%"]})]})]})]},e.id)})}),(0,yr.jsx)("div",{className:"hidden sm:block bg-white rounded-lg shadow overflow-hidden",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m?"Rubbers":"Matches"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Games"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win %"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,r)=>{const n=e.id===(null===t||void 0===t?void 0:t.id),a=g(e),{rankIcon:s,movement:o}=f(e);return(0,yr.jsxs)("tr",{className:n?"bg-gradient-to-r from-[#5D1F1F]/10 to-[#5D1F1F]/5 border-l-4 border-[#5D1F1F] font-medium":r%2===0?"bg-white":"bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("span",{children:s}),(0,yr.jsx)("span",{className:"text-xs",children:o})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("button",{onClick:()=>i&&i(e.id),className:"text-sm font-medium hover:underline transition-colors text-left py-2 px-1 min-h-[44px] flex items-center ".concat(n?"text-[#5D1F1F] hover:text-red-800":"text-gray-900 hover:text-[#5D1F1F]"),style:{touchAction:"manipulation"},children:[e.name," ",n&&(0,yr.jsx)("span",{className:"text-xs",children:"(You)"})]})}),(0,yr.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.matches_won||0,"/",e.matches_played||0]}),(0,yr.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.games_won||0,"/",e.games_played||0]}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,yr.jsxs)("span",{className:"font-medium ".concat(a>=60?"text-green-600":a>=40?"text-yellow-600":"text-gray-900"),children:[a,"%"]})})]},e.id)})})]})})})]})})()]})},Xr=fr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Zr=fr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),en=e=>{let{match:t,fixture:r,supabase:a}=e;const[s,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{o.length||u()},[]),(0,n.useEffect)(()=>{s&&!o.length&&u()},[s]);const u=async()=>{if(a&&null!==r&&void 0!==r&&r.id){d(!0);try{const{data:e,error:t}=await a.from("league_match_rubbers").select("\n          *,\n          cawood_player1:cawood_player1_id(name),\n          cawood_player2:cawood_player2_id(name),\n          opponent_player1:opponent_player1_id(name),\n          opponent_player2:opponent_player2_id(name)\n        ").eq("match_fixture_id",r.id).order("rubber_number");if(t)throw t;l(e||[])}catch(e){console.error("Error fetching rubber details:",e)}finally{d(!1)}}},h=(e,t)=>e>=7&&e>t?"WIN":t>=7&&t>e?"LOSS":6===e&&6===t?"DRAW":e<7&&t<7?"INCOMPLETE":e>t?"WIN":"LOSS",m=e=>{switch(e){case"WIN":return"text-green-600 bg-green-50";case"LOSS":return"text-red-600 bg-red-50";case"DRAW":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}},p=o.length,f=(()=>{if(!o.length)return{cawoodPoints:0,opponentPoints:0,cawoodGamesTotal:0,opponentGamesTotal:0,teamBonusCawood:0,teamBonusOpponent:0,rubberStats:{wins:0,losses:0,draws:0,incomplete:0}};const e=o.reduce((e,t)=>{const r=h(t.cawood_games_won,t.opponent_games_won);return"WIN"===r?e.rubberStats.wins++:"LOSS"===r?e.rubberStats.losses++:"DRAW"===r?e.rubberStats.draws++:e.rubberStats.incomplete++,"WIN"===r?e.cawoodPoints+=1:"LOSS"===r?e.opponentPoints+=1:"DRAW"===r&&(e.cawoodPoints+=.5,e.opponentPoints+=.5),e.cawoodGamesTotal+=t.cawood_games_won||0,e.opponentGamesTotal+=t.opponent_games_won||0,e},{cawoodPoints:0,opponentPoints:0,cawoodGamesTotal:0,opponentGamesTotal:0,rubberStats:{wins:0,losses:0,draws:0,incomplete:0}});return e.cawoodGamesTotal>54?(e.teamBonusCawood=3,e.teamBonusOpponent=0):e.opponentGamesTotal>54?(e.teamBonusCawood=0,e.teamBonusOpponent=3):54===e.cawoodGamesTotal&&54===e.opponentGamesTotal?(e.teamBonusCawood=1.5,e.teamBonusOpponent=1.5):(e.teamBonusCawood=0,e.teamBonusOpponent=0),e.cawoodPoints+=e.teamBonusCawood,e.opponentPoints+=e.teamBonusOpponent,e})(),g=f.cawoodPoints>f.opponentPoints?"WIN":f.cawoodPoints<f.opponentPoints?"LOSS":"DRAW";return(0,yr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,yr.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>i(!s),children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(Rr,{className:"w-5 h-5 text-blue-600"}),(0,yr.jsxs)("h3",{className:"font-semibold text-gray-900",children:[null===r||void 0===r?void 0:r.opponent_club," vs Cawood ",null===r||void 0===r?void 0:r.team]})]}),p>0&&(0,yr.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(m(g)),children:["WIN"===g?"Cawood Win":"LOSS"===g?"".concat(null===r||void 0===r?void 0:r.opponent_club," Win"):"Draw"," ",f.cawoodPoints,"-",f.opponentPoints]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(Ir,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:(y=t.match_date,new Date(y).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}))})]}),p>0&&(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(Lr,{className:"w-4 h-4"}),(0,yr.jsxs)("span",{children:[p," rubbers played"]})]})]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:s?"Collapse":"View Details"}),(0,yr.jsx)(Zr,{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(s?"rotate-180":"rotate-0")})]})]})}),s&&(0,yr.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:c?(0,yr.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading rubber details..."}):0===o.length?(0,yr.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No rubber details available"}):(0,yr.jsxs)("div",{className:"space-y-3",children:[(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[(0,yr.jsxs)("h4",{className:"font-medium text-gray-900 mb-2 sm:mb-0",children:["Rubber Results (",p," played)"]}),(0,yr.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-3 shadow-sm",children:[(0,yr.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Final Match Score"}),(0,yr.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("div",{className:"font-bold text-lg text-blue-600",children:"Cawood"}),(0,yr.jsx)("div",{className:"text-2xl font-bold",children:f.cawoodPoints})]}),(0,yr.jsx)("div",{className:"text-gray-400",children:"-"}),(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("div",{className:"font-bold text-lg text-red-600",children:null===r||void 0===r?void 0:r.opponent_club}),(0,yr.jsx)("div",{className:"text-2xl font-bold",children:f.opponentPoints})]})]}),(0,yr.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,yr.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Game Totals"}),(0,yr.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,yr.jsxs)("span",{children:["Cawood: ",f.cawoodGamesTotal]}),(0,yr.jsxs)("span",{children:[null===r||void 0===r?void 0:r.opponent_club,": ",f.opponentGamesTotal]})]}),(f.teamBonusCawood>0||f.teamBonusOpponent>0)&&(0,yr.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,yr.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Team Bonus"}),(0,yr.jsxs)("div",{className:"flex justify-between text-sm font-medium",children:[f.teamBonusCawood>0&&(0,yr.jsxs)("span",{className:"text-green-600",children:["+",f.teamBonusCawood," to Cawood"]}),f.teamBonusOpponent>0&&(0,yr.jsxs)("span",{className:"text-green-600",children:["+",f.teamBonusOpponent," to ",null===r||void 0===r?void 0:r.opponent_club]})]})]})]})]})]}),(0,yr.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,yr.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yr.jsx)("thead",{className:"bg-white",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rubber"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cawood Pair"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent Pair"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>{var t,r,n,a;const s=h(e.cawood_games_won,e.opponent_games_won);return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:["#",e.rubber_number]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-700",children:[null===(t=e.cawood_player1)||void 0===t?void 0:t.name," & ",null===(r=e.cawood_player2)||void 0===r?void 0:r.name]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-700",children:[null===(n=e.opponent_player1)||void 0===n?void 0:n.name," & ",null===(a=e.opponent_player2)||void 0===a?void 0:a.name]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm font-mono text-gray-900",children:[e.cawood_games_won,"-",e.opponent_games_won]}),(0,yr.jsx)("td",{className:"px-4 py-2",children:(0,yr.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(m(s)),children:"WIN"===s?"WON":"LOSS"===s?"LOST":"DRAW"===s?"DRAWN":"INCOMPLETE"})})]},e.id)})})]})}),(0,yr.jsx)("div",{className:"md:hidden space-y-3",children:o.map(e=>{var t,r,n,a;const s=h(e.cawood_games_won,e.opponent_games_won);return(0,yr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yr.jsxs)("span",{className:"font-medium text-gray-900",children:["Rubber #",e.rubber_number]}),(0,yr.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(m(s)),children:"WIN"===s?"WON":"LOSS"===s?"LOST":"DRAW"===s?"DRAWN":"INCOMPLETE"})]}),(0,yr.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"text-gray-500",children:"Cawood:"})," ",(0,yr.jsxs)("span",{className:"text-gray-900",children:[null===(t=e.cawood_player1)||void 0===t?void 0:t.name," & ",null===(r=e.cawood_player2)||void 0===r?void 0:r.name]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"text-gray-500",children:"Opponent:"})," ",(0,yr.jsxs)("span",{className:"text-gray-900",children:[null===(n=e.opponent_player1)||void 0===n?void 0:n.name," & ",null===(a=e.opponent_player2)||void 0===a?void 0:a.name]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"text-gray-500",children:"Score:"})," ",(0,yr.jsxs)("span",{className:"font-mono text-gray-900",children:[e.cawood_games_won,"-",e.opponent_games_won]})]})]})]},e.id)})})]})})]});var y},tn=e=>{let{currentUser:t,currentSeason:r,selectedSeason:a,setShowScheduleModal:s,matchFixtures:i,matchResults:o,availability:l,users:d,generateMatches:u,openScoreModal:h,getAvailabilityStats:m,getMatchScore:p,supabase:f,refetch:g}=e;const[y,v]=(0,n.useState)({}),[x,b]=(0,n.useState)("all");(0,n.useEffect)(()=>{(async()=>{try{null!==g&&void 0!==g&&g.fixtures&&await g.fixtures(),null!==g&&void 0!==g&&g.results&&await g.results(),null!==g&&void 0!==g&&g.selectedSeasonData&&await g.selectedSeasonData(),null!==g&&void 0!==g&&g.availability&&await g.availability()}catch(e){console.error("Error refreshing match data:",e)}})()},[null===a||void 0===a?void 0:a.id]);const w=e=>i.filter(t=>t.match_id===e).some(e=>"league"===e.match_type),_=e=>i.find(t=>t.match_id===e&&"league"===t.match_type),j="completed"===(null===a||void 0===a?void 0:a.status),N=null!==r&&void 0!==r&&r.matches?r.matches.filter(e=>{if(!w(e.id))return"all"===x||"ladder"===x;if("all"===x)return!0;const t=_(e.id);return(null===t||void 0===t?void 0:t.team)===x}):[];return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[(null===a||void 0===a?void 0:a.name)||"Current"," Match Schedule"]}),j&&(0,yr.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"\ud83c\udfc6 This season has been completed - no modifications allowed"})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-4",children:["league"===(null===a||void 0===a?void 0:a.season_type)&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Team:"}),(0,yr.jsxs)("select",{value:x,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,yr.jsx)("option",{value:"all",children:"All Cawood"}),(0,yr.jsx)("option",{value:"1sts",children:"Cawood 1sts"}),(0,yr.jsx)("option",{value:"2nds",children:"Cawood 2nds"})]})]}),"admin"===(null===t||void 0===t?void 0:t.role)&&!j&&(0,yr.jsxs)("button",{onClick:()=>s(!0),className:"bg-[#5D1F1F] text-white px-4 py-2 rounded-md hover:bg-[#4A1818] transition-colors",children:[(0,yr.jsx)(Xr,{className:"w-4 h-4 inline mr-2"}),"Add Match"]}),"admin"===(null===t||void 0===t?void 0:t.role)&&j&&(0,yr.jsx)("div",{className:"bg-gray-100 text-gray-500 px-4 py-2 rounded-md",children:"Season Completed"})]})]}),N&&0!==N.length?(0,yr.jsx)("div",{className:"space-y-4",children:N.map(e=>{var r;const n=m(e.id),a=(e=>{const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.match_date);if(r.setHours(0,0,0,0),!i.some(t=>t.match_id===e.id))return r<t?"past-no-fixtures":"future-no-fixtures";const n=i.filter(t=>t.match_id===e.id),a=n.filter(e=>o.some(t=>t.fixture_id===e.id)).length;return 0===a?r<t?"past-in-progress":"future-in-progress":a<n.length?"partially-complete":"completed"})(e),s="admin"===(null===t||void 0===t?void 0:t.role),g=(e=>{const t=i.filter(t=>t.match_id===e),r={};return t.forEach(e=>{r[e.court_number]||(r[e.court_number]=[]),r[e.court_number].push(e)}),Object.entries(r).map(e=>{let[t,r]=e;return{court:parseInt(t),fixtures:r.sort((e,t)=>e.game_number-t.game_number)}})})(e.id),x="completed"===a||"past-no-fixtures"===a,b=null!==(r=y[e.id])&&void 0!==r?r:!x,N=new Date;N.setHours(0,0,0,0);const k=new Date(e.match_date);if(k.setHours(0,0,0,0),w(e.id)){const t=_(e.id);return(0,yr.jsx)(en,{match:e,fixture:t,supabase:f},e.id)}return(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,yr.jsx)("div",{className:"p-4 sm:p-6 ".concat(g.length>0||"future-no-fixtures"===a?"cursor-pointer hover:bg-gray-50 active:bg-gray-100":""," transition-colors"),onClick:()=>{var t;(g.length>0||"future-no-fixtures"===a)&&(Vr.tap(),t=e.id,v(e=>c(c({},e),{},{[t]:!e[t]})))},children:(0,yr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsxs)("h3",{className:"text-lg font-semibold",children:["Week ",e.week_number]}),(0,yr.jsx)("p",{className:"text-gray-600",children:k.toLocaleDateString("en-GB")}),k.getTime()===N.getTime()&&(0,yr.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:"\ud83d\udcc5 Today"}),"completed"===a&&(0,yr.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"\u2705 Completed"}),"partially-complete"===a&&(0,yr.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"\ud83d\udd04 In Progress"}),"future-in-progress"===a&&(0,yr.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:"\ud83d\udccb Scheduled"}),"past-in-progress"===a&&(0,yr.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded",children:"\u23f0 Enter Scores"})]}),!b&&(0,yr.jsxs)("div",{className:"mt-2 sm:mt-3",children:["future-no-fixtures"===a&&(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:["Availability: ",n.available," available, ",n.pending," pending"]}),g.length>0&&(0,yr.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,yr.jsxs)("span",{children:[g.length," matches"]}),"completed"===a&&(0,yr.jsx)("span",{className:"text-green-600",children:"All scores recorded"}),"partially-complete"===a&&(0,yr.jsx)("span",{className:"text-yellow-600",children:"Some scores pending"}),"past-in-progress"===a&&(0,yr.jsx)("span",{className:"text-orange-600",children:"Scores needed"})]})]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&!j&&"future-no-fixtures"===a&&n.available>=4&&(0,yr.jsxs)("button",{onClick:t=>{t.stopPropagation(),u(e.id)},className:"bg-[#5D1F1F] text-white px-4 py-2 rounded-md hover:bg-[#4A1818] transition-colors text-sm",children:["Generate (",n.available,")"]}),(g.length>0||"future-no-fixtures"===a)&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:b?"Collapse":"Expand"}),(0,yr.jsx)("div",{className:"text-gray-400 p-1 rounded-full bg-gray-100 transition-all duration-200 hover:bg-gray-200",children:(0,yr.jsx)(Zr,{className:"w-5 h-5 transition-transform duration-200 ".concat(b?"rotate-180":"rotate-0")})})]})]})]})}),b&&(0,yr.jsxs)("div",{className:"border-t border-gray-200 p-6 pt-4",children:["future-no-fixtures"===a&&(0,yr.jsx)("div",{className:"mb-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,yr.jsxs)("div",{children:["Availability: ",n.available," available, ",n.pending," pending response"]}),s&&n.available<4&&(0,yr.jsx)("div",{className:"text-red-600 mt-1",children:"Need at least 4 players to generate matches"}),s&&n.available>=4&&(0,yr.jsxs)("div",{className:"text-green-600 mt-1 font-medium",children:["Ready to generate matches! ",k.getTime()===N.getTime()?"(Today's match)":""]})]})}),g.length>0&&(0,yr.jsxs)("div",{className:"space-y-4",children:[s&&"completed"!==a&&(0,yr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,yr.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"\ud83d\udccb Match Details"}),(0,yr.jsxs)("div",{className:"text-sm text-green-700",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("strong",{children:"Available Players:"})," ",d.filter(t=>{if(!t.in_ladder||"approved"!==t.status)return!1;const r=l.find(r=>r.player_id===t.id&&r.match_date===e.match_date);return!0===(null===r||void 0===r?void 0:r.is_available)}).sort((e,t)=>(e.rank||999)-(t.rank||999)).map(e=>"".concat(e.name," (Rank ").concat(e.rank,")")).join(", ")||"None"]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("strong",{children:"Courts Created:"})," ",g.length]})]})]}),g.map(e=>(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,yr.jsxs)("h4",{className:"font-semibold mb-2",children:["Court ",e.court]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Players: ",[...new Set([...e.fixtures.map(e=>{var t;return null===(t=e.player1)||void 0===t?void 0:t.name}),...e.fixtures.map(e=>{var t;return null===(t=e.player2)||void 0===t?void 0:t.name}),...e.fixtures.map(e=>{var t;return null===(t=e.player3)||void 0===t?void 0:t.name}),...e.fixtures.map(e=>{var t;return null===(t=e.player4)||void 0===t?void 0:t.name})].filter(Boolean))].join(", ")]}),(0,yr.jsx)("div",{className:"space-y-2",children:e.fixtures.map(e=>{var r,n,s,i;const o=p(e.id),l=(e=>"admin"===(null===t||void 0===t?void 0:t.role)||e.player1_id===(null===t||void 0===t?void 0:t.id)||e.player2_id===(null===t||void 0===t?void 0:t.id)||e.player3_id===(null===t||void 0===t?void 0:t.id)||e.player4_id===(null===t||void 0===t?void 0:t.id))(e),c=[null===(r=e.player1)||void 0===r?void 0:r.name,null===(n=e.player2)||void 0===n?void 0:n.name].filter(Boolean),d=[null===(s=e.player3)||void 0===s?void 0:s.name,null===(i=e.player4)||void 0===i?void 0:i.name].filter(Boolean);return(0,yr.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("span",{className:"text-sm",children:[c.join(" & ")," vs ",d.join(" & "),e.sitting_player&&" (".concat(e.sitting_player.name," sitting)")]}),o&&(0,yr.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Score: ",o.pair1_score," - ",o.pair2_score]})]}),l&&"future-no-fixtures"!==a&&(0,yr.jsx)("button",{onClick:t=>{t.stopPropagation(),Vr.click(),h({fixtureId:e.id,pair1:c,pair2:d})},className:"text-sm px-4 py-3 rounded transition-colors min-h-[44px] ".concat(o?"bg-blue-600 text-white hover:bg-blue-700":"bg-[#5D1F1F] text-white hover:bg-[#4A1818]"),style:{touchAction:"manipulation"},children:o?"View/Challenge":"Enter Score"}),o&&!l&&(0,yr.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Complete"})]},e.id)})})]},e.court))]}),"past-no-fixtures"===a&&(0,yr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,yr.jsx)("p",{className:"text-yellow-800 text-sm",children:"This match date has passed but no fixtures were generated."})})]})]},e.id)})}):(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,yr.jsx)("p",{className:"text-gray-500",children:"all"===x?"No matches scheduled yet.":"No matches found for ".concat("1sts"===x?"Cawood 1sts":"Cawood 2nds",".")}),"admin"===(null===t||void 0===t?void 0:t.role)&&"all"===x&&(0,yr.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:'Click "Add Match" to create your first match.'})]})]})},rn=fr("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),nn=fr("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),an=fr("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),sn=fr("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),on=fr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ln=fr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),cn=e=>{let{icon:t,title:r,value:n,subtitle:a,color:s}=e;const i={yellow:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 hover:from-yellow-100 hover:to-yellow-200",green:"bg-gradient-to-br from-green-50 to-green-100 border-green-200 hover:from-green-100 hover:to-green-200",blue:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 hover:from-blue-100 hover:to-blue-200",teal:"bg-gradient-to-br from-teal-50 to-teal-100 border-teal-200 hover:from-teal-100 hover:to-teal-200",purple:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 hover:from-purple-100 hover:to-purple-200",orange:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 hover:from-orange-100 hover:to-orange-200",red:"bg-gradient-to-br from-red-50 to-red-100 border-red-200 hover:from-red-100 hover:to-red-200"},o={yellow:"bg-yellow-100",green:"bg-green-100",blue:"bg-blue-100",teal:"bg-teal-100",purple:"bg-purple-100",orange:"bg-orange-100",red:"bg-red-100"};return(0,yr.jsx)("div",{className:"rounded-lg border p-6 transition-all duration-300 hover:shadow-lg hover:scale-105 cursor-pointer ".concat(i[s]||i.blue),children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:r}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:n}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:a})]}),(0,yr.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(o[s]||o.blue),children:t})]})})},dn=e=>{let{data:t}=e;return t&&0!==t.length?(0,yr.jsx)("div",{className:"space-y-4",children:(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map((e,t)=>(0,yr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,yr.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.seasonName||"Season ".concat(t+1)}),(0,yr.jsxs)("div",{className:"mt-2",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"Win Rate"}),(0,yr.jsxs)("span",{className:"font-semibold text-[#5D1F1F]",children:[Math.round(e.winRate),"%"]})]}),(0,yr.jsx)("div",{className:"mt-1 bg-gray-200 rounded-full h-2",children:(0,yr.jsx)("div",{className:"bg-gradient-to-r from-[#5D1F1F] to-red-400 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.winRate/100*100,"%")}})}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.gamesWon,"W - ",e.totalGames-e.gamesWon,"L (",e.totalGames," games)"]})]})]},e.seasonId))})}):(0,yr.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded border-2 border-dashed border-gray-300",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)(sn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,yr.jsx)("p",{className:"text-gray-500",children:"No season data available"}),(0,yr.jsx)("p",{className:"text-sm text-gray-400",children:"Play matches across multiple seasons to see progression"})]})})},un=e=>{let{partners:t,allUsers:r}=e;return(0,yr.jsx)("div",{className:"space-y-3",children:0===t.length?(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)(Lr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,yr.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"No partnership data available"}),(0,yr.jsx)("p",{className:"text-xs text-gray-400",children:"Play matches with different partners to see statistics"})]}):(0,yr.jsxs)("div",{className:"space-y-3",children:[t.slice(0,5).map((e,t)=>{const r=Math.round(100*e.winRate);return(0,yr.jsx)("div",{className:"group hover:bg-gray-50 rounded-lg p-3 transition-colors",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsxs)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-600":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-600"),children:["#",t+1]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:[e.totalGames," games, ",e.matches," matches together"]})]})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[r,"%"]}),(0,yr.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-1.5 mt-1",children:(0,yr.jsx)("div",{className:"bg-green-500 h-1.5 rounded-full transition-all duration-700 ease-out",style:{width:"".concat(r,"%")}})})]})]})},e.playerId)}),t.length>5&&(0,yr.jsx)("div",{className:"text-center pt-2",children:(0,yr.jsxs)("button",{className:"text-sm text-[#5D1F1F] hover:text-red-800 font-medium",children:["View all ",t.length," partners \u2192"]})})]})})},hn=e=>{let{nemesisOpponent:t,nemesisPair:r,allUsers:n}=e;return(0,yr.jsx)("div",{className:"space-y-4",children:t||r?(0,yr.jsxs)(yr.Fragment,{children:[t&&(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,yr.jsx)(on,{className:"w-4 h-4 mr-1 text-red-500"}),"Toughest Opponent"]}),(0,yr.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,yr.jsx)("span",{className:"text-red-600 font-bold text-lg",children:"\u2694\ufe0f"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"font-semibold text-gray-900",children:t.name}),(0,yr.jsx)("div",{className:"text-xs text-gray-600",children:"Your toughest individual opponent"})]})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsxs)("div",{className:"text-xl font-bold text-red-600",children:[Math.round(100*t.winRate),"%"]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-600",children:[t.gamesWon,"W - ",t.gamesLost,"L games (",t.matches," matches)"]}),(0,yr.jsx)("div",{className:"w-16 bg-red-200 rounded-full h-1.5 mt-1",children:(0,yr.jsx)("div",{className:"bg-red-500 h-1.5 rounded-full",style:{width:"".concat(100*t.winRate,"%")}})})]})]})})]}),r&&(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,yr.jsx)(Lr,{className:"w-4 h-4 mr-1 text-red-500"}),"Toughest Pair"]}),(0,yr.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,yr.jsx)("span",{className:"text-red-600 font-bold text-sm",children:"\ud83d\udc65"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("div",{className:"font-semibold text-gray-900",children:[r.player1Name," & ",r.player2Name]}),(0,yr.jsx)("div",{className:"text-xs text-gray-600",children:"Your toughest doubles pair"})]})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsxs)("div",{className:"text-xl font-bold text-red-600",children:[Math.round(100*r.winRate),"%"]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-600",children:[r.gamesWon,"W - ",r.gamesLost,"L games (",r.matches," matches)"]}),(0,yr.jsx)("div",{className:"w-16 bg-red-200 rounded-full h-1.5 mt-1",children:(0,yr.jsx)("div",{className:"bg-red-500 h-1.5 rounded-full",style:{width:"".concat(100*r.winRate,"%")}})})]})]})})]})]}):(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)(rn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,yr.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"No nemesis data available"}),(0,yr.jsx)("p",{className:"text-xs text-gray-400",children:"Play more matches to identify challenging opponents"})]})})},mn=e=>{let{matches:t,allUsers:r}=e;return(0,yr.jsx)("div",{className:"space-y-4",children:0===t.length?(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)(nn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,yr.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"No recent matches"}),(0,yr.jsx)("p",{className:"text-xs text-gray-400",children:"Your recent form will appear here after playing matches"})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-600 mr-3",children:"Recent form:"}),t.map((e,t)=>{var r;return(0,yr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold shadow-sm transition-all duration-300 hover:scale-110 ".concat(e.tie?"bg-gray-500 text-white hover:bg-gray-600":e.won?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),title:"".concat(e.tie?"Drew":e.won?"Won":"Lost"," ").concat(e.score," vs ").concat(null===(r=e.opponentNames)||void 0===r?void 0:r.join(" & ")),children:e.tie?"D":e.won?"W":"L"},t)})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,yr.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>e.won).length}),(0,yr.jsx)("div",{className:"text-sm text-green-700",children:"Recent wins"})]}),(0,yr.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,yr.jsx)(ln,{className:"w-4 h-4 text-green-600"})})]})}),(0,yr.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:t.filter(e=>e.tie).length}),(0,yr.jsx)("div",{className:"text-sm text-gray-700",children:"Recent draws"})]}),(0,yr.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,yr.jsx)("div",{className:"w-4 h-4 bg-gray-600 rounded"})})]})}),(0,yr.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.filter(e=>!e.won&&!e.tie).length}),(0,yr.jsx)("div",{className:"text-sm text-red-700",children:"Recent losses"})]}),(0,yr.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,yr.jsx)(on,{className:"w-4 h-4 text-red-600"})})]})})]}),(0,yr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,yr.jsx)("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Recent Form Analysis"}),(0,yr.jsxs)("div",{className:"text-xs text-blue-700",children:["Last ",t.length," matches: ",Math.round(t.filter(e=>e.won).length/Math.max(t.filter(e=>!e.tie).length,1)*100),"% win rate (excluding draws)"]})]})]})})},pn=e=>{let{matches:t,allUsers:r}=e;return(0,yr.jsx)("div",{className:"space-y-3",children:0===t.length?(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)(Ir,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,yr.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"No match history available"}),(0,yr.jsx)("p",{className:"text-xs text-gray-400",children:"Your match history will appear here as you play"})]}):(0,yr.jsxs)("div",{className:"max-h-96 overflow-y-auto space-y-3 pr-2",children:[t.slice(0,20).map((e,t)=>{var r;return(0,yr.jsx)("div",{className:"border rounded-lg p-4 transition-all duration-200 hover:shadow-md ".concat(e.tie?"border-gray-200 bg-gray-50/30":e.won?"border-green-200 bg-green-50/30":"border-red-200 bg-red-50/30"),children:(0,yr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yr.jsx)("div",{className:"px-3 py-1 text-xs font-bold rounded-full ".concat(e.tie?"bg-gray-500 text-white":e.won?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.tie?"DRAW":e.won?"WIN":"LOSS"}),(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"})}),e.seasonName&&(0,yr.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:e.seasonName})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(Lr,{className:"w-3 h-3 text-gray-400"}),(0,yr.jsx)("span",{className:"text-gray-600",children:"with"}),(0,yr.jsx)("span",{className:"font-medium text-gray-900",children:e.partnerName||"Unknown"})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(rn,{className:"w-3 h-3 text-gray-400"}),(0,yr.jsx)("span",{className:"text-gray-600",children:"vs"}),(0,yr.jsx)("span",{className:"font-medium text-gray-900 truncate",children:(null===(r=e.opponentNames)||void 0===r?void 0:r.join(" & "))||"Unknown opponents"})]})]})]}),(0,yr.jsxs)("div",{className:"text-right ml-4",children:[(0,yr.jsx)("div",{className:"text-xl font-bold ".concat(e.tie?"text-gray-600":e.won?"text-green-600":"text-red-600"),children:e.score}),e.courtNumber&&(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:["Court ",e.courtNumber]})]})]})},t)}),t.length>20&&(0,yr.jsx)("div",{className:"text-center pt-4",children:(0,yr.jsxs)("button",{className:"text-sm text-[#5D1F1F] hover:text-red-800 font-medium",children:["View all ",t.length," matches \u2192"]})})]})})},fn=e=>{let{records:t,allUsers:r}=e;const[a,s]=(0,n.useState)(!1),i=a?t:t.slice(0,5);return 0===t.length?(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)(rn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,yr.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"No head-to-head data available"}),(0,yr.jsx)("p",{className:"text-xs text-gray-400",children:"Face opponents multiple times to see detailed records"})]}):(0,yr.jsxs)("div",{className:"space-y-3",children:[i.map((e,t)=>{const r=e.wins+e.losses,n=Math.round(e.wins/r*100);return(0,yr.jsx)("div",{className:"group hover:bg-gray-50 rounded-lg p-3 transition-colors",children:(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ".concat(n>=60?"bg-green-100 text-green-600":n>=40?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"),children:n>=60?"\ud83d\udcaa":n>=40?"\u2696\ufe0f":"\ud83d\udd25"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:[r," matches played"]})]})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,yr.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[e.wins,"W - ",e.losses,"L"]}),(0,yr.jsxs)("span",{className:"text-sm font-bold ".concat(n>=60?"text-green-600":n>=40?"text-yellow-600":"text-red-600"),children:[n,"%"]})]}),(0,yr.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-1.5",children:(0,yr.jsx)("div",{className:"h-1.5 rounded-full transition-all duration-700 ".concat(n>=60?"bg-green-500":n>=40?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(n,"%")}})})]})]})},t)}),t.length>5&&(0,yr.jsx)("div",{className:"text-center pt-2 border-t border-gray-100",children:(0,yr.jsx)("button",{onClick:()=>s(!a),className:"text-sm text-[#5D1F1F] hover:text-red-800 font-medium transition-colors",children:a?"Show less \u2191":"View all ".concat(t.length," opponents \u2193")})})]})},gn=e=>{let{currentUser:t,seasons:r=[],selectedSeason:a=null,allUsers:s=[],selectedPlayerId:i=null,onPlayerSelect:o=null,onPlayerClear:l=null}=e;const[d,u]=(0,n.useState)("current"),[h,m]=(0,n.useState)(null===a||void 0===a?void 0:a.id),p=i||(null===t||void 0===t?void 0:t.id),f=s.find(e=>e.id===p)||t,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const[s,i]=(0,n.useState)({matchHistory:[],overallStats:{},bestPartners:[],nemesisOpponent:null,nemesisPair:null,winStreaks:{},formGuide:[],headToHeadRecords:[],seasonProgression:[],loading:!0,error:null}),o=(0,n.useCallback)(async()=>{if(e)try{i(e=>c(c({},e),{},{loading:!0,error:null}));const{data:n,error:s}=await sr.from("match_fixtures").select("\n          id,\n          match_id,\n          court_number,\n          game_number,\n          pair1_player1_id,\n          pair1_player2_id,\n          pair2_player1_id,\n          pair2_player2_id,\n          match_results (\n            id,\n            pair1_score,\n            pair2_score,\n            created_at\n          ),\n          matches!match_fixtures_match_id_fkey (\n            id,\n            season_id,\n            match_date,\n            seasons (\n              id,\n              name\n            )\n          )\n        ").or("pair1_player1_id.eq.".concat(e,",pair1_player2_id.eq.").concat(e,",pair2_player1_id.eq.").concat(e,",pair2_player2_id.eq.").concat(e)).not("match_results","is",null);if(s)throw s;const{data:o,error:l}=await sr.from("league_match_rubbers").select("\n          id,\n          rubber_number,\n          cawood_player1_id,\n          cawood_player2_id,\n          opponent_player1_id,\n          opponent_player2_id,\n          cawood_games_won,\n          opponent_games_won,\n          created_at,\n          match_fixture:match_fixture_id (\n            id,\n            court_number,\n            match_id,\n            opponent_club,\n            matches:match_id (\n              id,\n              season_id,\n              match_date,\n              seasons (\n                id,\n                name\n              )\n            )\n          ),\n          opponent_player1:opponent_player1_id (\n            id,\n            name\n          ),\n          opponent_player2:opponent_player2_id (\n            id,\n            name\n          )\n        ").or("cawood_player1_id.eq.".concat(e,",cawood_player2_id.eq.").concat(e));if(l)throw l;const d=a.reduce((e,t)=>(e[t.id]=t.name,e),{}),u=n.filter(e=>{var n;return!(!r&&t&&(null===(n=e.matches)||void 0===n?void 0:n.season_id)!==t)&&e.match_results&&e.match_results.length>0}).map(t=>{var r,n,a,s;const i=t.match_results[0],o=t.pair1_player1_id===e||t.pair1_player2_id===e,l=t.pair2_player1_id===e||t.pair2_player2_id===e;if(!o&&!l)return null;const c=o?i.pair1_score:i.pair2_score,u=o?i.pair2_score:i.pair1_score,h=c>u,m=c===u;let p;p=o?t.pair1_player1_id===e?t.pair1_player2_id:t.pair1_player1_id:t.pair2_player1_id===e?t.pair2_player2_id:t.pair2_player1_id;const f=o?[t.pair2_player1_id,t.pair2_player2_id]:[t.pair1_player1_id,t.pair1_player2_id];return{fixtureId:t.id,matchId:t.match_id,date:(null===(r=t.matches)||void 0===r?void 0:r.match_date)||i.created_at,won:h,tie:m,score:"".concat(c," - ").concat(u),partnerId:p,partnerName:d[p]||"Unknown",opponentIds:f,opponentNames:f.map(e=>d[e]||"Unknown"),playerScore:c,opponentScore:u,seasonId:null===(n=t.matches)||void 0===n?void 0:n.season_id,seasonName:null===(a=t.matches)||void 0===a||null===(s=a.seasons)||void 0===s?void 0:s.name,courtNumber:t.court_number}}).filter(Boolean).sort((e,t)=>new Date(t.date)-new Date(e.date)),h=o.filter(e=>{var n,a;return!(!r&&t&&(null===(n=e.match_fixture)||void 0===n||null===(a=n.matches)||void 0===a?void 0:a.season_id)!==t)&&null!=e.cawood_games_won&&null!=e.opponent_games_won}).map(t=>{var r,n,a,s,i,o,l,c,u,h,m,p;const f=t.cawood_player1_id===e,g=t.cawood_player2_id===e;if(!f&&!g)return null;const y=t.cawood_games_won||0,v=t.opponent_games_won||0,x=y>v,b=y===v,w=f?t.cawood_player2_id:t.cawood_player1_id,_=[(null===(r=t.opponent_player1)||void 0===r?void 0:r.name)||"Unknown",(null===(n=t.opponent_player2)||void 0===n?void 0:n.name)||"Unknown"];return{fixtureId:t.id,matchId:null===(a=t.match_fixture)||void 0===a?void 0:a.match_id,date:(null===(s=t.match_fixture)||void 0===s||null===(i=s.matches)||void 0===i?void 0:i.match_date)||t.created_at,won:x,tie:b,score:"".concat(y," - ").concat(v),partnerId:w,partnerName:d[w]||"Unknown",opponentIds:[t.opponent_player1_id,t.opponent_player2_id],opponentNames:_,playerScore:y,opponentScore:v,seasonId:null===(o=t.match_fixture)||void 0===o||null===(l=o.matches)||void 0===l?void 0:l.season_id,seasonName:null===(c=t.match_fixture)||void 0===c||null===(u=c.matches)||void 0===u||null===(h=u.seasons)||void 0===h?void 0:h.name,courtNumber:null===(m=t.match_fixture)||void 0===m?void 0:m.court_number,isLeagueMatch:!0,opponentClub:null===(p=t.match_fixture)||void 0===p?void 0:p.opponent_club,rubberNumber:t.rubber_number}}).filter(Boolean).sort((e,t)=>new Date(t.date)-new Date(e.date)),m=[...u,...h].sort((e,t)=>new Date(t.date)-new Date(e.date)),p=m.length,f=m.filter(e=>e.won).length,g=m.filter(e=>e.tie).length,y=m.filter(e=>!e.won&&!e.tie).length,v=p-g,x=v>0?f/v:0,b=m.reduce((e,t)=>e+t.playerScore+t.opponentScore,0),w=m.reduce((e,t)=>e+t.playerScore,0),_=b>0?w/b:0,j={};m.forEach(e=>{j[e.partnerId]||(j[e.partnerId]={playerId:e.partnerId,name:e.partnerName,totalGames:0,gamesWon:0,matches:0}),j[e.partnerId].totalGames+=e.playerScore+e.opponentScore,j[e.partnerId].gamesWon+=e.playerScore,j[e.partnerId].matches++});const N=Object.values(j).map(e=>c(c({},e),{},{winRate:e.totalGames>0?e.gamesWon/e.totalGames:0})).filter(e=>e.totalGames>=10).sort((e,t)=>t.winRate-e.winRate),k={};m.forEach(e=>{e.opponentIds.forEach(t=>{if(t&&!k[t]){const r=e.isLeagueMatch?e.opponentNames[e.opponentIds.indexOf(t)]:d[t]||"Unknown";k[t]={playerId:t,name:r,totalGames:0,gamesWon:0,gamesLost:0,matches:0,wins:0,losses:0}}t&&k[t]&&(k[t].totalGames+=e.playerScore+e.opponentScore,k[t].gamesWon+=e.playerScore,k[t].gamesLost+=e.opponentScore,k[t].matches++,e.won?k[t].wins++:k[t].losses++)})});const S=Object.values(k).map(e=>c(c({},e),{},{winRate:e.totalGames>0?e.gamesWon/e.totalGames:0})).filter(e=>e.totalGames>=10).sort((e,t)=>e.winRate-t.winRate)[0],C={};m.forEach(e=>{if(e.opponentIds[0]&&e.opponentIds[1]){const t=e.opponentIds.sort().join("-");if(!C[t]){const r=e.isLeagueMatch?e.opponentNames[e.opponentIds.indexOf(e.opponentIds[0])]:d[e.opponentIds[0]]||"Unknown",n=e.isLeagueMatch?e.opponentNames[e.opponentIds.indexOf(e.opponentIds[1])]:d[e.opponentIds[1]]||"Unknown";C[t]={player1Id:e.opponentIds[0],player2Id:e.opponentIds[1],player1Name:r,player2Name:n,totalGames:0,gamesWon:0,gamesLost:0,matches:0}}C[t].totalGames+=e.playerScore+e.opponentScore,C[t].gamesWon+=e.playerScore,C[t].gamesLost+=e.opponentScore,C[t].matches++}});const E=Object.values(C).map(e=>c(c({},e),{},{winRate:e.totalGames>0?e.gamesWon/e.totalGames:0})).filter(e=>e.totalGames>=10).sort((e,t)=>e.winRate-t.winRate)[0],P=[...m].reverse();let T=0,A=null,O=0,R=0;P.forEach((e,t)=>{if(0===t)T=1,A=e.won?"win":"loss",e.won&&(R=1);else{const r=P[t-1];e.won===r.won?(T++,e.won&&R++):(R>O&&(O=R),T=1,A=e.won?"win":"loss",R=e.won?1:0)}}),R>O&&(O=R);const I=m.slice(0,10),D=Object.values(k).filter(e=>e.matches>1).sort((e,t)=>t.matches-e.matches);let L=[];if(r){const e={};m.forEach(t=>{e[t.seasonId]||(e[t.seasonId]={seasonId:t.seasonId,seasonName:t.seasonName,totalGames:0,gamesWon:0,matches:0,matchesWon:0}),e[t.seasonId].totalGames+=t.playerScore+t.opponentScore,e[t.seasonId].gamesWon+=t.playerScore,e[t.seasonId].matches++,t.won&&e[t.seasonId].matchesWon++}),L=Object.values(e).map(e=>c(c({},e),{},{winRate:e.totalGames>0?e.gamesWon/e.totalGames*100:0})).sort((e,t)=>new Date(e.seasonId)-new Date(t.seasonId))}i({matchHistory:m,overallStats:{totalGames:b,gamesWon:w,gameWinRate:_,totalMatches:p,matchesWon:f,matchesDrawn:g,matchesLost:y,matchWinRate:x},bestPartners:N,nemesisOpponent:S,nemesisPair:E,winStreaks:{current:T,currentType:A,longest:O},formGuide:I,headToHeadRecords:D,seasonProgression:L,loading:!1,error:null})}catch(C){console.error("Error calculating profile stats:",C),i(t=>c(c({},t),{},{loading:!1,error:C.message}))}},[e,t,r,a]);return(0,n.useEffect)(()=>{o()},[o]),s}(p,"current"===d?null===a||void 0===a?void 0:a.id:"season"===d?h:null,"all-time"===d,s),{matchHistory:y=[],overallStats:v={},bestPartners:x=[],nemesisOpponent:b=null,nemesisPair:w=null,winStreaks:_={},formGuide:j=[],headToHeadRecords:N=[],seasonProgression:k=[],loading:S=!0,error:C=null}=g||{};return S?(0,yr.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5D1F1F]"})}):C?(0,yr.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,yr.jsxs)("p",{className:"text-red-600",children:["Error loading profile stats: ",C]})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,yr.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[(null===f||void 0===f?void 0:f.name)||"Unknown Player","'s Profile"]}),i&&i!==(null===t||void 0===t?void 0:t.id)&&(0,yr.jsx)("button",{onClick:()=>l&&l(),className:"text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-3 rounded-full transition-colors min-h-[44px]",style:{touchAction:"manipulation"},children:"View My Profile"})]}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Performance statistics and match history"})]}),(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Player:"}),(0,yr.jsx)("select",{value:p||"",onChange:e=>{const r=e.target.value;r===(null===t||void 0===t?void 0:t.id)?l&&l():o&&o(r)},className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent min-w-0",children:s.sort((e,r)=>e.id===(null===t||void 0===t?void 0:t.id)?-1:r.id===(null===t||void 0===t?void 0:t.id)?1:(e.name||"").localeCompare(r.name||"")).map(e=>(0,yr.jsxs)("option",{value:e.id,children:[e.name,e.id===(null===t||void 0===t?void 0:t.id)?" (You)":""]},e.id))})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"View:"}),(0,yr.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",children:[(0,yr.jsx)("option",{value:"current",children:"Current Season"}),(0,yr.jsx)("option",{value:"all-time",children:"All Time"}),r.length>1&&(0,yr.jsx)("option",{value:"season",children:"Select Season"})]}),"season"===d&&(0,yr.jsxs)("select",{value:h||"",onChange:e=>m(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",children:[(0,yr.jsx)("option",{value:"",children:"Select a season..."}),r.map(e=>(0,yr.jsxs)("option",{value:e.id,children:[e.name," (","league"===e.season_type?"League":"Ladder",")"]},e.id))]})]})]})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[(0,yr.jsx)(cn,{icon:(0,yr.jsx)(Rr,{className:"w-6 h-6 text-yellow-600"}),title:"Matches Won",value:v.matchesWon||0,subtitle:"".concat(v.matchesDrawn||0," draws, ").concat(v.matchesLost||0," losses"),color:"yellow"}),(0,yr.jsx)(cn,{icon:(0,yr.jsx)(rn,{className:"w-6 h-6 text-green-600"}),title:"Match Win Rate",value:"".concat(Math.round(100*(v.matchWinRate||0)),"%"),subtitle:"excluding draws",color:"green"}),(0,yr.jsx)(cn,{icon:(0,yr.jsx)(Rr,{className:"w-6 h-6 text-blue-600"}),title:"Games Won",value:v.gamesWon||0,subtitle:"of ".concat(v.totalGames||0," total"),color:"blue"}),(0,yr.jsx)(cn,{icon:(0,yr.jsx)(rn,{className:"w-6 h-6 text-teal-600"}),title:"Game Win Rate",value:"".concat(Math.round(100*(v.gameWinRate||0)),"%"),subtitle:"individual games",color:"teal"}),(0,yr.jsx)(cn,{icon:(0,yr.jsx)(nn,{className:"w-6 h-6 text-purple-600"}),title:"Current Streak",value:_.current||0,subtitle:"win"===_.currentType?"wins":"losses",color:"win"===_.currentType?"green":"red"}),(0,yr.jsx)(cn,{icon:(0,yr.jsx)(an,{className:"w-6 h-6 text-orange-600"}),title:"Best Streak",value:_.longest||0,subtitle:"consecutive wins",color:"orange"})]}),k.length>1&&(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(sn,{className:"w-5 h-5 mr-2 text-[#5D1F1F]"}),"Season Progression"]}),(0,yr.jsx)(dn,{data:k})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(Lr,{className:"w-5 h-5 mr-2 text-[#5D1F1F]"}),"Best Partners"]}),(0,yr.jsx)(un,{partners:x,allUsers:s})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(on,{className:"w-5 h-5 mr-2 text-red-600"}),"Nemesis Analysis"]}),(0,yr.jsx)(hn,{nemesisOpponent:b,nemesisPair:w,allUsers:s})]})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(ln,{className:"w-5 h-5 mr-2 text-[#5D1F1F]"}),"Recent Form (Last 10 Matches)"]}),(0,yr.jsx)(mn,{matches:j,allUsers:s})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(Ir,{className:"w-5 h-5 mr-2 text-[#5D1F1F]"}),"Match History"]}),(0,yr.jsx)(pn,{matches:y,allUsers:s})]}),N.length>0&&(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(rn,{className:"w-5 h-5 mr-2 text-[#5D1F1F]"}),"Head-to-Head Records"]}),(0,yr.jsx)(fn,{records:N,allUsers:s})]})]})},yn=e=>{var t,r;let{currentUser:n,currentSeason:a,selectedSeason:s,ladderPlayers:i,getPlayerAvailability:o,setPlayerAvailability:l,matchFixtures:c,matchResults:d,getMatchScore:u}=e;if(!(null===i||void 0===i?void 0:i.find(e=>e.id===n.id)))return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Availability"}),(0,yr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,yr.jsxs)("p",{className:"text-yellow-800",children:["You need to be added to the ",(null===s||void 0===s?void 0:s.name)||"current season"," ladder before you can set your availability for matches."]})})]});if("completed"===(null===s||void 0===s?void 0:s.status))return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Availability"}),(0,yr.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,yr.jsxs)("p",{className:"text-blue-800",children:["This season (",s.name,") has been completed. Availability cannot be modified."]})})]});const h=new Date;h.setHours(0,0,0,0);const m=(null===a||void 0===a||null===(t=a.matches)||void 0===t?void 0:t.filter(e=>new Date(e.match_date)>=h))||[],p=(null===a||void 0===a||null===(r=a.matches)||void 0===r?void 0:r.filter(e=>new Date(e.match_date)<h))||[];return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Availability"}),m.length>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upcoming Matches"}),(0,yr.jsx)("p",{className:"text-gray-600 mb-4",children:"Please set your availability for upcoming matches"}),(0,yr.jsx)("div",{className:"space-y-4",children:m.map(e=>{const t=o(n.id,e.id),r=(e=>{const t=c.filter(t=>t.match_id===e);return 0!==t.length&&(t.filter(e=>d.some(t=>t.fixture_id===e.id)).length===t.length&&t.length>0)})(e.id);return(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h4",{className:"text-lg font-semibold",children:["Week ",e.week_number]}),(0,yr.jsx)("p",{className:"text-gray-600",children:new Date(e.match_date).toLocaleDateString("en-GB")})]}),r?(0,yr.jsx)("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-md font-medium",children:"\u2705 Match Completed"}):(0,yr.jsxs)("div",{className:"flex space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>l(e.id,!0,n.id),className:"px-4 py-2 rounded-md transition-colors ".concat(!0===t?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-green-100"),children:"Available"}),(0,yr.jsx)("button",{onClick:()=>l(e.id,!1,n.id),className:"px-4 py-2 rounded-md transition-colors ".concat(!1===t?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-red-100"),children:"Not Available"}),void 0!==t&&(0,yr.jsx)("button",{onClick:()=>l(e.id,void 0,n.id),className:"px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:"Clear"})]})]}),!r&&void 0!==t&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,yr.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t?"bg-green-500":"bg-red-500")}),(0,yr.jsxs)("span",{className:"text-gray-600",children:["You are marked as ",t?"available":"not available"," for this match"]})]}),r&&(0,yr.jsx)("div",{className:"text-sm text-gray-600",children:"All results have been entered for this match. Check your results below."})]},e.id)})})]}),p.length>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Past Matches"}),(0,yr.jsx)("div",{className:"space-y-4",children:p.map(e=>{const t=(e=>{const t=c.filter(t=>t.match_id===e&&(t.player1_id===n.id||t.player2_id===n.id||t.player3_id===n.id||t.player4_id===n.id)),r=[];return t.forEach(e=>{const t=u(e.id);if(t){const u=e.pair1_player1_id===n.id||e.pair1_player2_id===n.id,m=u?t.pair1_score>t.pair2_score:t.pair2_score>t.pair1_score;let p,f;var a,s,i,o,l,c,d,h;u?(p=e.pair1_player1_id===n.id?null===(a=e.player2)||void 0===a?void 0:a.name:null===(s=e.player1)||void 0===s?void 0:s.name,f="".concat(null===(i=e.player3)||void 0===i?void 0:i.name," & ").concat(null===(o=e.player4)||void 0===o?void 0:o.name)):(p=e.pair2_player1_id===n.id?null===(l=e.player4)||void 0===l?void 0:l.name:null===(c=e.player3)||void 0===c?void 0:c.name,f="".concat(null===(d=e.player1)||void 0===d?void 0:d.name," & ").concat(null===(h=e.player2)||void 0===h?void 0:h.name)),r.push({opponent:f,partner:p,score:"".concat(t.pair1_score," - ").concat(t.pair2_score),won:m})}}),r})(e.id);return(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsxs)("div",{className:"mb-4",children:[(0,yr.jsxs)("h4",{className:"text-lg font-semibold",children:["Week ",e.week_number]}),(0,yr.jsx)("p",{className:"text-gray-600",children:new Date(e.match_date).toLocaleDateString("en-GB")})]}),t.length>0?(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h5",{className:"font-medium mb-2",children:"Your Results:"}),(0,yr.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,yr.jsx)("div",{className:"p-2 rounded text-sm ".concat(e.won?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("span",{children:["With ",e.partner," vs ",e.opponent]}),(0,yr.jsxs)("span",{className:"font-semibold ".concat(e.won?"text-green-700":"text-red-700"),children:[e.score," ",e.won?"(Won)":"(Lost)"]})]})},t))})]}):(0,yr.jsx)("p",{className:"text-gray-500 text-sm",children:"No scores recorded for this match"})]},e.id)})})]}),0===m.length&&0===p.length&&(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:(0,yr.jsx)("p",{className:"text-gray-500",children:"No matches scheduled yet."})})]})},vn=fr("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),xn=fr("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),bn=fr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),wn=fr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_n=fr("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),jn=fr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Nn=fr("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),kn=fr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Sn=e=>{var t,r,n,a,s,i,o;let{challenge:l,selectedSeason:d,resolveChallenge:u,editingScore:h,setEditingScore:m,editForm:p,setEditForm:f,saveScoreEdit:g}=e;return(0,yr.jsx)("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-orange-100 text-orange-800",children:"PENDING"}),(0,yr.jsxs)("span",{className:"text-sm text-gray-600",children:[l.match_date?new Date(l.match_date).toLocaleDateString():"Unknown date"," \u2022 Court ",l.court_number||"?"]})]}),(0,yr.jsx)(_n,{className:"w-5 h-5 text-orange-500"})]}),(0,yr.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"space-y-2",children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:"Match Details"}),(0,yr.jsxs)("div",{className:"text-sm text-gray-700",children:[l.fixture?(0,yr.jsxs)("div",{className:"space-y-1",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("strong",{children:"Players:"})," ",null===(t=l.fixture.player1)||void 0===t?void 0:t.name," & ",null===(r=l.fixture.player2)||void 0===r?void 0:r.name," vs ",null===(n=l.fixture.player3)||void 0===n?void 0:n.name," & ",null===(a=l.fixture.player4)||void 0===a?void 0:a.name]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("strong",{children:"Original Score:"})," ",(null===(s=l.original_result)||void 0===s?void 0:s.pair1_score)||"?"," - ",(null===(i=l.original_result)||void 0===i?void 0:i.pair2_score)||"?"]})]}):(0,yr.jsxs)("div",{children:[(0,yr.jsx)("strong",{children:"Players:"})," Unknown",(0,yr.jsx)("br",{}),(0,yr.jsx)("strong",{children:"Original Score:"})," Unknown"]}),(0,yr.jsxs)("div",{className:"mt-1",children:[(0,yr.jsx)("strong",{children:"Challenged By:"})," ",(null===(o=l.challenger)||void 0===o?void 0:o.name)||"Unknown"]})]})]})}),(0,yr.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,yr.jsx)("div",{className:"flex justify-between items-start",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"font-medium text-yellow-800",children:"Disputed Score"}),(0,yr.jsxs)("div",{className:"text-lg font-bold text-yellow-900 mt-1",children:[l.challenged_pair1_score," - ",l.challenged_pair2_score]})]})}),l.challenge_reason&&(0,yr.jsxs)("div",{className:"mt-3",children:[(0,yr.jsx)("div",{className:"font-medium text-yellow-800 text-sm",children:"Reason:"}),(0,yr.jsx)("div",{className:"text-sm text-yellow-700",children:l.challenge_reason})]})]}),h===l.id&&(0,yr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,yr.jsx)("h6",{className:"font-medium text-blue-800 mb-2",children:"Edit Score"}),(0,yr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("label",{className:"text-sm text-blue-700",children:"Pair 1:"}),(0,yr.jsx)("input",{type:"number",min:"0",value:p.pair1_score,onChange:e=>f(c(c({},p),{},{pair1_score:e.target.value})),className:"w-16 px-2 py-1 border border-blue-300 rounded text-center focus:outline-none focus:border-blue-500"})]}),(0,yr.jsx)("span",{className:"text-blue-700",children:"-"}),(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("label",{className:"text-sm text-blue-700",children:"Pair 2:"}),(0,yr.jsx)("input",{type:"number",min:"0",value:p.pair2_score,onChange:e=>f(c(c({},p),{},{pair2_score:e.target.value})),className:"w-16 px-2 py-1 border border-blue-300 rounded text-center focus:outline-none focus:border-blue-500"})]}),(0,yr.jsx)("button",{onClick:()=>g(l.id),className:"bg-blue-600 text-white px-4 py-1 rounded text-sm hover:bg-blue-700",children:"Save"}),(0,yr.jsx)("button",{onClick:()=>m(null),className:"bg-gray-500 text-white px-4 py-1 rounded text-sm hover:bg-gray-600",children:"Cancel"})]})]}),l.admin_decision&&(0,yr.jsxs)("div",{className:"mt-2 bg-yellow-50 p-2 rounded",children:[(0,yr.jsx)("p",{className:"text-xs text-yellow-600 font-medium",children:"Admin Decision:"}),(0,yr.jsx)("p",{className:"text-sm",children:l.admin_decision})]}),(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,yr.jsxs)("button",{onClick:()=>u(l.id,"approved",{pair1_score:l.challenged_pair1_score,pair2_score:l.challenged_pair2_score}),disabled:"completed"===(null===d||void 0===d?void 0:d.status),className:"flex items-center justify-center gap-2 bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 disabled:opacity-50 transition-colors",title:"completed"===(null===d||void 0===d?void 0:d.status)?"Cannot process challenges for completed seasons":"Approve challenge and update score",children:[(0,yr.jsx)(vn,{className:"w-4 h-4"}),"Approve"]}),(0,yr.jsxs)("button",{onClick:()=>u(l.id,"rejected"),disabled:"completed"===(null===d||void 0===d?void 0:d.status),className:"flex items-center justify-center gap-2 bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 disabled:opacity-50 transition-colors",title:"completed"===(null===d||void 0===d?void 0:d.status)?"Cannot process challenges for completed seasons":"Reject challenge and keep original score",children:[(0,yr.jsx)(Sr,{className:"w-4 h-4"}),"Reject"]})]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-400",children:["Submitted: ",new Date(l.created_at).toLocaleString()]})]})})},Cn=e=>{let{challenges:t}=e;const[r,a]=n.useState(!1);return(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("button",{onClick:()=>a(!r),className:"flex items-center justify-between w-full p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(vn,{className:"w-4 h-4 text-gray-600"}),(0,yr.jsxs)("span",{className:"font-medium text-gray-700",children:["Processed Challenges (",t.length,")"]})]}),(0,yr.jsx)("span",{className:"text-gray-500 text-sm",children:r?"Hide":"Show"})]}),r&&(0,yr.jsx)("div",{className:"mt-4 space-y-2",children:t.map(e=>{var t;return(0,yr.jsx)("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,yr.jsxs)("div",{className:"flex flex-col gap-1 flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,yr.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded whitespace-nowrap ".concat("approved"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status.toUpperCase()}),(0,yr.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.resolved_at).toLocaleDateString()})]}),(0,yr.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,yr.jsx)("strong",{children:(null===(t=e.challenger)||void 0===t?void 0:t.name)||"Unknown"})," challenged score: ",e.challenged_pair1_score,"-",e.challenged_pair2_score]})]}),(0,yr.jsx)("div",{className:"text-right",children:(0,yr.jsxs)("div",{className:"text-xs text-gray-400",children:[e.match_date?new Date(e.match_date).toLocaleDateString():"Unknown date"," \u2022 Court ",e.court_number||"?"]})})]})},e.id)})})]})},En=e=>{let{currentUser:t,currentSeason:r,activeSeason:a,selectedSeason:s,onDataRefresh:i}=e;const[o,l]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[p,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(null),[v,x]=(0,n.useState)({pair1_score:"",pair2_score:""}),[b,w]=(0,n.useState)("challenges");(0,n.useEffect)(()=>{_()},[null===s||void 0===s?void 0:s.id,null===r||void 0===r?void 0:r.id]);const _=async()=>{try{f(!0);const[e,t,r]=await Promise.all([ur(null===s||void 0===s?void 0:s.id),hr(null===s||void 0===s?void 0:s.id),j(null===s||void 0===s?void 0:s.id)]);l(e||[]),u(t||[]),m(r||[])}catch(e){console.error("\u274c Error fetching data:",e),alert("Error loading challenges: "+e.message)}finally{f(!1)}},j=async e=>{const t=e||(null===r||void 0===r?void 0:r.id);if(!t)return[];const n=e?s:r;if("completed"===(null===n||void 0===n?void 0:n.status))return[];const{data:a,error:i}=await sr.from("match_results").select("\n        *,\n        fixture:fixture_id(\n          *,\n          match:match_id(week_number, match_date, season_id),\n          player1:player1_id(name),\n          player2:player2_id(name),\n          player3:player3_id(name),\n          player4:player4_id(name)\n        )\n      ").eq("fixture.match.season_id",t).order("created_at",{ascending:!1});if(i)throw console.error("\u274c Error fetching match results:",i),i;return a||[]},N=async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("completed"!==(null===s||void 0===s?void 0:s.status)){f(!0);try{if("approved"===r&&n){const t=o.find(t=>t.id===e);if(null!==t&&void 0!==t&&t.original_result_id&&null!==t&&void 0!==t&&t.fixture_id){const{data:e,error:r}=await sr.from("match_results").insert({fixture_id:t.fixture_id,pair1_score:n.pair1_score,pair2_score:n.pair2_score,submitted_by:t.challenger_id,verified:!0}).select().single();if(r)return console.error("\u274c Error creating corrected result:",r),void alert("Error creating corrected result: "+r.message);const{error:a}=await sr.from("match_results").update({verified:!1}).eq("id",t.original_result_id);if(a)return console.error("\u274c Error marking original as superseded:",a),void alert("Error updating original result: "+a.message)}}const a={status:r,resolved_by:t.id,resolved_at:(new Date).toISOString()};a.admin_decision="approved"===r?"Challenge upheld - score corrected":"Challenge rejected - original score stands";const{data:s,error:l}=await sr.from("score_challenges").update(a).eq("id",e).select();if(l)return console.error("\u274c Challenge update error:",l),console.error("Error details:",{code:l.code,message:l.message,details:l.details,hint:l.hint}),void alert("Error resolving challenge: ".concat(l.message,"\n\nDetails: ").concat(l.details||"None"));alert("Challenge ".concat(r," successfully!")),await _(),i&&i()}catch(a){console.error("\ud83d\udca5 Unexpected error resolving challenge:",a),alert("Unexpected error resolving challenge: "+a.message)}finally{f(!1)}}else alert("Cannot process challenges for completed seasons. Challenges can only be processed for the current active season.")},k=async e=>{f(!0);try{if(!v.pair1_score||!v.pair2_score)return void alert("Please enter both scores");const{error:t}=await sr.from("match_results").update({pair1_score:parseInt(v.pair1_score),pair2_score:parseInt(v.pair2_score)}).eq("id",e);t?(console.error("\u274c Error updating score:",t),alert("Error updating score: "+t.message)):(alert("Score updated successfully!"),y(null),x({pair1_score:"",pair2_score:""}),await _(),i&&i())}catch(t){console.error("Error in handleSaveEdit:",t),alert("Error updating score: "+t.message)}finally{f(!1)}},S=()=>{y(null),x({pair1_score:"",pair2_score:""})};return p?(0,yr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,yr.jsx)("div",{className:"text-gray-500",children:"Loading challenges..."})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("div",{className:"mb-6",children:(0,yr.jsx)("h3",{className:"text-lg font-semibold",children:"Score Management & Challenges"})}),(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row rounded-lg bg-gray-100 p-1 gap-1 sm:gap-0",children:[(0,yr.jsxs)("button",{className:"flex-1 py-2 px-3 rounded-md text-xs sm:text-sm font-medium transition-colors ".concat("challenges"===b?"bg-white text-gray-900 shadow":"text-gray-600"),onClick:()=>w("challenges"),children:[(0,yr.jsx)(_n,{className:"w-4 h-4 inline mr-1 sm:mr-2"}),(0,yr.jsx)("span",{className:"hidden sm:inline",children:"Challenges"}),(0,yr.jsx)("span",{className:"sm:hidden",children:"Challenges"}),(0,yr.jsxs)("span",{className:"ml-1",children:["(",o.filter(e=>"pending"===e.status).length,")"]})]}),(0,yr.jsxs)("button",{className:"flex-1 py-2 px-3 rounded-md text-xs sm:text-sm font-medium transition-colors ".concat("conflicts"===b?"bg-white text-gray-900 shadow":"text-gray-600"),onClick:()=>w("conflicts"),children:[(0,yr.jsx)(jn,{className:"w-4 h-4 inline mr-1 sm:mr-2"}),(0,yr.jsx)("span",{className:"hidden sm:inline",children:"Conflicts"}),(0,yr.jsx)("span",{className:"sm:hidden",children:"Conflicts"}),(0,yr.jsxs)("span",{className:"ml-1",children:["(",d.filter(e=>!e.resolved).length,")"]})]}),(0,yr.jsxs)("button",{className:"flex-1 py-2 px-3 rounded-md text-xs sm:text-sm font-medium transition-colors ".concat("results"===b?"bg-white text-gray-900 shadow":"text-gray-600"),onClick:()=>w("results"),children:[(0,yr.jsx)(Nn,{className:"w-4 h-4 inline mr-1 sm:mr-2"}),(0,yr.jsx)("span",{className:"hidden sm:inline",children:"Edit Results"}),(0,yr.jsx)("span",{className:"sm:hidden",children:"Edit"}),(0,yr.jsxs)("span",{className:"ml-1",children:["(",h.length,")"]})]})]}),"challenges"===b&&(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsxs)("h4",{className:"font-semibold mb-4 flex items-center",children:[(0,yr.jsx)(_n,{className:"w-5 h-5 mr-2 text-orange-500"}),"Score Challenges (",o.length,")"]}),"completed"===(null===s||void 0===s?void 0:s.status)&&(0,yr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:(0,yr.jsxs)("div",{className:"flex items-center",children:[(0,yr.jsx)(kn,{className:"w-5 h-5 text-yellow-600 mr-2"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h5",{className:"font-medium text-yellow-800",children:"Season Completed"}),(0,yr.jsx)("p",{className:"text-sm text-yellow-700",children:"This season has been completed and closed. Score challenges cannot be processed for completed seasons."})]})]})}),0===o.length?(0,yr.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No score challenges yet"}):(0,yr.jsx)("div",{className:"space-y-6",children:(()=>{const e=o.filter(e=>"pending"===e.status),t=o.filter(e=>"pending"!==e.status);return(0,yr.jsxs)(yr.Fragment,{children:[e.length>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h5",{className:"font-medium text-orange-800 mb-3 flex items-center",children:[(0,yr.jsx)(jn,{className:"w-4 h-4 mr-2"}),"Pending Challenges (",e.length,")"]}),(0,yr.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,yr.jsx)(Sn,{challenge:e,selectedSeason:s,resolveChallenge:N,editingScore:g,setEditingScore:y,editForm:v,setEditForm:x,saveScoreEdit:k},e.id))})]}),t.length>0&&(0,yr.jsx)(Cn,{challenges:t})]})})()})]}),"conflicts"===b&&(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsxs)("h4",{className:"font-semibold mb-4 flex items-center",children:[(0,yr.jsx)(jn,{className:"w-5 h-5 mr-2 text-red-500"}),"Score Conflicts (",d.length,")"]}),0===d.length?(0,yr.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No score conflicts detected"}):(0,yr.jsx)("div",{className:"space-y-4",children:d.map(e=>{var t,r,n,a;return(0,yr.jsx)("div",{className:"border border-red-200 bg-red-50 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-red-100 text-red-800",children:"CONFLICT"}),(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Detected on submission"})]}),(0,yr.jsx)(jn,{className:"w-5 h-5 text-red-500"})]}),(0,yr.jsx)("div",{className:"bg-white rounded-lg p-4 border",children:(0,yr.jsxs)("div",{className:"space-y-2",children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:"Conflicting Submissions"}),(0,yr.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("strong",{children:"Original:"})," ",(null===(t=e.first_submission)||void 0===t?void 0:t.pair1_score)||"Unknown"," - ",(null===(r=e.first_submission)||void 0===r?void 0:r.pair2_score)||"Unknown"]}),(0,yr.jsxs)("div",{className:"mt-1",children:[(0,yr.jsx)("strong",{children:"New Submission:"})," ",(null===(n=e.conflicting_submission)||void 0===n?void 0:n.pair1_score)||"Unknown"," - ",(null===(a=e.conflicting_submission)||void 0===a?void 0:a.pair2_score)||"Unknown"]})]})]})}),(0,yr.jsxs)("div",{className:"text-xs text-gray-400",children:["Detected: ",new Date(e.created_at).toLocaleString(),e.resolved_at&&(0,yr.jsxs)("span",{children:[" \u2022 Resolved: ",new Date(e.resolved_at).toLocaleString()]})]})]})},e.id)})})]}),"results"===b&&(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsxs)("h4",{className:"font-semibold mb-4",children:["All Match Results (",h.length,")"]}),0===h.length?(0,yr.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No match results found"}):(0,yr.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:h.map(e=>{var t,r,n,a,i,o,l,d,u,h,m;return(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:[(null===(t=e.fixture)||void 0===t||null===(r=t.player1)||void 0===r?void 0:r.name)||"Unknown"," & ",(null===(n=e.fixture)||void 0===n||null===(a=n.player2)||void 0===a?void 0:a.name)||"Unknown",(0,yr.jsx)("span",{className:"mx-2 text-gray-400",children:"vs"}),(null===(i=e.fixture)||void 0===i||null===(o=i.player3)||void 0===o?void 0:o.name)||"Unknown"," & ",(null===(l=e.fixture)||void 0===l||null===(d=l.player4)||void 0===d?void 0:d.name)||"Unknown"]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:["Court ",(null===(u=e.fixture)||void 0===u?void 0:u.court_number)||"?"," \u2022 ",null!==(h=e.fixture)&&void 0!==h&&null!==(m=h.match)&&void 0!==m&&m.match_date?new Date(e.fixture.match.match_date).toLocaleDateString():"Unknown date"]})]}),(0,yr.jsx)("div",{className:"flex items-center space-x-4",children:(0,yr.jsx)("div",{className:"text-right",children:g===e.id?(0,yr.jsxs)("div",{className:"space-y-3",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("input",{type:"number",min:"0",className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",value:v.pair1_score,onChange:e=>x(c(c({},v),{},{pair1_score:e.target.value})),disabled:p,placeholder:"0"}),(0,yr.jsx)("span",{className:"text-gray-500",children:"-"}),(0,yr.jsx)("input",{type:"number",min:"0",className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",value:v.pair2_score,onChange:e=>x(c(c({},v),{},{pair2_score:e.target.value})),disabled:p,placeholder:"0"})]}),(0,yr.jsxs)("div",{className:"flex gap-2",children:[(0,yr.jsxs)("button",{onClick:()=>k(e.id),disabled:p||!v.pair1_score||!v.pair2_score,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-colors",children:[(0,yr.jsx)(vn,{className:"w-4 h-4"}),"Save"]}),(0,yr.jsxs)("button",{onClick:S,disabled:p,className:"flex-1 bg-gray-500 text-white px-4 py-2 rounded text-sm hover:bg-gray-600 flex items-center justify-center gap-2 transition-colors",children:[(0,yr.jsx)(Sr,{className:"w-4 h-4"}),"Cancel"]})]})]}):(0,yr.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,yr.jsx)("div",{className:"bg-gray-100 px-4 py-2 rounded-lg border border-gray-200",children:(0,yr.jsxs)("span",{className:"font-bold text-xl text-gray-800",children:[e.pair1_score," - ",e.pair2_score]})}),(0,yr.jsxs)("button",{onClick:()=>(e=>{"completed"!==(null===s||void 0===s?void 0:s.status)?(y(e.id),x({pair1_score:e.pair1_score.toString(),pair2_score:e.pair2_score.toString()})):alert("Cannot edit scores for completed seasons. Scores can only be edited for the current active season.")})(e),disabled:p||"completed"===(null===s||void 0===s?void 0:s.status),className:"px-3 py-2 rounded text-sm transition-colors flex items-center gap-2 ".concat("completed"===(null===s||void 0===s?void 0:s.status)?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#5D1F1F] text-white hover:bg-[#4A1818]"),title:"completed"===(null===s||void 0===s?void 0:s.status)?"Cannot edit scores in completed seasons":"Edit score",children:[(0,yr.jsx)(Nn,{className:"w-4 h-4"}),(0,yr.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]})]})})})]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-400 mt-1 pt-1 border-t border-gray-100",children:["Submitted: ",e.created_at?new Date(e.created_at).toLocaleString():"Unknown"]})]},e.id)})})]})]})},Pn=fr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Tn=fr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),An=e=>{let{showModal:t,setShowModal:r,allUsers:a,ladderPlayers:s,selectedSeason:i,onMergeComplete:o}=e;const l=Tr(),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[g,y]=(0,n.useState)(!1),[v,x]=(0,n.useState)([]),[b,w]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{if(!a)return;const e=a.filter(e=>e.email&&e.email.includes("@example.com")&&"approved"===e.status&&!["Bob Smith","Alice Johnson","Charlie Brown","Diana Prince","Eve Wilson","Frank Miller","Admin User","Emma Brown","David Wilson","Grace Taylor","Henry Garcia","Iris Martinez","Jack Thompson"].includes(e.name)),t=await Promise.all(e.map(async e=>{try{const{data:t}=await sr.from("season_players").select("games_played, games_won, matches_played, matches_won").eq("player_id",e.id).order("created_at",{ascending:!1}).limit(1).maybeSingle();return c(c({},e),{},{games_played:(null===t||void 0===t?void 0:t.games_played)||0,games_won:(null===t||void 0===t?void 0:t.games_won)||0,matches_played:(null===t||void 0===t?void 0:t.matches_played)||0,matches_won:(null===t||void 0===t?void 0:t.matches_won)||0})}catch(t){return c(c({},e),{},{games_played:0,games_won:0,matches_played:0,matches_won:0})}})),r=a.filter(e=>"approved"===e.status&&e.email&&!e.email.includes("@example.com"));x(t),w(r)})()},[a]);const _=v.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())),j=b.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.email.toLowerCase().includes(d.toLowerCase()));return t?(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,yr.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Merge CSV Players with Real Accounts"}),(0,yr.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-500",children:(0,yr.jsx)(Sr,{className:"w-6 h-6"})})]}),(0,yr.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 120px)"},children:[(0,yr.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)(jn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,yr.jsxs)("div",{className:"text-sm",children:[(0,yr.jsx)("p",{className:"font-medium text-blue-900 mb-1",children:"How Player Merging Works:"}),(0,yr.jsxs)("ul",{className:"text-blue-800 space-y-1 ml-4",children:[(0,yr.jsx)("li",{children:"\u2022 Select a CSV player (from imported data with @example.com email)"}),(0,yr.jsx)("li",{children:"\u2022 Select a real user account (signed up with real email)"}),(0,yr.jsx)("li",{children:"\u2022 All historical match data will be transferred to the real account"}),(0,yr.jsx)("li",{children:"\u2022 The CSV placeholder account will be removed"})]})]})]})}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Pn,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,yr.jsx)("input",{type:"text",placeholder:"Search players by name or email...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["CSV Players (",_.length,")"]}),(0,yr.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[_.map(e=>(0,yr.jsxs)("div",{onClick:()=>m(e),className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat((null===h||void 0===h?void 0:h.id)===e.id?"border-[#5D1F1F] bg-[#5D1F1F]/5":"border-gray-200 hover:border-gray-300"),children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,yr.jsx)("div",{className:"text-xs text-gray-500",children:e.email}),(0,yr.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[e.games_played||0," games, ",Math.round((e.games_won||0)/Math.max(e.games_played||1,1)*100),"% win rate"]})]},e.id)),0===_.length&&(0,yr.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No CSV players found"})]})]}),(0,yr.jsx)("div",{className:"flex items-center justify-center",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)(Tn,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,yr.jsx)("div",{className:"text-sm text-gray-600",children:"Merge"}),h&&p&&(0,yr.jsxs)("div",{className:"mt-2 text-xs text-green-600",children:[(0,yr.jsx)(_r,{className:"w-4 h-4 mx-auto mb-1"}),"Ready to merge"]})]})}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Real User Accounts (",j.length,")"]}),(0,yr.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[j.map(e=>(0,yr.jsxs)("div",{onClick:()=>f(e),className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat((null===p||void 0===p?void 0:p.id)===e.id?"border-[#5D1F1F] bg-[#5D1F1F]/5":"border-gray-200 hover:border-gray-300"),children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,yr.jsx)("div",{className:"text-xs text-gray-500",children:e.email}),(0,yr.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Status: ",e.status," \u2022 Role: ",e.role]})]},e.id)),0===j.length&&(0,yr.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No real users found"})]})]})]})]}),(0,yr.jsxs)("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 bg-gray-50",children:[(0,yr.jsx)("button",{onClick:()=>{m(null),f(null),u("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:g,children:"Reset Selections"}),(0,yr.jsxs)("div",{className:"flex space-x-3",children:[(0,yr.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:g,children:"Cancel"}),(0,yr.jsx)("button",{onClick:async()=>{if(h&&p){y(!0);try{const{data:e}=await sr.from("season_players").select("season_id, rank, games_played, games_won").eq("player_id",h.id),{error:t}=await sr.from("season_players").update({player_id:p.id,updated_at:(new Date).toISOString()}).eq("player_id",h.id);if(t)throw t;e&&e.length>0&&l.info("Updated ".concat(e.length," season(s) for ").concat(h.name));const n=[{field:"player1_id",desc:"individual player 1"},{field:"player2_id",desc:"individual player 2"},{field:"player3_id",desc:"individual player 3"},{field:"player4_id",desc:"individual player 4"},{field:"pair1_player1_id",desc:"pair 1 player 1"},{field:"pair1_player2_id",desc:"pair 1 player 2"},{field:"pair2_player1_id",desc:"pair 2 player 1"},{field:"pair2_player2_id",desc:"pair 2 player 2"},{field:"sitting_player_id",desc:"sitting player"}];for(const r of n){const{error:e,count:t}=await sr.from("match_fixtures").update({[r.field]:p.id}).eq(r.field,h.id);e&&console.warn("Warning updating ".concat(r.desc,":"),e)}const{error:a}=await sr.from("match_results").update({submitted_by:p.id}).eq("submitted_by",h.id);a&&console.warn("Warning updating results:",a);const{error:s,count:i}=await sr.from("availability").update({player_id:p.id}).eq("player_id",h.id);s&&console.warn("Warning updating availability:",s);const{error:c,count:d}=await sr.from("score_challenges").update({challenger_id:p.id}).eq("challenger_id",h.id);c&&console.warn("Warning updating score challenges:",c);const{error:g,count:y}=await sr.from("score_conflicts").update({conflicting_user_id:p.id}).eq("conflicting_user_id",h.id);g&&console.warn("Warning updating score conflicts:",g);const{data:v}=await sr.from("match_fixtures").select("id").or("player1_id.eq.".concat(h.id,",player2_id.eq.").concat(h.id,",player3_id.eq.").concat(h.id,",player4_id.eq.").concat(h.id,",pair1_player1_id.eq.").concat(h.id,",pair1_player2_id.eq.").concat(h.id,",pair2_player1_id.eq.").concat(h.id,",pair2_player2_id.eq.").concat(h.id,",sitting_player_id.eq.").concat(h.id));v&&v.length>0&&console.warn("Warning: ".concat(v.length," match fixtures still reference the old player"));const{error:x}=await sr.from("profiles").delete().eq("id",h.id);x?(console.warn("Could not delete old profile (this is OK - merge completed successfully):",x),l.success("Successfully merged ".concat(h.name," with ").concat(p.name,"! Note: Old profile preserved due to database constraints."))):l.success("Successfully merged and removed ".concat(h.name,"! All data now belongs to ").concat(p.name,".")),m(null),f(null),u(""),r(!1),o&&o()}catch(e){console.error("\u274c Merge failed:",e),l.error("Merge failed: ".concat(e.message))}finally{y(!1)}}else l.error("Please select both a CSV player and a real user to merge")},disabled:!h||!p||g,className:"px-4 py-2 bg-[#5D1F1F] text-white rounded-md hover:bg-[#4A1818] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Merging...":"Merge Players"})]})]})]})}):null},On=fr("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Rn=e=>{let{showModal:t,setShowModal:r,allUsers:a,currentUser:s,updateUserRole:i}=e;const[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(null);if(!t)return null;const u=a.filter(e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase()))}),h=async(e,t,r)=>{if(e===s.id&&"admin"!==t)return void alert("You cannot demote yourself from admin status.");const n="admin"===t?"promote":"demote";if(window.confirm("Are you sure you want to ".concat(n," ").concat(r," ").concat("admin"===t?"to admin":"to player","?"))){d(e);try{const r=await i(e,t);null!==r&&void 0!==r&&r.success||alert("Failed to update user role. Please try again.")}catch(a){console.error("Error updating user role:",a),alert("Error updating user role: "+a.message)}finally{d(null)}}};return(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[(0,yr.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"User Role Management"}),(0,yr.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Promote users to admin or demote them to players"})]}),(0,yr.jsxs)("div",{className:"p-6",children:[(0,yr.jsx)("div",{className:"mb-6",children:(0,yr.jsx)("input",{type:"text",placeholder:"Search users by name or email...",value:o,onChange:e=>l(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent"})}),(0,yr.jsx)("div",{className:"overflow-y-auto max-h-96",children:0===u.length?(0,yr.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your search."}):(0,yr.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,yr.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"flex-shrink-0",children:"admin"===e.role?(0,yr.jsx)(xn,{className:"h-6 w-6 text-blue-600"}):(0,yr.jsx)(On,{className:"h-6 w-6 text-gray-400"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("div",{className:"font-medium text-gray-900",children:[e.name,e.id===s.id&&(0,yr.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"You"})]}),(0,yr.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,yr.jsxs)("div",{className:"text-xs text-gray-400",children:["Current role:",(0,yr.jsx)("span",{className:"ml-1 font-semibold ".concat("admin"===e.role?"text-blue-600":"text-gray-600"),children:"admin"===e.role?"Admin":"Player"})]})]})]}),(0,yr.jsx)("div",{className:"flex space-x-2",children:"admin"!==e.role?(0,yr.jsx)("button",{onClick:()=>h(e.id,"admin",e.name),disabled:c===e.id,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c===e.id?"Promoting...":"Promote to Admin"}):(0,yr.jsx)("button",{onClick:()=>h(e.id,"player",e.name),disabled:c===e.id||e.id===s.id,className:"px-4 py-2 bg-orange-600 text-white text-sm rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c===e.id?"Demoting...":"Demote to Player"})})]},e.id))})})]}),(0,yr.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,yr.jsx)("button",{onClick:()=>r(!1),className:"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Close"})})]})})},In=e=>{let{showModal:t,setShowModal:r,allUsers:a,ladderPlayers:s,addToLadder:i}=e;const[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(null);if(!t)return null;const u=a.filter(e=>{var t,r;return"approved"===e.status&&!s.some(t=>t.id===e.id)&&((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase())))}),h=s.length+1;return(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[(0,yr.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Add Players to Ladder"}),(0,yr.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Add approved users to the current season's ladder with their starting rank"})]}),(0,yr.jsxs)("div",{className:"p-6",children:[(0,yr.jsx)("div",{className:"mb-6",children:(0,yr.jsx)("input",{type:"text",placeholder:"Search players by name or email...",value:o,onChange:e=>l(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent"})}),(0,yr.jsx)("div",{className:"overflow-y-auto max-h-96",children:0===u.length?(0,yr.jsx)("div",{className:"text-center py-8 text-gray-500",children:o?"No players found matching your search.":"No approved players waiting to join ladder."}):(0,yr.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,yr.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"flex-shrink-0",children:(0,yr.jsx)(Lr,{className:"h-6 w-6 text-gray-400"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,yr.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,yr.jsxs)("div",{className:"text-xs text-gray-400",children:["Status: ",(0,yr.jsx)("span",{className:"text-green-600 font-semibold",children:"Approved"})]})]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(Rr,{className:"h-4 w-4 text-yellow-500"}),(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Rank:"}),(0,yr.jsx)("select",{id:"rank-".concat(e.id),defaultValue:h,className:"border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",children:Array.from({length:h},(e,t)=>(0,yr.jsx)("option",{value:t+1,children:t+1},t+1))})]}),(0,yr.jsx)("button",{onClick:()=>(async e=>{const t=document.getElementById("rank-".concat(e)).value;if(t){d(e);try{const r=await i(e,t);null!==r&&void 0!==r&&r.success||alert("Failed to add player to ladder. Please try again.")}catch(r){console.error("Error adding to ladder:",r),alert("Error adding player to ladder: "+r.message)}finally{d(null)}}else alert("Please select a rank for the player.")})(e.id,e.name),disabled:c===e.id,className:"px-4 py-2 bg-[#5D1F1F] text-white text-sm rounded-md hover:bg-[#4A1818] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c===e.id?"Adding...":"Add to Ladder"})]})]},e.id))})}),s.length>0&&(0,yr.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,yr.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Current Ladder Status:"}),(0,yr.jsxs)("p",{className:"text-sm text-blue-700",children:[s.length," players currently on the ladder. New players will be added at rank ",h," by default, but you can choose any rank."]})]})]}),(0,yr.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,yr.jsx)("button",{onClick:()=>r(!1),className:"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Close"})})]})})},Dn=e=>{let{showModal:t,setShowModal:r,seasons:a,selectedSeason:s,deleteSeason:i}=e;const[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)("");if(!t)return null;const m=a.find(e=>e.id===u),p=m?"DELETE ".concat(m.name):"";return(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,yr.jsxs)("div",{className:"p-6 border-b border-red-200 bg-red-50",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"bg-red-100 p-2 rounded-full",children:(0,yr.jsx)(jn,{className:"w-6 h-6 text-red-600"})}),(0,yr.jsx)("h3",{className:"text-xl font-semibold text-red-900",children:"\u26a0\ufe0f Delete Season"})]}),(0,yr.jsx)("button",{onClick:()=>r(!1),className:"text-red-400 hover:text-red-600 text-2xl font-bold",children:"\xd7"})]}),(0,yr.jsx)("p",{className:"text-sm text-red-700 mt-2 font-medium",children:"\ud83d\udea8 DANGER: This action will permanently delete all season data and cannot be undone!"})]}),(0,yr.jsxs)("div",{className:"p-6 overflow-y-auto max-h-96",children:[(0,yr.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)(jn,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-red-900 mb-2",children:"This will permanently delete:"}),(0,yr.jsxs)("ul",{className:"text-sm text-red-800 space-y-1",children:[(0,yr.jsx)("li",{children:"\u2022 All matches and match fixtures for the season"}),(0,yr.jsx)("li",{children:"\u2022 All match results and scores"}),(0,yr.jsx)("li",{children:"\u2022 All player rankings and ladder positions"}),(0,yr.jsx)("li",{children:"\u2022 All player availability records"}),(0,yr.jsx)("li",{children:"\u2022 The entire season record and history"})]}),(0,yr.jsx)("p",{className:"text-sm text-red-900 font-semibold mt-3",children:"\u26a0\ufe0f Users will NOT be deleted, only their season-specific data"})]})]})}),(0,yr.jsxs)("div",{className:"mb-6",children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Select Season to Delete:"}),(0,yr.jsxs)("select",{value:u,onChange:e=>{h(e.target.value),l("")},className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,yr.jsx)("option",{value:"",children:"Choose a season..."}),a.map(e=>(0,yr.jsxs)("option",{value:e.id,children:[e.name," (",e.status,") - Started: ",new Date(e.start_date).toLocaleDateString("en-GB"),e.id===(null===s||void 0===s?void 0:s.id)?" [CURRENTLY SELECTED]":""]},e.id))]})]}),u&&(0,yr.jsxs)("div",{className:"mb-6",children:[(0,yr.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Type exactly: ",(0,yr.jsx)("span",{className:"text-red-600 font-mono",children:p})]}),(0,yr.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:p,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent font-mono"}),o&&o!==p&&(0,yr.jsxs)("p",{className:"text-red-600 text-sm mt-1",children:["\u274c Text doesn't match. Please type exactly: ",p]}),o===p&&(0,yr.jsx)("p",{className:"text-green-600 text-sm mt-1",children:"\u2705 Confirmation text matches"})]}),m&&(0,yr.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yr.jsx)(Ir,{className:"w-4 h-4 text-gray-600"}),(0,yr.jsx)("h4",{className:"font-medium text-gray-900",children:"Season to be deleted:"})]}),(0,yr.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Name:"})," ",m.name]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Status:"})," ",m.status]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Started:"})," ",new Date(m.start_date).toLocaleDateString("en-GB")]}),m.end_date&&(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Ended:"})," ",new Date(m.end_date).toLocaleDateString("en-GB")]})]})]})]}),(0,yr.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,yr.jsxs)("div",{className:"flex space-x-3",children:[(0,yr.jsxs)("button",{onClick:async()=>{if(!u)return void alert("Please select a season to delete.");const e=a.find(e=>e.id===u);if(!e)return void alert("Selected season not found.");const t="DELETE ".concat(e.name);if(o!==t)return void alert("Please type exactly: ".concat(t));if(!window.confirm('\u26a0\ufe0f FINAL WARNING: This will permanently delete "'.concat(e.name,'" and ALL associated data:\n\n')+"\u2022 All matches and results for this season\n\u2022 All player rankings for this season\n\u2022 All availability records for this season\n\u2022 The entire season record\n\nThis action CANNOT be undone!\n\nClick OK to proceed with deletion."))return;if(window.confirm('\ud83d\udea8 LAST CHANCE: You are about to permanently delete season "'.concat(e.name,'".\n\n')+"This will remove ALL DATA for this season from the database forever.\n\nAre you absolutely certain you want to continue?")){d(!0);try{const t=await i(e.id,e.name);if(null!==t&&void 0!==t&&t.success)alert('\u2705 Season "'.concat(e.name,'" has been permanently deleted.')),r(!1),l(""),h("");else{var n,s;console.error("Season deletion failed:",null===t||void 0===t?void 0:t.error);const e=(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)||(null===t||void 0===t||null===(s=t.error)||void 0===s?void 0:s.details)||(null===t||void 0===t?void 0:t.error)||"Unknown error";alert("\u274c Failed to delete season: ".concat(e,"\n\nPlease try again or contact support."))}}catch(c){console.error("Error deleting season:",c),alert("\u274c Error deleting season: "+c.message)}finally{d(!1)}}},disabled:c||!u||o!==p,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-2",children:[(0,yr.jsx)(wn,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:c?"Deleting Season...":"DELETE SEASON PERMANENTLY"})]}),(0,yr.jsx)("button",{onClick:()=>{r(!1),l(""),h("")},disabled:c,className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-md hover:bg-gray-400 disabled:opacity-50 transition-colors",children:"Cancel"})]})})]})})},Ln=fr("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Mn=e=>{let{showModal:t,setShowModal:r,allUsers:a,currentUser:s,deleteUser:i}=e;const[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)("");if(!t)return null;const m=a.filter(e=>"approved"===e.status&&e.id!==s.id&&e.name&&e.email),p=m.find(e=>e.id===u),f=p?"DELETE ".concat(p.name):"";return(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,yr.jsxs)("div",{className:"p-6 border-b border-orange-200 bg-orange-50",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"bg-orange-100 p-2 rounded-full",children:(0,yr.jsx)(jn,{className:"w-6 h-6 text-orange-600"})}),(0,yr.jsx)("h3",{className:"text-xl font-semibold text-orange-900",children:"\u26a0\ufe0f Delete User"})]}),(0,yr.jsx)("button",{onClick:()=>r(!1),className:"text-orange-400 hover:text-orange-600 text-2xl font-bold",children:"\xd7"})]}),(0,yr.jsx)("p",{className:"text-sm text-orange-700 mt-2 font-medium",children:"\ud83d\udea8 This will suspend the user account but preserve their match history"})]}),(0,yr.jsxs)("div",{className:"p-6 overflow-y-auto max-h-96",children:[(0,yr.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)(On,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"What happens when you delete a user:"}),(0,yr.jsxs)("div",{className:"text-sm text-blue-800 space-y-2",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-orange-700",children:"SUSPENDED:"}),(0,yr.jsxs)("ul",{className:"list-disc list-inside ml-2",children:[(0,yr.jsx)("li",{children:"Account status changed to 'suspended'"}),(0,yr.jsx)("li",{children:"Removed from all current seasons"}),(0,yr.jsx)("li",{children:"Name and email anonymized"}),(0,yr.jsx)("li",{children:"No longer available for ladder selection"}),(0,yr.jsx)("li",{children:"Future availability cleared"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-green-700",children:"PRESERVED:"}),(0,yr.jsxs)("ul",{className:"list-disc list-inside ml-2",children:[(0,yr.jsx)("li",{children:"All match results and game history"}),(0,yr.jsx)("li",{children:"Historical statistics and records"}),(0,yr.jsx)("li",{children:"Past availability data"}),(0,yr.jsx)("li",{children:"Match fixtures they participated in"})]})]})]})]})]})}),(0,yr.jsxs)("div",{className:"mb-6",children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Select User to Delete:"}),(0,yr.jsxs)("select",{value:u,onChange:e=>{h(e.target.value),l("")},className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,yr.jsx)("option",{value:"",children:"Choose a user..."}),m.map(e=>(0,yr.jsxs)("option",{value:e.id,children:[e.name," (",e.email,") - Role: ",e.role||"player"]},e.id))]}),0===m.length&&(0,yr.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"No users available for deletion. You cannot delete yourself or users that are already deleted."})]}),u&&(0,yr.jsxs)("div",{className:"mb-6",children:[(0,yr.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Type exactly: ",(0,yr.jsx)("span",{className:"text-orange-600 font-mono",children:f})]}),(0,yr.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:f,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono"}),o&&o!==f&&(0,yr.jsxs)("p",{className:"text-orange-600 text-sm mt-1",children:["\u274c Text doesn't match. Please type exactly: ",f]}),o===f&&(0,yr.jsx)("p",{className:"text-green-600 text-sm mt-1",children:"\u2705 Confirmation text matches"})]}),p&&(0,yr.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yr.jsx)(Lr,{className:"w-4 h-4 text-gray-600"}),(0,yr.jsx)("h4",{className:"font-medium text-gray-900",children:"User to be deactivated:"})]}),(0,yr.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Name:"})," ",p.name]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Email:"})," ",p.email]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Role:"})," ",p.role||"player"]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Status:"})," ",p.status]})]})]}),(0,yr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:(0,yr.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,yr.jsx)("strong",{children:"\u26a0\ufe0f Note:"})," This action suspends the user account rather than permanently deleting it. This ensures match history and statistics remain intact for reporting purposes."]})})]}),(0,yr.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,yr.jsxs)("div",{className:"flex space-x-3",children:[(0,yr.jsxs)("button",{onClick:async()=>{if(!u)return void alert("Please select a user to delete.");const e=m.find(e=>e.id===u);if(!e)return void alert("Selected user not found.");const t="DELETE ".concat(e.name);if(o!==t)return void alert("Please type exactly: ".concat(t));if(!window.confirm('\u26a0\ufe0f SUSPEND USER: "'.concat(e.name,'" (').concat(e.email,")\n\n")+"This will:\n\u2022 Suspend their account (status: suspended)\n\u2022 Remove them from all current seasons\n\u2022 Make them unavailable for future ladder selection\n\u2022 Anonymize their personal information\n\nPRESERVED:\n\u2022 All match history and results\n\u2022 Historical game data for statistics\n\nThis action CANNOT be easily undone!\n\nClick OK to proceed with user suspension."))return;if(window.confirm('\ud83d\udea8 FINAL CONFIRMATION: Suspend "'.concat(e.name,'"?\n\n')+"Their account will be suspended and they will be removed from the app,\nbut their match history will be preserved.\n\nAre you absolutely certain you want to continue?")){d(!0);try{const t=await i(e.id,e.name,e.email);null!==t&&void 0!==t&&t.success?(alert('\u2705 User "'.concat(e.name,'" has been suspended successfully.\nTheir match history has been preserved.')),r(!1),l(""),h("")):alert("\u274c Failed to suspend user. Please try again or contact support.")}catch(n){console.error("Error suspending user:",n),alert("\u274c Error suspending user: "+n.message)}finally{d(!1)}}},disabled:c||!u||o!==f||0===m.length,className:"flex-1 bg-orange-600 text-white py-3 px-4 rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-2",children:[(0,yr.jsx)(Ln,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:c?"Suspending User...":"SUSPEND USER"})]}),(0,yr.jsx)("button",{onClick:()=>{r(!1),l(""),h("")},disabled:c,className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-md hover:bg-gray-400 disabled:opacity-50 transition-colors",children:"Cancel"})]})})]})})},Fn=fr("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Un=fr("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),zn=e=>{try{const t=e.trim().split("\n").map(e=>e.trim()).filter(e=>e);if(t.length<5)throw new Error("Not enough lines in the text - please paste the complete match data");const r=t[0],{homeTeam:n,awayTeam:a}=Wn(r),{matchDate:s,matchTime:i}=qn(t[1]),{homeTeamPairs:o,awayTeamPairs:l,scoringMatrix:c}=Bn(t.slice(2),n,a);return{success:!0,data:{matchDate:s,matchTime:i,homeTeam:n,awayTeam:a,homeTeamPairs:o,awayTeamPairs:l,scoringMatrix:c,source:"text"}}}catch(t){return console.error("Error parsing league match text:",t),{success:!1,error:t.message,data:null}}},Wn=e=>{const t=e.replace(/^Fixtures\s*-\s*/,"").match(/^(.+?)\s+v[s]?\s+(.+)$/i);if(t)return{homeTeam:t[1].trim(),awayTeam:t[2].trim()};throw new Error("Could not parse team names from header")},qn=e=>{const t=e.match(/(\d{1,2}\s+\w+\s+\d{4})\s*-\s*(\d{1,2}:\d{2})/);if(!t)throw new Error("Could not parse date and time");const[,r,n]=t,a=new Date(r);if(isNaN(a.getTime()))throw new Error("Invalid date format");return{matchDate:a.toISOString().split("T")[0],matchTime:n}},Bn=(e,t,r)=>{let n=-1;for(let o=0;o<e.length;o++)if(e[o].trim()===r){n=o;break}if(-1===n)throw new Error("Could not find away team header (".concat(r,")"));const{awayTeamPairs:a,homeTeamPairs:s,scoringMatrix:i}=Hn(e,n,t,r);return{homeTeamPairs:s,awayTeamPairs:a,scoringMatrix:i}},Hn=(e,t,r,n)=>{const a=[],s=[],i=[],o=[];for(let l=t+1;l<e.length;l++){const t=e[l].trim();if(t.match(/\d+\s*-\s*\d+/))break;let n=t;n.startsWith(r)&&(n=n.substring(r.length).trim()),n=n.replace(/GF\s*GA.*$/,"").trim();const a=n.split(/\s{4,}|\t+/).filter(e=>e.trim().length>0);if(a.forEach(e=>{const t=e.trim();t&&t.length>1&&o.push(t)}),0!==a.length||!n||n.includes("GF")||n.includes("GA")||o.push(n),t.includes("GF")&&t.includes("GA"))break}for(let l=0;l<o.length;l+=2)l+1<o.length&&a.push({player1:o[l],player2:o[l+1]});for(let l=0;l<e.length;l++){const t=e[l].trim(),r=/(\d+)\s*-\s*(\d+)/g,n=[...t.matchAll(r)];if(n.length>=3){const r=l>0?e[l-1].trim():"",a=t.split(/\d+\s*-\s*\d+/)[0].trim();if(r&&a){s.push({player1:r,player2:a});const e=n.slice(0,3).map(e=>({homeScore:parseInt(e[1]),awayScore:parseInt(e[2])}));i.push(e)}}}return{awayTeamPairs:a,homeTeamPairs:s,scoringMatrix:i}},Vn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e||!t||0===t.length)return[];const n=r.find(t=>t.parsed_name.toLowerCase()===e.toLowerCase()),a=e.charAt(0).toLowerCase();return t.filter(e=>e.name.charAt(0).toLowerCase()===a).map(t=>({player:t,score:85,isExact:t.name.toLowerCase()===e.toLowerCase(),isCached:n&&n.matched_player_id===t.id})).sort((e,t)=>e.isCached&&!t.isCached?-1:!e.isCached&&t.isCached?1:e.isExact&&!t.isExact?-1:!e.isExact&&t.isExact?1:e.player.name.localeCompare(t.player.name))},Gn=async e=>{if(!e)return[];try{const{data:t,error:r}=await e.from("player_match_cache").select("\n        parsed_name,\n        matched_player_id,\n        profiles:matched_player_id(id, name, email)\n      ");if(r)throw r;return t||[]}catch(t){return console.error("Failed to fetch cached player matches:",t),[]}},Kn=async(e,t,r,n)=>{if(!e||!t||!r)return!1;try{const{error:a}=await e.from("player_match_cache").upsert({parsed_name:t,matched_player_id:r,confirmed_by:n,updated_at:(new Date).toISOString()},{onConflict:"parsed_name,matched_player_id"});if(a)throw a;return!0}catch(a){return console.error("Failed to save cached player match:",a),!1}},$n=e=>{if(!e)return{cawoodPlayers:[],opponentPlayers:[],opponentClub:null};const{homeTeam:t,awayTeam:r,homeTeamPairs:n,awayTeamPairs:a}=e;let s=[],i=[],o=null;const l=t&&t.toLowerCase().includes("cawood");r&&r.toLowerCase().includes("cawood");return l?(o=r,s=(null===n||void 0===n?void 0:n.flatMap(e=>[e.player1,e.player2]))||[],i=(null===a||void 0===a?void 0:a.flatMap(e=>[e.player1,e.player2]))||[]):(o=t,s=(null===a||void 0===a?void 0:a.flatMap(e=>[e.player1,e.player2]))||[],i=(null===n||void 0===n?void 0:n.flatMap(e=>[e.player1,e.player2]))||[]),s=[...new Set(s.filter(e=>e&&e.trim()))],i=[...new Set(i.filter(e=>e&&e.trim()))],{cawoodPlayers:s,opponentPlayers:i,opponentClub:o,cawoodIsHome:l}},Jn=e=>{if(!e)return"unknown@cawood.dummy";const t=e.toLowerCase().replace(/[^a-z\s]/g,"").trim().split(" ").filter(e=>e.length>0).join(".");return"".concat(t,"@cawood.dummy")},Qn=e=>{var t,r;let{isOpen:a,onClose:s,supabase:i,selectedSeason:o}=e;const[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),[p,f]=(0,n.useState)(""),[g,y]=(0,n.useState)("parse"),[v,x]=(0,n.useState)([]),[b,w]=(0,n.useState)([]),[_,j]=(0,n.useState)([]),[N,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a&&(async()=>{if(i)try{const{data:e,error:t}=await i.from("profiles").select("id, name, email").in("role",["player","admin"]).eq("status","approved").order("name");if(t)throw t;x(e||[]);const r=await Gn(i);w(r)}catch(e){console.error("Failed to fetch data:",e)}})()},[a,i]);const E=()=>{c(""),m(null),f(""),y("parse"),j([]),k(null)},P=()=>{E(),s()};return a?(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)(Un,{className:"w-6 h-6 text-blue-600"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"League Match Import"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Import match results by pasting match text data"})]})]}),(0,yr.jsx)("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,yr.jsx)(Sr,{className:"w-6 h-6"})})]}),(0,yr.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["parse"===g&&(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Match Data Text"}),(0,yr.jsxs)("div",{className:"space-y-2",children:[(0,yr.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"Paste the match data here, for example:\n\nFixtures - Market Weighton v Cawood 2\n27 April 2025 - 10:00\n     Cawood 2          \nMarket Weighton    Steven Walter\nNas Shefta    John Best\nMike Brennan    Mark Bottomley\nSteve Caslake    GF    GA\nIan Robson\nAled Edwards    6 - 6    7 - 5    10 - 2    23    13\n...",rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm font-mono",disabled:d}),(0,yr.jsxs)("div",{className:"flex space-x-2",children:[(0,yr.jsx)("button",{onClick:async()=>{u(!0),f(""),m(null);try{if(!l.trim())return void f("Please paste the match text data");const e=zn(l);if(e.success){m(e.data),f("");const t=$n(e.data);k(t);const r=t.cawoodPlayers.map(e=>{const t=Vn(e,v,b),r=b.find(t=>t.parsed_name.toLowerCase()===e.toLowerCase()),n=r?v.find(e=>e.id===r.matched_player_id):null;return{parsedName:e,suggestions:t,selectedMatch:n,createNew:!1,isCachedMatch:!!n,newPlayerData:{name:e,email:Jn(e)}}});j(r),y("match")}else f(e.error||"Failed to parse match text"),m(null)}catch(e){f("Error: ".concat(e.message)),m(null)}finally{u(!1)}},disabled:d||!l.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:d?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,yr.jsx)("span",{children:"Parsing..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(Un,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Parse Text"})]})}),(0,yr.jsx)("button",{onClick:()=>{c("Fixtures - Market Weighton v Cawood 2\n27 April 2025 - 10:00\n     Cawood 2          \nMarket Weighton    Steven Walter\nNas Shefta    John Best\nMike Brennan    Mark Bottomley\nSteve Caslake    GF    GA\nIan Robson\nAled Edwards    6 - 6    7 - 5    10 - 2    23    13\nNick Collins\nStewart Berry    6 - 6    5 - 7    11 - 1    22    14\nKen Bottomer\nKeigan Freeman Hacker    6 - 6    5 - 7    11 - 1    22    14\nMarket Weighton    8.5    3.5    Cawood 2\n67    41")},className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm",disabled:d,children:"Use Example"})]})]}),(0,yr.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Copy and paste the complete match results text from the league website"})]}),p&&(0,yr.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,yr.jsx)(Nr,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-medium text-red-800",children:"Parse Error"}),(0,yr.jsx)("p",{className:"text-sm text-red-700 mt-1",children:p})]})]})}),(()=>{var e,t,r,n;return h?(0,yr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,yr.jsx)(_r,{className:"w-5 h-5 text-green-600"}),(0,yr.jsx)("h3",{className:"font-semibold text-green-800",children:"Match Data Parsed Successfully!"})]}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Match Information"}),(0,yr.jsxs)("div",{className:"text-sm space-y-1",children:[(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Date:"})," ",h.matchDate||"Not found"]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Time:"})," ",h.matchTime||"Not found"]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Home Team:"})," ",h.homeTeam||"Not found"]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Away Team:"})," ",h.awayTeam||"Not found"]})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Data Summary"}),(0,yr.jsxs)("div",{className:"text-sm space-y-1",children:[(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Home Team Pairs:"})," ",(null===(e=h.homeTeamPairs)||void 0===e?void 0:e.length)||0]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Away Team Pairs:"})," ",(null===(t=h.awayTeamPairs)||void 0===t?void 0:t.length)||0]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Scoring Matrix:"})," ",(null===(r=h.scoringMatrix)||void 0===r?void 0:r.length)||0," rows"]})]})]})]}),h.homeTeamPairs&&h.homeTeamPairs.length>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["Home Team Pairs (",h.homeTeam,")"]}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:h.homeTeamPairs.map((e,t)=>(0,yr.jsxs)("div",{className:"bg-white p-2 rounded border",children:[(0,yr.jsxs)("p",{className:"font-medium",children:["Pair ",t+1]}),(0,yr.jsx)("p",{children:e.player1}),(0,yr.jsx)("p",{children:e.player2})]},t))})]}),h.awayTeamPairs&&h.awayTeamPairs.length>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["Away Team Pairs (",h.awayTeam,")"]}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:h.awayTeamPairs.map((e,t)=>(0,yr.jsxs)("div",{className:"bg-white p-2 rounded border",children:[(0,yr.jsxs)("p",{className:"font-medium",children:["Pair ",t+1]}),(0,yr.jsx)("p",{children:e.player1}),(0,yr.jsx)("p",{children:e.player2})]},t))})]}),h.scoringMatrix&&h.scoringMatrix.length>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Scoring Matrix"}),(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsxs)("th",{className:"border border-gray-300 px-2 py-1",children:["Home Pair (",h.homeTeam,")"]}),null===(n=h.awayTeamPairs)||void 0===n?void 0:n.map((e,t)=>(0,yr.jsxs)("th",{className:"border border-gray-300 px-2 py-1",children:["vs ",e.player1," & ",e.player2]},t))]})}),(0,yr.jsx)("tbody",{children:h.scoringMatrix.map((e,t)=>{var r;return(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("td",{className:"border border-gray-300 px-2 py-1 font-medium",children:null!==(r=h.homeTeamPairs)&&void 0!==r&&r[t]?"".concat(h.homeTeamPairs[t].player1," & ").concat(h.homeTeamPairs[t].player2):"Home Pair ".concat(t+1)}),e.map((e,t)=>(0,yr.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-center",children:e?"".concat(e.homeScore,"-").concat(e.awayScore):"No score"},t))]},t)})})]})})]}),(0,yr.jsxs)("details",{className:"mt-4",children:[(0,yr.jsx)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"Show Raw Parsed Data (for debugging)"}),(0,yr.jsx)("pre",{className:"mt-2 p-3 bg-gray-100 text-xs overflow-auto max-h-40 rounded",children:JSON.stringify(h,null,2)})]})]})]}):null})()]}),"match"===g&&(()=>{if(!N||!_.length)return null;const e=(e,t,r)=>{const n=[..._];n[e].newPlayerData[t]=r,j(n)},t=_.every(e=>e.selectedMatch||e.createNew&&e.newPlayerData.name.trim()&&e.newPlayerData.email.trim());return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yr.jsx)(Lr,{className:"w-5 h-5 text-blue-600"}),(0,yr.jsx)("h3",{className:"font-semibold text-blue-800",children:"Player Matching Required"})]}),(0,yr.jsxs)("p",{className:"text-sm text-blue-700",children:["Match the ",N.cawoodPlayers.length," Cawood players from the parsed data with existing users, or create new accounts."]}),(0,yr.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[(0,yr.jsx)("strong",{children:"Opponent club:"})," ",N.opponentClub," (",N.opponentPlayers.length," players)"]})]}),(0,yr.jsx)("div",{className:"space-y-4",children:_.map((t,r)=>(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yr.jsxs)("h4",{className:"font-medium text-gray-900",children:["Parsed Name: ",(0,yr.jsx)("span",{className:"text-blue-600",children:t.parsedName}),t.isCachedMatch&&(0,yr.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"\u2713 Previously Confirmed"})]}),(0,yr.jsxs)("div",{className:"text-sm text-gray-500",children:[t.suggestions.length," player",1!==t.suggestions.length?"s":"",' starting with "',t.parsedName.charAt(0).toUpperCase(),'"']})]}),t.suggestions.length>0&&(0,yr.jsxs)("div",{className:"mb-4",children:[(0,yr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:['Players starting with "',t.parsedName.charAt(0).toUpperCase(),'":']}),(0,yr.jsx)("div",{className:"space-y-2",children:t.suggestions.map((e,n)=>{var a;return(0,yr.jsxs)("label",{className:"flex items-center space-x-3 p-2 border rounded hover:bg-gray-50 ".concat(e.isCached?"border-green-300 bg-green-50":""),children:[(0,yr.jsx)("input",{type:"radio",name:"player-".concat(r),checked:(null===(a=t.selectedMatch)||void 0===a?void 0:a.id)===e.player.id,onChange:()=>((e,t)=>{const r=[..._];r[e].selectedMatch=t,r[e].createNew=!1,j(r)})(r,e.player),disabled:t.createNew,className:"text-blue-600"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("div",{className:"font-medium",children:e.player.name}),(0,yr.jsx)("div",{className:"text-sm text-gray-500",children:e.player.email})]}),(0,yr.jsxs)("div",{className:"text-right",children:[e.isCached&&(0,yr.jsx)("div",{className:"text-sm font-medium text-green-600",children:"\u2713 Cached"}),e.isExact&&!e.isCached&&(0,yr.jsx)("div",{className:"text-sm font-medium text-blue-600",children:"Exact match"})]})]},n)})})]}),(0,yr.jsxs)("div",{className:"border-t pt-4",children:[(0,yr.jsxs)("label",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("input",{type:"checkbox",checked:t.createNew,onChange:e=>((e,t)=>{const r=[..._];r[e].createNew=t,t&&(r[e].selectedMatch=null),j(r)})(r,e.target.checked),className:"text-blue-600"}),(0,yr.jsx)("span",{className:"font-medium text-gray-700",children:"Create new user"}),(0,yr.jsx)(Fn,{className:"w-4 h-4 text-gray-400"})]}),t.createNew&&(0,yr.jsxs)("div",{className:"ml-6 space-y-3 bg-gray-50 p-3 rounded",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,yr.jsx)("input",{type:"text",value:t.newPlayerData.name,onChange:t=>e(r,"name",t.target.value),className:"mt-1 w-full px-3 py-1 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,yr.jsx)("input",{type:"email",value:t.newPlayerData.email,onChange:t=>e(r,"email",t.target.value),className:"mt-1 w-full px-3 py-1 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Dummy email format recommended"})]})]})]})]},r))}),(0,yr.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,yr.jsx)("button",{onClick:()=>y("parse"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200",children:"\u2190 Back to Parsing"}),(0,yr.jsx)("button",{onClick:()=>y("import"),disabled:!t,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Proceed to Import \u2192"})]})]})})(),"import"===g&&(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yr.jsx)(Nr,{className:"w-5 h-5 text-yellow-600"}),(0,yr.jsx)("h3",{className:"font-semibold text-yellow-800",children:"Ready to Import"})]}),(0,yr.jsxs)("div",{className:"text-sm text-yellow-700 space-y-2",children:[(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Season:"})," ",null===o||void 0===o?void 0:o.name," (",null===o||void 0===o?void 0:o.season_type,")"]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Match:"})," ",null===h||void 0===h?void 0:h.homeTeam," vs ",null===h||void 0===h?void 0:h.awayTeam]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Date:"})," ",null===h||void 0===h?void 0:h.matchDate]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Cawood Team:"})," ",null!==N&&void 0!==N&&N.cawoodIsHome?"Home":"Away"," (",(null===N||void 0===N||null===(t=N.cawoodPlayers)||void 0===t?void 0:t.length)||0," players)"]}),(0,yr.jsxs)("p",{children:[(0,yr.jsx)("strong",{children:"Opponent:"})," ",null===N||void 0===N?void 0:N.opponentClub," (",(null===N||void 0===N||null===(r=N.opponentPlayers)||void 0===r?void 0:r.length)||0," players)"]})]})]}),(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsx)("button",{onClick:()=>y("match"),disabled:d,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",children:"\u2190 Back to Matching"}),(0,yr.jsx)("button",{onClick:async()=>{if(o&&N&&_&&h&&i)if("league"===o.season_type){u(!0),f("");try{var e,t;const{matchDate:a,homeTeam:s,awayTeam:l,scoringMatrix:c}=h,{cawoodPlayers:d,opponentPlayers:u,opponentClub:m,cawoodIsHome:p}=N,f=(p?s:l).toLowerCase().includes("2")?"2nds":"1sts",{data:g}=await i.from("matches").select("week_number").eq("season_id",o.id).order("week_number",{ascending:!1}).limit(1),v=(null===g||void 0===g?void 0:g.length)>0?(g[0].week_number||0)+1:1,{data:x,error:b}=await i.from("matches").insert({season_id:o.id,week_number:v,match_date:a}).select().single();if(b)throw b;const w={};for(const e of u){const{data:t}=await i.from("external_players").select("id").eq("name",e).eq("club_name",m).maybeSingle();if(t)w[e]=t.id;else{const{data:t,error:r}=await i.from("external_players").insert({name:e,club_name:m}).select("id").single();if(r)throw r;w[e]=t.id}}const j={};for(const e of _)if(e.createNew&&e.newPlayerData.name.trim()){const{data:t,error:r}=await i.from("profiles").insert({name:e.newPlayerData.name,email:e.newPlayerData.email,status:"approved",role:"player"}).select("id").single();if(r)throw r;j[e.parsedName]=t.id}else e.selectedMatch&&(j[e.parsedName]=e.selectedMatch.id);const k=Object.values(j);if(0===k.length)throw new Error("No Cawood players found or created");const{data:S,error:E}=await i.from("match_fixtures").insert({match_id:x.id,court_number:1,game_number:1,player1_id:k[0],player2_id:k[1]||k[0],player3_id:k[2]||k[0],player4_id:k[3]||k[0],match_type:"league",team:f,opponent_club:m}).select().single();if(E)throw E;const P=p?h.homeTeamPairs:h.awayTeamPairs,T=p?h.awayTeamPairs:h.homeTeamPairs;let A=1;for(let e=0;e<Math.min(P.length,3);e++){const t=P[e];for(let a=0;a<Math.min(T.length,3);a++){var r,n;const s=T[a],o=p?null===(r=c[e])||void 0===r?void 0:r[a]:null===(n=c[a])||void 0===n?void 0:n[e];if(o){const e=p?o.homeScore:o.awayScore,r=p?o.awayScore:o.homeScore,{error:n}=await i.from("league_match_rubbers").insert({match_fixture_id:S.id,rubber_number:A,cawood_player1_id:j[t.player1],cawood_player2_id:j[t.player2],opponent_player1_id:w[s.player1],opponent_player2_id:w[s.player2],cawood_games_won:e,opponent_games_won:r});if(n)throw n;A++}}}const O=null===i||void 0===i||null===(e=i.auth)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id;for(const e of _)!e.selectedMatch||e.createNew||e.isCachedMatch||await Kn(i,e.parsedName,e.selectedMatch.id,O);C(!0),y("success")}catch(a){console.error("Import error:",a),f("Import failed: ".concat(a.message))}finally{u(!1)}}else f("League matches can only be imported to league seasons. Please select a league season.");else f("Missing required data for import")},disabled:d||"league"!==(null===o||void 0===o?void 0:o.season_type),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:d?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,yr.jsx)("span",{children:"Importing..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(_r,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Import to Database"})]})})]})]}),"success"===g&&(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,yr.jsx)(_r,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),(0,yr.jsx)("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Import Successful!"}),(0,yr.jsx)("p",{className:"text-green-700 mb-4",children:"League match has been imported to the database. All players, rubbers, and results have been saved."}),(0,yr.jsxs)("div",{className:"space-y-2 text-sm text-green-600",children:[(0,yr.jsx)("p",{children:"\u2713 Match record created"}),(0,yr.jsx)("p",{children:"\u2713 External players added"}),(0,yr.jsx)("p",{children:"\u2713 League rubbers recorded"}),(0,yr.jsx)("p",{children:"\u2713 Stats will be updated in profiles"})]})]}),(0,yr.jsxs)("div",{className:"mt-6 space-x-3",children:[(0,yr.jsx)("button",{onClick:E,className:"px-4 py-2 text-blue-600 border border-blue-600 rounded hover:bg-blue-50",children:"Import Another Match"}),(0,yr.jsx)("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})]})]}),(0,yr.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:(0,yr.jsxs)("div",{className:"flex justify-end space-x-3",children:[h&&"parse"===g&&(0,yr.jsx)("button",{onClick:E,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Parse Another URL"}),(0,yr.jsx)("button",{onClick:P,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Close"})]})})]})}):null},Yn=e=>{let{users:t,ladderPlayers:r=[],currentUser:a,currentSeason:s,activeSeason:i,approveUser:o,updateUserRole:l,addToLadder:c,fetchUsers:d,setPlayerAvailability:u,getPlayerAvailability:h,getAvailabilityStats:m,clearOldMatches:p,deleteSeason:f,deleteUser:g,matchFixtures:y,matchResults:v,seasonActions:x,selectedSeason:b,seasons:w,supabase:_}=e;const[j,N]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[C,E]=(0,n.useState)(""),[P,T]=(0,n.useState)(""),[A,O]=(0,n.useState)("ladder"),[R,I]=(0,n.useState)(!1),[D,L]=(0,n.useState)(!1),[M,F]=(0,n.useState)(!1),[U,z]=(0,n.useState)(!1),[W,q]=(0,n.useState)(!1),[B,H]=(0,n.useState)(!1);return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,yr.jsx)(En,{currentUser:a,currentSeason:s,onDataRefresh:()=>{d&&d(),window.dispatchEvent(new CustomEvent("refreshMatchData"))}}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Pending Approvals"}),t.filter(e=>"pending"===e.status).length>0?(0,yr.jsx)("div",{className:"space-y-3",children:t.filter(e=>"pending"===e.status).map(e=>(0,yr.jsxs)("div",{className:"flex justify-between items-center p-3 border border-gray-200 rounded",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-medium",children:e.name}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,yr.jsx)("button",{onClick:()=>(async e=>{N(!0),await o(e),N(!1)})(e.id),disabled:j,className:"bg-[#5D1F1F] text-white px-4 py-3 rounded text-sm hover:bg-[#4A1818] disabled:opacity-50 min-h-[44px] min-w-[44px] flex items-center justify-center",style:{touchAction:"manipulation"},children:(0,yr.jsx)(vn,{className:"w-4 h-4"})})]},e.id))}):(0,yr.jsx)("p",{className:"text-gray-500",children:"No pending approvals"})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Admin Tools"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Quick access to administrative functions"}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"border border-green-200 rounded-lg p-4 hover:bg-green-50 transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-green-100 p-2 rounded-full",children:(0,yr.jsx)(Ir,{className:"w-5 h-5 text-green-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-gray-900",children:"Create Season"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:"Start new ladder/league season"})]})]}),(0,yr.jsx)("button",{onClick:()=>S(!0),disabled:j,className:"w-full bg-green-600 text-white px-3 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors text-sm",children:"Create New Season"})]}),"active"===(null===i||void 0===i?void 0:i.status)&&(0,yr.jsxs)("div",{className:"border border-orange-200 rounded-lg p-4 hover:bg-orange-50 transition-colors bg-orange-50",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-orange-100 p-2 rounded-full",children:(0,yr.jsx)(Ir,{className:"w-5 h-5 text-orange-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-gray-900",children:"Complete Season"}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["End: ",i.name]})]})]}),(0,yr.jsx)("button",{onClick:async()=>{if(!window.confirm('Are you sure you want to complete the current season "'.concat(null===s||void 0===s?void 0:s.name,'"? This action cannot be undone.')))return;N(!0);(await x.completeSeason(s.id)).success&&alert("Season completed successfully!"),N(!1)},disabled:j,className:"w-full bg-orange-600 text-white px-3 py-2 rounded-md hover:bg-orange-700 disabled:opacity-50 transition-colors text-sm",children:"Complete Season"})]}),(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-blue-100 p-2 rounded-full",children:(0,yr.jsx)(xn,{className:"w-5 h-5 text-blue-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-gray-900",children:"User Roles"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:"Promote/demote admins"})]})]}),(0,yr.jsx)("button",{onClick:()=>L(!0),className:"w-full bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm",children:"Manage User Roles"})]}),(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-green-100 p-2 rounded-full",children:(0,yr.jsx)(Lr,{className:"w-5 h-5 text-green-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-gray-900",children:"Add Players"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:"Add users to ladder"})]})]}),(0,yr.jsx)("button",{onClick:()=>F(!0),className:"w-full bg-green-600 text-white px-3 py-2 rounded-md hover:bg-green-700 transition-colors text-sm",children:"Add Players"})]}),(0,yr.jsxs)("div",{className:"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-blue-100 p-2 rounded-full",children:(0,yr.jsx)(bn,{className:"w-5 h-5 text-blue-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-gray-900",children:"League Import"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:"Import match from URL"})]})]}),(0,yr.jsx)("button",{onClick:()=>H(!0),className:"w-full bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm",children:"Import Match"})]}),(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-purple-100 p-2 rounded-full",children:(0,yr.jsx)(Lr,{className:"w-5 h-5 text-purple-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-gray-900",children:"Merge Players"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:"Merge duplicate accounts"})]})]}),(0,yr.jsx)("button",{onClick:()=>I(!0),disabled:j,className:"w-full bg-purple-600 text-white px-3 py-2 rounded-md hover:bg-purple-700 disabled:opacity-50 transition-colors text-sm",children:"Merge Players"})]}),(0,yr.jsxs)("div",{className:"border border-red-200 rounded-lg p-4 hover:bg-red-50 transition-colors bg-red-50",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-red-100 p-2 rounded-full",children:(0,yr.jsx)(wn,{className:"w-5 h-5 text-red-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-red-900",children:"Delete Season"}),(0,yr.jsx)("p",{className:"text-xs text-red-600",children:"\u26a0\ufe0f Permanently remove season"})]})]}),(0,yr.jsx)("button",{onClick:()=>z(!0),disabled:j,className:"w-full bg-red-600 text-white px-3 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors text-sm",children:"Delete Season"})]}),(0,yr.jsxs)("div",{className:"border border-orange-200 rounded-lg p-4 hover:bg-orange-50 transition-colors bg-orange-50",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"bg-orange-100 p-2 rounded-full",children:(0,yr.jsx)(Lr,{className:"w-5 h-5 text-orange-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h4",{className:"font-semibold text-orange-900",children:"Delete User"}),(0,yr.jsx)("p",{className:"text-xs text-orange-600",children:"\u26a0\ufe0f Deactivate user account"})]})]}),(0,yr.jsx)("button",{onClick:()=>q(!0),disabled:j,className:"w-full bg-orange-600 text-white px-3 py-2 rounded-md hover:bg-orange-700 disabled:opacity-50 transition-colors text-sm",children:"Delete User"})]})]})]}),(null===s||void 0===s?void 0:s.matches)&&"league"!==(null===s||void 0===s?void 0:s.season_type)&&(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Set Player Availability"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Set availability on behalf of players"}),s.matches.map(e=>{const t=(e=>{const t=(null===y||void 0===y?void 0:y.filter(t=>t.match_id===e))||[];return 0!==t.length&&(t.filter(e=>null===v||void 0===v?void 0:v.some(t=>t.fixture_id===e.id)).length===t.length&&t.length>0)})(e.id);return(0,yr.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg p-4",children:[(0,yr.jsxs)("h4",{className:"font-medium mb-3",children:["Week ",e.week_number," - ",e.match_date?new Date(e.match_date).toLocaleDateString("en-GB"):"No date set",t&&(0,yr.jsx)("span",{className:"ml-2 text-sm bg-green-100 text-green-800 px-2 py-1 rounded",children:"\u2705 Completed"})]}),t?(0,yr.jsx)("div",{className:"text-sm text-gray-600 italic",children:"All results have been entered for this match. Availability cannot be changed."}):(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.map(t=>{const r=h(t.id,e.id);return(0,yr.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,yr.jsx)("span",{className:"text-sm font-medium",children:t.name}),(0,yr.jsxs)("div",{className:"flex space-x-1",children:[(0,yr.jsx)("button",{onClick:()=>u(e.id,!0,t.id),className:"px-2 py-1 text-xs rounded transition-colors ".concat(!0===r?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-green-100"),children:"\u2713"}),(0,yr.jsx)("button",{onClick:()=>u(e.id,!1,t.id),className:"px-2 py-1 text-xs rounded transition-colors ".concat(!1===r?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-red-100"),children:"\u2717"}),void 0!==r&&(0,yr.jsx)("button",{onClick:()=>u(e.id,void 0,t.id),className:"px-2 py-1 text-xs rounded bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:"Clear"})]})]},t.id)})})]},e.id)})]}),(0,yr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow p-6",children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4 text-red-800",children:"\u26a0\ufe0f Admin Maintenance"}),(0,yr.jsx)("p",{className:"text-sm text-red-600 mb-4",children:"Use these tools carefully - they will delete data permanently!"}),(0,yr.jsxs)("div",{className:"space-y-2",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600",children:"This will reset everything except users (profiles). All seasons, matches, results, availability, and ladder data will be permanently deleted."}),(0,yr.jsx)("button",{onClick:()=>{window.confirm("This will delete ALL seasons, matches, fixtures, results, availability, and ladder data. Only users will be preserved. Are you absolutely sure?")&&window.confirm("\u26a0\ufe0f FINAL WARNING: This action cannot be undone! Click OK to proceed with complete data reset.")&&p()},className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"\ud83d\uddd1\ufe0f Clear All Season & Match Data"})]})]}),(0,yr.jsx)(An,{showModal:R,setShowModal:I,allUsers:t,ladderPlayers:r,selectedSeason:s,onMergeComplete:()=>{d&&d()}}),(0,yr.jsx)(Rn,{showModal:D,setShowModal:L,allUsers:t.filter(e=>"approved"===e.status),currentUser:a,updateUserRole:l}),(0,yr.jsx)(In,{showModal:M,setShowModal:F,allUsers:t,ladderPlayers:r,addToLadder:c}),(0,yr.jsx)(Dn,{showModal:U,setShowModal:z,seasons:w||[],selectedSeason:b,deleteSeason:f}),(0,yr.jsx)(Mn,{showModal:W,setShowModal:q,allUsers:t||[],currentUser:a,deleteUser:g}),k&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,yr.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,yr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Season"})}),(0,yr.jsx)("div",{className:"p-6",children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Season Type"}),(0,yr.jsxs)("select",{value:A,onChange:e=>O(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",children:[(0,yr.jsx)("option",{value:"ladder",children:"Ladder (Internal Competition)"}),(0,yr.jsx)("option",{value:"league",children:"League (External Matches)"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Season Name"}),(0,yr.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),placeholder:"ladder"===A?"e.g., Spring Ladder 2025":"e.g., Winter League 2025",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,yr.jsx)("input",{type:"date",value:P,onChange:e=>T(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent"})]}),"ladder"===A&&(0,yr.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,yr.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,yr.jsx)("strong",{children:"Ladder Season:"})," For internal club competitions with ranking system"]})}),"league"===A&&(0,yr.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-md p-3",children:(0,yr.jsxs)("p",{className:"text-sm text-emerald-700",children:[(0,yr.jsx)("strong",{children:"League Season:"})," For matches against external clubs"]})})]})}),(0,yr.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,yr.jsxs)("div",{className:"flex space-x-3",children:[(0,yr.jsx)("button",{onClick:async()=>{if(!C.trim()||!P)return void alert("Please provide both season name and start date");N(!0);(await x.createNewSeason({name:C.trim(),start_date:P,season_type:A,carryOverPlayers:!1})).success&&(S(!1),E(""),T(""),O("ladder"),alert("New ".concat(A,' season "').concat(C,'" created successfully!'))),N(!1)},disabled:j||!C.trim()||!P,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Create Season"}),(0,yr.jsx)("button",{onClick:()=>{S(!1),E(""),T(""),O("ladder")},disabled:j,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 disabled:opacity-50 transition-colors",children:"Cancel"})]})})]})}),(0,yr.jsx)(Qn,{isOpen:B,onClose:()=>H(!1),supabase:_,selectedSeason:b})]})},Xn=e=>{let{showModal:t,setShowModal:r,newMatchDate:n,setNewMatchDate:a,addMatchToSeason:s}=e;if(!t)return null;const i=(()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(n)})();return(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:(0,yr.jsxs)("div",{className:"p-6",children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Match"}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Match Date"}),(0,yr.jsx)("input",{type:"date",value:n,onChange:e=>a(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5D1F1F] focus:border-transparent",min:i}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["You can schedule matches for today (",(new Date).toLocaleDateString("en-GB"),") or any future date"]})]}),(0,yr.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,yr.jsx)("button",{onClick:()=>s(n),disabled:!n,className:"flex-1 bg-[#5D1F1F] text-white py-2 px-4 rounded-md hover:bg-[#4A1818] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Match"}),(0,yr.jsx)("button",{onClick:()=>{r(!1),a("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})})})},Zn=e=>{let{showModal:t,setShowModal:r,selectedMatch:a,setSelectedMatch:s,submitScore:i,currentUser:o,getMatchScore:l,onChallengeScore:c}=e;const d=Tr(),[u,h]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[f,g]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null),[x,b]=(0,n.useState)(!1),[w,_]=(0,n.useState)(!1),[j,N]=(0,n.useState)("");(0,n.useEffect)(()=>{if(null!==a&&void 0!==a&&a.fixtureId){const e=l(a.fixtureId);v(e),setTimeout(()=>_(!0),100)}else _(!1),v(null)},[a,l]);const k=()=>{r(!1),s(null),h(""),p(""),N(""),b(!1),v(null),_(!1)};if(!t||!a)return null;const S="admin"===(null===o||void 0===o?void 0:o.role)||[a.pair1,a.pair2].flat().includes(null===o||void 0===o?void 0:o.name);return(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:(0,yr.jsxs)("div",{className:"p-6",children:[(0,yr.jsx)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:y?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(br,{className:"w-5 h-5 mr-2 text-blue-500"}),"View/Challenge Score"]}):"Enter Score"}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsx)("div",{children:(0,yr.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[a.pair1.join(" & ")," vs ",a.pair2.join(" & ")]})}),y?(0,yr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,yr.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"Current Score:"}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("p",{className:"text-sm font-medium",children:a.pair1.join(" & ")}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-green-700",children:y.pair1_score})]}),(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("p",{className:"text-sm font-medium",children:a.pair2.join(" & ")}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-green-700",children:y.pair2_score})]})]}),(0,yr.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["Submitted: ",y.created_at?new Date(y.created_at).toLocaleString():"Unknown"]})]}):null,(!y||x)&&S&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.pair1.join(" & ")}),(0,yr.jsx)("input",{type:"number",min:"0",max:"20",value:u,onChange:e=>h(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Games won",disabled:f})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.pair2.join(" & ")}),(0,yr.jsx)("input",{type:"number",min:"0",max:"20",value:m,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Games won",disabled:f})]})]}),x&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Challenge"}),(0,yr.jsx)("textarea",{value:j,onChange:e=>N(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md",rows:"3",placeholder:"Explain why you believe the recorded score is incorrect...",disabled:f})]})]}),(0,yr.jsxs)("div",{className:"flex space-x-3 pt-4",children:[!y&&S?(0,yr.jsx)("button",{onClick:async()=>{if(!u||!m)return Vr.warning(),void d.warning("Please enter scores for both pairs");Vr.impact(),g(!0);try{const e=l(a.fixtureId);if(e&&!y)return d.warning("Someone already submitted a different score: ".concat(e.pair1_score,"-").concat(e.pair2_score,". Page will refresh to show current score."),6e3),void setTimeout(()=>window.location.reload(),2e3);const t=await i(u,m);null!==t&&void 0!==t&&t.conflict?(d.warning("Score conflict! Winning score: ".concat(t.winningScore.pair1_score,"-").concat(t.winningScore.pair2_score,". You can challenge this score if needed."),6e3),setTimeout(()=>window.location.reload(),2e3)):null!==t&&void 0!==t&&t.success&&(Vr.success(),d.success("Score submitted successfully!"),k())}catch(e){Vr.error(),d.error("Error submitting score: ".concat(e.message))}finally{g(!1)}},disabled:f||!u||!m,className:"flex-1 bg-[#5D1F1F] text-white py-2 px-4 rounded-md hover:bg-[#4A1818] disabled:opacity-50",children:f?"Submitting...":"Submit Score"}):w&&y&&S&&!x?(0,yr.jsxs)("button",{onClick:()=>b(!0),className:"flex-1 bg-orange-600 text-white py-2 px-4 rounded-md hover:bg-orange-700 flex items-center justify-center",children:[(0,yr.jsx)(_n,{className:"w-4 h-4 mr-2"}),"Challenge Score"]}):w&&x?(0,yr.jsx)("button",{onClick:async()=>{if(j.trim()){g(!0);try{await c({fixtureId:a.fixtureId,originalResultId:y.id,challengedPair1Score:parseInt(u),challengedPair2Score:parseInt(m),reason:j}),Vr.success(),d.success("Challenge submitted! An admin will review your dispute."),k()}catch(e){Vr.error(),d.error("Error submitting challenge: ".concat(e.message))}finally{g(!1)}}else d.warning("Please provide a reason for challenging this score")},disabled:f||!u||!m||!j.trim(),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 disabled:opacity-50",children:f?"Submitting Challenge...":"Submit Challenge"}):null,(0,yr.jsx)("button",{onClick:k,disabled:f,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 disabled:opacity-50",children:x?"Cancel Challenge":"Close"})]}),!S&&(0,yr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,yr.jsxs)("div",{className:"flex items-center",children:[(0,yr.jsx)(jn,{className:"w-5 h-5 text-yellow-600 mr-2"}),(0,yr.jsx)("p",{className:"text-yellow-800 text-sm",children:"Only players in this match can enter scores or challenge results."})]})}),!1]})]})})})},ea=e=>{let{message:t="Loading..."}=e;const[r,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{const e=setTimeout(()=>{a(!0)},15e3);return()=>clearTimeout(e)},[]),(0,yr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#5D1F1F] to-[#8B3A3A] flex items-center justify-center",children:(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-sm w-full mx-4",children:(0,yr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,yr.jsxs)("div",{className:"relative w-24 h-28 mb-4 flex items-end justify-center",children:[(0,yr.jsx)("div",{className:"absolute bottom-0 w-16 h-4 bg-black bg-opacity-20 rounded-full animate-pulse",style:{animation:"pulse 1s infinite ease-in-out"}}),(0,yr.jsxs)("div",{className:"relative animate-bounce",style:{animation:"bounce 1.2s infinite ease-in-out",filter:"drop-shadow(0 10px 20px rgba(93, 31, 31, 0.3))"},children:[(0,yr.jsx)("img",{src:"/club-logo.png",alt:"Cawood Tennis Club",className:"w-20 h-20 object-contain",style:{animation:"subtle-rotate 3s infinite linear",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))",background:"transparent"},onLoad:e=>{const t=document.createElement("canvas"),r=t.getContext("2d");t.width=e.target.naturalWidth,t.height=e.target.naturalHeight,r.drawImage(e.target,0,0);const n=r.getImageData(0,0,t.width,t.height),a=n.data;for(let s=0;s<a.length;s+=4){const e=a[s],t=a[s+1],r=a[s+2];e>240&&t>240&&r>240&&(a[s+3]=0)}r.putImageData(n,0,0),e.target.src=t.toDataURL()},onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,yr.jsx)("div",{className:"logo-fallback w-20 h-20 bg-gradient-to-br from-[#9ACD32] to-[#7CB342] rounded-full flex items-center justify-center",style:{display:"none"},children:(0,yr.jsx)("span",{className:"text-white font-bold text-3xl drop-shadow-lg",children:"C"})}),(0,yr.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-white/20 to-transparent blur-sm opacity-50"})]})]}),(0,yr.jsx)("style",{jsx:!0,children:"\n            @keyframes subtle-rotate {\n              0% { transform: rotate(0deg) scale(1); }\n              25% { transform: rotate(2deg) scale(1.05); }\n              50% { transform: rotate(0deg) scale(1); }\n              75% { transform: rotate(-2deg) scale(1.05); }\n              100% { transform: rotate(0deg) scale(1); }\n            }\n          "}),(0,yr.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cawood Tennis Club"}),(0,yr.jsx)("p",{className:"text-gray-600 text-center",children:t}),(0,yr.jsxs)("div",{className:"flex space-x-1 mt-4",children:[(0,yr.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,yr.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,yr.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r&&(0,yr.jsxs)("div",{className:"mt-6 text-center",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Taking longer than expected?"}),(0,yr.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-[#5D1F1F] text-white px-4 py-2 rounded text-sm hover:bg-[#4A1818] transition-colors",children:"Refresh Page"})]})]})})})},ta=fr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ra=fr("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);class na extends n.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleFullRefresh=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("\ud83d\udd25 Error boundary caught:",e,t),this.setState(e=>({errorInfo:t,errorCount:e.errorCount+1})),window.Sentry&&window.Sentry.captureException(e,{contexts:{react:t}})}render(){if(this.state.hasError){var e,t;const r=!1;return(0,yr.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,yr.jsx)("div",{className:"bg-red-500 px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center",children:[(0,yr.jsx)(jn,{className:"w-6 h-6 text-white mr-2"}),(0,yr.jsx)("h2",{className:"text-xl font-bold text-white",children:"Oops! Something went wrong"})]})}),(0,yr.jsxs)("div",{className:"p-6",children:[(0,yr.jsxs)("p",{className:"text-gray-600 mb-4",children:["We've encountered an unexpected error. Don't worry, your data is safe.",this.state.errorCount>2&&(0,yr.jsx)("span",{className:"block mt-2 text-sm text-orange-600",children:"Multiple errors detected. A full page refresh might help."})]}),r&&(0,yr.jsxs)("details",{className:"mb-4 bg-gray-100 p-3 rounded",children:[(0,yr.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:"Error Details (Development Mode)"}),(0,yr.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,yr.jsxs)("div",{className:"text-xs bg-white p-2 rounded border border-gray-200",children:[(0,yr.jsx)("strong",{children:"Error:"}),(0,yr.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-red-600",children:null===(e=this.state.error)||void 0===e?void 0:e.toString()})]}),(null===(t=this.state.error)||void 0===t?void 0:t.stack)&&(0,yr.jsxs)("div",{className:"text-xs bg-white p-2 rounded border border-gray-200",children:[(0,yr.jsx)("strong",{children:"Stack Trace:"}),(0,yr.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-gray-600 max-h-40 overflow-auto",children:this.state.error.stack})]}),this.state.errorInfo&&(0,yr.jsxs)("div",{className:"text-xs bg-white p-2 rounded border border-gray-200",children:[(0,yr.jsx)("strong",{children:"Component Stack:"}),(0,yr.jsx)("pre",{className:"mt-1 whitespace-pre-wrap text-gray-600 max-h-40 overflow-auto",children:this.state.errorInfo.componentStack})]})]})]}),(0,yr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,yr.jsxs)("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:[(0,yr.jsx)(ta,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,yr.jsxs)("button",{onClick:this.handleFullRefresh,className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:[(0,yr.jsx)(ta,{className:"w-4 h-4 mr-2"}),"Refresh Page"]}),(0,yr.jsxs)("button",{onClick:this.handleGoHome,className:"flex-1 flex items-center justify-center bg-[#5D1F1F] text-white px-4 py-2 rounded hover:bg-[#4A1818] transition-colors",children:[(0,yr.jsx)(ra,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]}),(0,yr.jsx)("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-200",children:(0,yr.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"If this problem persists, please contact support"})})]})})}return this.props.children}}const aa=na,sa=fr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ia="1.0.41";const oa=new class{constructor(){this.currentVersion=ia,this.swRegistration=null,this.updateAvailable=!1,this.listeners=new Set}async init(){if(!("serviceWorker"in navigator))return console.warn("[VM] Service workers not supported"),!1;try{return console.log("[VM] Registering service worker..."),this.swRegistration=await navigator.serviceWorker.register("/sw.js"),this.swRegistration.addEventListener("updatefound",()=>{console.log("[VM] New service worker found, installing...");const e=this.swRegistration.installing;e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&(console.log("[VM] New version available!"),this.updateAvailable=!0,this.notifyListeners("updateAvailable",{version:this.currentVersion}))})}),navigator.serviceWorker.addEventListener("message",e=>{console.log("[VM] Received message from SW:",e.data),"NEW_VERSION_ACTIVE"===e.data.type&&this.notifyListeners("newVersionActive",e.data)}),setInterval(()=>{this.checkForUpdates()},3e5),this.checkForUpdates(),console.log("[VM] Version manager initialized successfully"),!0}catch(e){return console.error("[VM] Service worker registration failed:",e),!1}}async checkForUpdates(){if(this.swRegistration)try{await this.swRegistration.update(),console.log("[VM] Checked for updates")}catch(e){console.error("[VM] Update check failed:",e)}}async applyUpdate(){if(this.swRegistration&&this.updateAvailable){const e=this.swRegistration.waiting;if(e)return console.log("[VM] Applying update..."),e.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>{window.location.reload()},500),!0}return!1}async clearCacheAndReload(){try{if("serviceWorker"in navigator&&navigator.serviceWorker.controller){const e=new MessageChannel;e.port1.onmessage=e=>{"CACHE_CLEARED"===e.data.type&&(console.log("[VM] Cache cleared, reloading..."),window.location.reload())},navigator.serviceWorker.controller.postMessage({type:"CLEAR_CACHE"},[e.port2])}else{if("caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}window.location.reload()}}catch(e){console.error("[VM] Failed to clear cache:",e),window.location.reload()}}bustCache(e){const t=e.includes("?")?"&":"?";return"".concat(e).concat(t,"v=").concat(this.currentVersion,"&t=").concat(Date.now())}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,t){this.listeners.forEach(r=>{try{r(e,t)}catch(n){console.error("[VM] Listener error:",n)}})}getVersionInfo(){return{version:this.currentVersion,updateAvailable:this.updateAvailable,swRegistered:!!this.swRegistration}}};"undefined"!==typeof window&&setTimeout(()=>{oa.init()},1e3);const la=()=>{const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1),[s,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=oa.addListener((e,r)=>{console.log("[UpdateNotification] Version event:",e,r),"updateAvailable"===e&&(i(r),t(!0),Vr.tap()),"newVersionActive"===e&&setTimeout(()=>{window.location.reload()},1e3)}),r=oa.getVersionInfo();return r.updateAvailable&&(i(r),t(!0)),e},[]);const o=()=>{t(!1),Vr.tap()};return e?(0,yr.jsx)(yr.Fragment,{children:(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end sm:items-center justify-center p-4",children:(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all",children:(0,yr.jsxs)("div",{className:"p-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yr.jsxs)("div",{className:"flex items-center",children:[(0,yr.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,yr.jsx)(sa,{className:"w-5 h-5 text-blue-600"})}),(0,yr.jsxs)("div",{className:"ml-3",children:[(0,yr.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Update Available"}),(0,yr.jsxs)("p",{className:"text-sm text-gray-500",children:["Version ",(null===s||void 0===s?void 0:s.version)||"1.0.1"]})]})]}),(0,yr.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:r,children:(0,yr.jsx)(Sr,{className:"w-5 h-5"})})]}),(0,yr.jsx)("div",{className:"mb-6",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"A new version of the Cawood Tennis app is available. Update now to get the latest features and improvements."})}),(0,yr.jsxs)("div",{className:"flex space-x-3",children:[(0,yr.jsx)("button",{onClick:async()=>{a(!0),Vr.impact();try{await oa.applyUpdate()||await oa.clearCacheAndReload()}catch(e){console.error("[UpdateNotification] Update failed:",e),window.location.reload()}},disabled:r,className:"flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-md transition-colors ".concat(r?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),style:{touchAction:"manipulation"},children:r?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ta,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(sa,{className:"w-4 h-4 mr-2"}),"Update Now"]})}),!r&&(0,yr.jsx)("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",style:{touchAction:"manipulation"},children:"Later"})]}),(0,yr.jsx)("div",{className:"mt-3 text-xs text-gray-500 text-center",children:"Updates are automatic - no app store required"})]})})})}):null},ca=e=>{let{className:t="",position:r="bottom-right"}=e;const[a,s]=(0,n.useState)({version:ia,updateAvailable:!1,buildTime:null}),[i,o]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{const e=await fetch("/build-info.json");if(e.ok){const t=await e.json();s(e=>c(c({},e),{},{buildTime:t.buildTime,buildDate:t.buildDate}))}}catch(e){}})();const e=oa.addListener((e,t)=>{"updateAvailable"===e&&s(e=>c(c({},e),{},{updateAvailable:!0}))}),t=oa.getVersionInfo();return s(e=>c(c({},e),t)),e},[]);return(0,yr.jsx)("div",{className:"".concat({"bottom-right":"fixed bottom-4 right-4 z-40 sm:bottom-4 bottom-20","bottom-left":"fixed bottom-4 left-4 z-40 sm:bottom-4 bottom-20","top-right":"fixed top-4 right-4 z-40","top-left":"fixed top-4 left-4 z-40",footer:"inline-flex"}[r]," ").concat(t),children:(0,yr.jsxs)("div",{className:"bg-white bg-opacity-90 backdrop-blur-sm border border-gray-200 rounded-lg shadow-lg transition-all duration-200 cursor-pointer hover:bg-opacity-100 ".concat(i?"p-3":"px-3 py-1"),onClick:()=>{o(!i)},children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,yr.jsxs)("span",{className:"inline-flex items-center ".concat(a.updateAvailable?"text-orange-600":"text-gray-600"),children:[(0,yr.jsxs)("span",{className:"font-mono font-medium",children:["v",a.version]}),a.updateAvailable&&(0,yr.jsx)("span",{className:"ml-1 w-2 h-2 bg-orange-500 rounded-full animate-pulse"})]}),i&&(0,yr.jsx)("div",{className:"border-l border-gray-300 pl-2 ml-2",children:(0,yr.jsxs)("div",{className:"flex flex-col space-y-1",children:[a.buildTime&&(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:["Build: ",a.buildTime]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:["Cache: ",a.swRegistered?"\u2705":"\u274c"]}),a.updateAvailable&&(0,yr.jsx)("div",{className:"text-xs text-orange-600 font-medium",children:"\ud83d\udd04 Update available"}),(0,yr.jsx)("button",{onClick:()=>oa.clearCacheAndReload(),className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded text-left hover:bg-red-200",children:"\ud83d\uddd1\ufe0f Force Refresh"})]})})]}),!i&&(0,yr.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:"Click for details"})]})})},da=e=>{let{seasons:t,selectedSeason:r,onSeasonSelect:a,loading:s}=e;const[i,o]=(0,n.useState)(!1),l=e=>{switch(e){case"active":return"\ud83c\udfbe";case"completed":return"\ud83c\udfc6";case"archived":return"\ud83d\udcc1";default:return"\ud83d\udcc5"}},c=e=>{switch(e){case"active":return"text-green-600 bg-green-50";case"completed":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return s||!r?(0,yr.jsx)("div",{className:"bg-gray-100 rounded-lg px-4 py-2 animate-pulse",children:(0,yr.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32"})}):(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsxs)("button",{onClick:()=>o(!i),className:"flex items-center space-x-3 bg-white border border-gray-200 rounded-lg px-4 py-3 hover:border-gray-300 transition-colors shadow-sm",children:[(0,yr.jsx)("img",{src:"/club-logo.png",alt:"Cawood Tennis Club",className:"w-8 h-8 object-contain flex-shrink-0",onError:e=>{e.target.src="/c-ball.png",e.target.className="w-6 h-6 object-contain flex-shrink-0"}}),(0,yr.jsxs)("div",{className:"text-left flex-1 min-w-0",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("div",{className:"font-medium text-gray-900 truncate",children:r.name}),(0,yr.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(Qr(r).badgeColor),children:Qr(r).badge})]}),(0,yr.jsx)("div",{className:"text-xs text-gray-500 truncate",children:Qr(r).subtitle})]}),(0,yr.jsx)(Zr,{className:"w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ".concat(i?"rotate-180":"")})]}),i&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,yr.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:[(0,yr.jsx)("div",{className:"p-2 border-b border-gray-100",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between px-2 py-1",children:[(0,yr.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Select Season"}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===t||void 0===t?void 0:t.filter(e=>"active"===e.status).length)||0," active"]})]})}),(0,yr.jsx)("div",{className:"max-h-64 overflow-y-auto",children:null===t||void 0===t?void 0:t.sort((e,t)=>"active"===e.status&&"active"!==t.status?-1:"active"===t.status&&"active"!==e.status?1:new Date(t.start_date)-new Date(e.start_date)).map(e=>{const t=Qr(e);return(0,yr.jsxs)("button",{onClick:()=>{a(e),o(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors border-l-4 ".concat(e.id===r.id?"border-[#5D1F1F] bg-[#5D1F1F]/5":"border-transparent"),children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("span",{children:l(e.status)}),(0,yr.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,yr.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(t.badgeColor),children:t.badge})]}),(0,yr.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(c(e.status)),children:e.status})]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,yr.jsx)("div",{className:"mb-1",children:t.subtitle}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("span",{children:new Date(e.start_date).toLocaleDateString()}),(0,yr.jsx)("span",{children:"\u2022"}),(0,yr.jsxs)("span",{children:[e.player_count," players"]}),(0,yr.jsx)("span",{children:"\u2022"}),(0,yr.jsxs)("span",{children:[e.match_count," ",(e.season_type,"matches")]})]})]})]},e.id)})}),0===(null===t||void 0===t?void 0:t.length)&&(0,yr.jsx)("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No seasons available"})]})]})]})},ua=()=>{const e=ir(),{user:t=null,loading:r=!0,authMode:a="normal",actions:s={}}=e||{},i=lr(),{seasons:o=[],activeSeason:l=null,selectedSeason:d=null,loading:u=!0,actions:h={}}=i||{},m=or(null===t||void 0===t?void 0:t.id,null===d||void 0===d?void 0:d.id),{ladderPlayers:p=[],allUsers:f=[],selectedSeason:g=null,availability:y=[],matchFixtures:v=[],matchResults:x=[],loading:b={initial:!0},error:w=null,actions:_={},helpers:j={},refetch:N={},supabase:k=null}=m||{},[S,C]=(0,n.useState)("ladder"),[E,P]=(0,n.useState)(!1),[T,A]=(0,n.useState)(!1),[O,R]=(0,n.useState)(null),[I,D]=(0,n.useState)(""),[L,M]=(0,n.useState)(null);if(!e||!i||!m)return(0,yr.jsx)("div",{className:"p-4 bg-red-100",children:"Error: Service unavailable"});if(!r&&!u&&(null===b||void 0===b||!b.initial)&&(w||null!==i&&void 0!==i&&i.error||null!==e&&void 0!==e&&e.error))return(0,yr.jsx)("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[(0,yr.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Connection Error"}),(0,yr.jsx)("p",{className:"text-gray-700 mb-4",children:"There was a problem connecting to the server. This may be temporary."}),(0,yr.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"Refresh Page"})]})});if(r||u||null!==b&&void 0!==b&&b.initial){const e=r?"Authenticating...":u?"Loading seasons...":"Loading app data...";return(0,yr.jsx)(ea,{message:e})}return(0,yr.jsxs)(Ar,{children:["reset"===a&&(0,yr.jsx)(Or,{onAuthChange:()=>{},isPasswordReset:!0,onPasswordResetComplete:()=>{null!==s&&void 0!==s&&s.setAuthMode&&s.setAuthMode("normal")}}),!t&&"reset"!==a&&(0,yr.jsx)(Or,{onAuthChange:()=>{}}),t&&(0,yr.jsx)(aa,{children:(0,yr.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yr.jsx)("header",{className:"bg-[#5D1F1F] text-white shadow-sm",style:{paddingTop:"env(safe-area-inset-top)"},children:(0,yr.jsx)("div",{className:"max-w-7xl mx-auto px-3 py-3 pb-4",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between h-12",children:[(0,yr.jsx)("div",{className:"flex-1 max-w-[280px] sm:max-w-[320px]",children:(0,yr.jsx)(da,{seasons:o,selectedSeason:d,onSeasonSelect:null===h||void 0===h?void 0:h.setSelectedSeason,loading:u})}),(0,yr.jsx)("div",{className:"flex items-center",children:(0,yr.jsxs)("button",{onClick:async()=>{if(null!==s&&void 0!==s&&s.signOut)try{await s.signOut()}catch(w){console.error("\u274c Logout failed:",w),alert("Error signing out. Please try again.")}},className:"bg-[#4A1818] hover:bg-[#6B2424] text-white px-3 py-1.5 rounded transition-colors min-h-[44px] flex items-center text-sm",style:{touchAction:"manipulation"},title:"Sign out ".concat((null===t||void 0===t?void 0:t.name)||""),children:[(0,yr.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,yr.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"}),(0,yr.jsx)("span",{className:"sm:hidden",children:"Out"})]})})]})})}),(0,yr.jsx)(Gr,{activeTab:S,setActiveTab:C,currentUser:t,ladderPlayers:p,selectedSeason:d}),(0,yr.jsxs)("main",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-6 pb-20 sm:pb-6",children:["ladder"===S&&(0,yr.jsx)(Yr,{currentUser:t,users:p,updateRankings:(null===_||void 0===_?void 0:_.updateRankings)||(()=>alert("Update rankings not available")),selectedSeason:d,onPlayerSelect:e=>{M(e),C("profile")},supabase:k}),"matches"===S&&(0,yr.jsx)(tn,{currentUser:t,currentSeason:g||d,selectedSeason:d,setShowScheduleModal:P,matchFixtures:v,matchResults:x,availability:y,users:f,generateMatches:(null===_||void 0===_?void 0:_.generateMatches)||(()=>alert("Generate matches not available")),openScoreModal:e=>{R(e),A(!0)},getAvailabilityStats:(null===j||void 0===j?void 0:j.getAvailabilityStats)||(()=>({total:0,available:0,responded:0,pending:0})),getMatchScore:(null===j||void 0===j?void 0:j.getMatchScore)||(()=>null),supabase:k,refetch:N}),"profile"===S&&(0,yr.jsx)(gn,{currentUser:t,seasons:o,selectedSeason:d,allUsers:f,selectedPlayerId:L,onPlayerSelect:M,onPlayerClear:()=>M(null)}),"availability"===S&&(0,yr.jsx)(yn,{currentUser:t,currentSeason:g||d,selectedSeason:d,ladderPlayers:p,getPlayerAvailability:(null===j||void 0===j?void 0:j.getPlayerAvailability)||(()=>{}),setPlayerAvailability:(e,r)=>{null!==_&&void 0!==_&&_.setPlayerAvailability&&_.setPlayerAvailability(e,r,t.id)},matchFixtures:v,matchResults:x,getMatchScore:(null===j||void 0===j?void 0:j.getMatchScore)||(()=>null)}),"admin"===S&&"admin"===(null===t||void 0===t?void 0:t.role)&&(0,yr.jsx)(Yn,{users:f,ladderPlayers:p,currentUser:t,currentSeason:g||d,activeSeason:l,approveUser:(null===_||void 0===_?void 0:_.approveUser)||(()=>alert("Approve user not available")),updateUserRole:(null===_||void 0===_?void 0:_.updateUserRole)||(()=>alert("Update user role not available")),addToLadder:(null===_||void 0===_?void 0:_.addToLadder)||(()=>alert("Add to ladder not available")),fetchUsers:(null===N||void 0===N?void 0:N.users)||(()=>{}),setPlayerAvailability:(null===_||void 0===_?void 0:_.setPlayerAvailability)||(()=>{}),getPlayerAvailability:(null===j||void 0===j?void 0:j.getPlayerAvailability)||(()=>{}),getAvailabilityStats:(null===j||void 0===j?void 0:j.getAvailabilityStats)||(()=>({total:0,available:0,responded:0,pending:0})),clearOldMatches:(null===_||void 0===_?void 0:_.clearOldMatches)||(()=>alert("Clear matches not available")),deleteSeason:(null===_||void 0===_?void 0:_.deleteSeason)||(()=>alert("Delete season not available")),deleteUser:(null===_||void 0===_?void 0:_.deleteUser)||(()=>alert("Delete user not available")),matchFixtures:v,matchResults:x,selectedSeason:d,seasonActions:h,seasons:o,supabase:k})]}),(0,yr.jsx)(Xn,{showModal:E,setShowModal:P,newMatchDate:I,setNewMatchDate:D,addMatchToSeason:async()=>{if(null!==_&&void 0!==_&&_.addMatchToSeason){const e=await _.addMatchToSeason(I);null!==e&&void 0!==e&&e.success&&(P(!1),D(""))}else console.error("\u274c No addMatchToSeason action available")}}),(0,yr.jsx)(Zn,{showModal:T,setShowModal:A,selectedMatch:O,setSelectedMatch:R,submitScore:async(e,r)=>{if(O)try{const n=await cr(O.fixtureId,e,r,t.id);return null!==N&&void 0!==N&&N.results&&await N.results(),null!==N&&void 0!==N&&N.seasons&&await N.seasons(),n}catch(w){throw w}},currentUser:t,getMatchScore:(null===j||void 0===j?void 0:j.getMatchScore)||(()=>null),onChallengeScore:async e=>{try{return await dr(c(c({},e),{},{challengerId:t.id})),null!==N&&void 0!==N&&N.results&&await N.results(),{success:!0}}catch(w){throw w}}})]})}),(0,yr.jsx)(la,{}),(0,yr.jsx)(ca,{position:"bottom-right"})]})};a.createRoot(document.getElementById("root")).render((0,yr.jsx)(n.StrictMode,{children:(0,yr.jsx)(ua,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})})})();
//# sourceMappingURL=main.8e59fb7e.js.map